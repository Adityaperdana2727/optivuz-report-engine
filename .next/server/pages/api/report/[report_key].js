"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/report/[report_key]";
exports.ids = ["pages/api/report/[report_key]"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@supabase/supabase-js");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freport%2F%5Breport_key%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freport%2F%5Breport_key%5D.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freport%2F%5Breport_key%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freport%2F%5Breport_key%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_report_report_key_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/report/[report_key].ts */ \"(api)/./pages/api/report/[report_key].ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_report_report_key_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_report_report_key_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_report_report_key_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_report_report_key_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/report/[report_key]\",\n        pathname: \"/api/report/[report_key]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_report_report_key_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnJlcG9ydCUyRiU1QnJlcG9ydF9rZXklNUQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnJlcG9ydCUyRiU1QnJlcG9ydF9rZXklNUQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDK0Q7QUFDL0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDREQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyw0REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvPzk3M2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9yZXBvcnQvW3JlcG9ydF9rZXldLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcmVwb3J0L1tyZXBvcnRfa2V5XVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3JlcG9ydC9bcmVwb3J0X2tleV1cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freport%2F%5Breport_key%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freport%2F%5Breport_key%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/html.ts":
/*!*********************!*\
  !*** ./lib/html.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   renderTabbedHTML: () => (/* binding */ renderTabbedHTML)\n/* harmony export */ });\n/* harmony import */ var _report_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./report/utils */ \"(api)/./lib/report/utils.ts\");\n\nconst BRAND = {\n    primary: \"#0B4F6C\",\n    accent: \"#F2C94C\",\n    text: \"#0f172a\",\n    muted: \"#64748b\",\n    line: \"#e5e7eb\",\n    soft: \"#f6f8fb\",\n    card: \"#ffffff\"\n};\nfunction esc(s) {\n    return String(s ?? \"\").replace(/[&<>\"']/g, (c)=>({\n            \"&\": \"&amp;\",\n            \"<\": \"&lt;\",\n            \">\": \"&gt;\",\n            '\"': \"&quot;\",\n            \"'\": \"&#39;\"\n        })[c]);\n}\nfunction money(n) {\n    return (0,_report_utils__WEBPACK_IMPORTED_MODULE_0__.formatIDR)(n);\n}\nfunction tag(label, tone = \"muted\") {\n    const bg = tone === \"ok\" ? \"rgba(16,185,129,.12)\" : tone === \"bad\" ? \"rgba(239,68,68,.12)\" : \"rgba(148,163,184,.18)\";\n    const fg = tone === \"ok\" ? \"#065f46\" : tone === \"bad\" ? \"#7f1d1d\" : BRAND.muted;\n    return `<span class=\"tag\" style=\"background:${bg};color:${fg}\">${esc(label)}</span>`;\n}\nfunction sectionHeaderHTML(title, period, reportId) {\n    return `\n    <div class=\"sectionHeader\">\n      <div class=\"titleWrap\">\n        <div class=\"title\">${esc(title)}</div>\n        <div class=\"period\">${esc(period)}</div>\n      </div>\n      <button class=\"btn primary\" data-print-action=\"${esc(reportId)}\">Print PDF</button>\n    </div>\n  `;\n}\nfunction auditLink(trace, label = \"Trace\") {\n    if (!trace || trace.header_ids.length === 0) return \"\";\n    const headers = trace.header_ids.join(\",\");\n    const count = trace.header_ids.length;\n    return `<a href=\"#audit\" class=\"auditLink\" data-audit-headers=\"${esc(headers)}\">${esc(label)} (${count})</a>`;\n}\nfunction renderTabbedHTML(report) {\n    const { company, logo, address, contact, periodFrom, periodTo, checks, models } = report;\n    const genAt = new Date().toISOString();\n    const tabs = [\n        {\n            id: \"dashboard\",\n            label: \"Dashboard\"\n        },\n        {\n            id: \"journal\",\n            label: \"Journal Register\"\n        },\n        {\n            id: \"gl\",\n            label: \"General Ledger\"\n        },\n        {\n            id: \"tb\",\n            label: \"Trial Balance\"\n        },\n        {\n            id: \"pl\",\n            label: \"Profit & Loss\"\n        },\n        {\n            id: \"bs\",\n            label: \"Balance Sheet\"\n        },\n        {\n            id: \"cf\",\n            label: \"Cash Flow\"\n        },\n        {\n            id: \"equity\",\n            label: \"Changes in Equity\"\n        },\n        {\n            id: \"plc\",\n            label: \"Comparative P&L\"\n        },\n        {\n            id: \"bsc\",\n            label: \"Comparative BS\"\n        },\n        {\n            id: \"movement\",\n            label: \"Account Movement\"\n        },\n        {\n            id: \"audit\",\n            label: \"Audit Trail\"\n        },\n        {\n            id: \"analytics\",\n            label: \"Analytics\"\n        },\n        {\n            id: \"data\",\n            label: \"Raw Data\"\n        }\n    ];\n    const header = `\n    <div class=\"topbar\">\n      <div class=\"brand\">\n        ${logo ? `<img class=\"logo\" src=\"${esc(logo)}\" alt=\"logo\" />` : `<div class=\"logoPh\"></div>`}\n        <div>\n          <div class=\"title\">${esc(company)}</div>\n          <div class=\"sub muted\">${esc(address)} ${address && contact ? \"•\" : \"\"} ${esc(contact)}</div>\n        </div>\n      </div>\n      <div class=\"meta\">\n        <div class=\"pill\"><span class=\"muted\">Periode</span><b>${esc(periodFrom || \"-\")}</b> → <b>${esc(periodTo || \"-\")}</b></div>\n        <div class=\"pill\"><span class=\"muted\">Generated</span><b>${esc(genAt.slice(0, 19).replace(\"T\", \" \"))}Z</b></div>\n      </div>\n    </div>`;\n    const tabsHtml = tabs.map((t)=>`<button type=\"button\" class=\"tab\" data-tab=\"${t.id}\">${esc(t.label)}</button>`).join(\"\");\n    const body = `\n    ${header}\n    <div class=\"tabs\">${tabsHtml}</div>\n    <div class=\"content\">\n      <div class=\"printHeader\">\n        <div class=\"printBrand\">${esc(company)}</div>\n        <div class=\"printTitle\" id=\"printTitle\"></div>\n        <div class=\"printPeriod\" id=\"printPeriod\"></div>\n      </div>\n      <div class=\"printFooter\">\n        <div class=\"printMeta\">Generated ${esc(genAt.slice(0, 19).replace(\"T\", \" \"))}Z</div>\n        <div class=\"pageNum\"></div>\n      </div>\n      ${sectionDashboard(report)}\n      ${sectionJournalRegister(report)}\n      ${sectionGeneralLedger(report)}\n      ${sectionTrialBalance(report)}\n      ${sectionProfitLoss(report)}\n      ${sectionBalanceSheet(report)}\n      ${sectionCashflow(report)}\n      ${sectionEquityChanges(report)}\n      ${sectionComparativePL(report)}\n      ${sectionComparativeBS(report)}\n      ${sectionAccountMovement(report)}\n      ${sectionAuditTrail(report)}\n      ${sectionAnalytics(report)}\n      ${sectionRawData(report)}\n    </div>\n  `;\n    return `<!doctype html>\n<html lang=\"id\">\n<head>\n<meta charset=\"utf-8\" />\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n<title>Accounting Reports | ${esc(company)}</title>\n<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n<link href=\"https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n<style>\n  :root{\n    --brand:${BRAND.primary};\n    --accent:${BRAND.accent};\n    --text:${BRAND.text};\n    --muted:${BRAND.muted};\n    --line:${BRAND.line};\n    --soft:${BRAND.soft};\n    --card:${BRAND.card};\n  }\n  *{box-sizing:border-box}\n  body{margin:0;font-family:\"Source Sans 3\",system-ui,Segoe UI,Arial,sans-serif;color:var(--text);background:var(--soft)}\n  .topbar{display:flex;gap:14px;align-items:flex-start;justify-content:space-between;padding:16px 16px 10px;background:#fff;border-bottom:1px solid var(--line);position:sticky;top:0;z-index:5}\n  .brand{display:flex;gap:12px;align-items:center;min-width:260px}\n  .logo{width:44px;height:44px;border-radius:10px;object-fit:cover;border:1px solid var(--line)}\n  .logoPh{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg, rgba(11,79,108,.2), rgba(242,201,76,.2));border:1px solid var(--line)}\n  .title{font-weight:800;font-size:16px}\n  .sub{font-size:12px;max-width:520px}\n  .muted{color:var(--muted)}\n  .meta{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}\n  .pill{border:1px solid var(--line);background:#fff;border-radius:999px;padding:7px 10px;font-size:12px;display:flex;gap:8px;align-items:center}\n  .tabs{display:flex;gap:8px;overflow:auto;padding:10px 12px;background:#fff;border-bottom:1px solid var(--line);position:sticky;top:77px;z-index:4}\n  .tab{border:1px solid var(--line);background:#fff;border-radius:999px;padding:8px 12px;font-size:12px;cursor:pointer;white-space:nowrap;text-decoration:none;color:inherit;display:inline-block;transition:all .15s ease}\n  .tab:hover{border-color:rgba(11,79,108,.35);background:rgba(11,79,108,.08);color:var(--brand)}\n  .tab.active{border-color:rgba(11,79,108,.35);background:rgba(11,79,108,.12);color:var(--brand);font-weight:700}\n  .content{padding:14px 12px 80px;max-width:1300px;margin:0 auto}\n  .section{display:none}\n  .section.active{display:block}\n  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px;margin:12px 0}\n  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}\n  .kpi{border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff}\n  .kpi .label{font-size:11px;color:var(--muted)}\n  .kpi .val{font-size:15px;font-weight:800;margin-top:4px}\n  h2{margin:6px 0 10px;font-size:15px}\n  h3{margin:10px 0 8px;font-size:13px}\n  table{width:100%;border-collapse:collapse}\n  th,td{border-bottom:1px solid var(--line);padding:8px 10px;font-size:12px;vertical-align:top}\n  th{text-align:left;background:#f8fafc;color:#0f172a;position:sticky;top:126px;z-index:3}\n  td.num,th.num{text-align:right;font-variant-numeric:tabular-nums}\n  .tag{display:inline-flex;align-items:center;border:1px solid rgba(148,163,184,.35);padding:2px 8px;border-radius:999px;font-size:11px}\n  .toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin:10px 0 0}\n  .input{border:1px solid var(--line);border-radius:10px;padding:8px 10px;font-size:12px;min-width:200px}\n  .btn{border:1px solid var(--line);border-radius:10px;padding:8px 10px;font-size:12px;background:#fff;cursor:pointer}\n  .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}\n  .note{font-size:12px;color:var(--muted);line-height:1.5}\n  .right{display:flex;gap:8px;align-items:center;justify-content:flex-end}\n  .section-title{display:flex;align-items:center;justify-content:space-between;gap:10px}\n  .divider{height:1px;background:var(--line);margin:10px 0}\n  .compact td{padding:6px 8px}\n  .auditLink{font-size:11px;color:var(--brand);text-decoration:underline;cursor:pointer}\n  .sectionHeader{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}\n  .sectionHeader .titleWrap{display:flex;flex-direction:column;gap:2px}\n  .sectionHeader .title{font-weight:800;font-size:15px}\n  .sectionHeader .period{font-size:11px;color:var(--muted)}\n  .audit-table col.date{width:120px}\n  .audit-table col.header{width:170px}\n  .audit-table col.debit{width:140px}\n  .audit-table col.credit{width:140px}\n  .audit-table col.status{width:90px}\n  .audit-detail-cell{padding:0;border-bottom:1px solid var(--line)}\n  .audit-detail-wrap{background:#f8fafc;padding:8px 10px}\n  .audit-detail{width:100%;border-collapse:collapse}\n  .audit-detail th,.audit-detail td{border-bottom:1px dashed #e5e7eb;padding:6px 8px;font-size:11px}\n  .audit-detail th{position:static;background:#eef2f7;color:#0f172a}\n  .audit-detail .num{text-align:right;font-variant-numeric:tabular-nums}\n  .audit-detail tr:last-child td{border-bottom:0}\n  .pager{display:flex;align-items:center;gap:8px}\n  .pager .btn{padding:6px 10px}\n  .pager .count{font-size:12px;color:var(--muted)}\n  .printHeader,.printFooter{display:none}\n  @media (max-width: 980px){\n    .grid{grid-template-columns:repeat(2,1fr)}\n    .sub{max-width:340px}\n  }\n  @media print{\n    @page { size: A4; margin: 14mm; }\n    body{background:#fff}\n    .tabs,.toolbar,.btn,.topbar{display:none !important}\n    .content{max-width:none;padding:20mm 0}\n    .section{display:none}\n    .section[data-print-active=\"true\"]{display:block}\n    .section[data-print-active=\"true\"] .card{page-break-inside:avoid}\n    .printHeader,.printFooter{display:flex;justify-content:space-between;align-items:flex-end;gap:12px}\n    .printHeader{position:fixed;top:0;left:0;right:0;padding:0 0 6mm;border-bottom:1px solid var(--line)}\n    .printFooter{position:fixed;bottom:0;left:0;right:0;padding:6mm 0 0;border-top:1px solid var(--line);font-size:11px;color:var(--muted)}\n    .printBrand{font-weight:800;font-size:14px}\n    .printTitle{font-weight:700;font-size:13px}\n    .printPeriod{font-size:11px;color:var(--muted)}\n    .pageNum::after{content:\"Page \" counter(page)}\n    table thead{display:table-header-group}\n    table tfoot{display:table-footer-group}\n    th{position:static}\n  }\n</style>\n</head>\n<body>\n  ${body}\n<script>\n  var tabs = Array.prototype.slice.call(document.querySelectorAll(\".tab\"));\n  var sections = Array.prototype.slice.call(document.querySelectorAll(\".section\"));\n\n  function activate(id){\n    for (var i = 0; i < tabs.length; i++){\n      var t = tabs[i];\n      var isActive = t.getAttribute(\"data-tab\") === id;\n      if (isActive) t.classList.add(\"active\");\n      else t.classList.remove(\"active\");\n    }\n    for (var j = 0; j < sections.length; j++){\n      var s = sections[j];\n      var isShown = s.getAttribute(\"data-section\") === id;\n      if (isShown) s.classList.add(\"active\");\n      else s.classList.remove(\"active\");\n    }\n    if (history && history.replaceState) history.replaceState(null, \"\", \"#\" + id);\n  }\n\n  for (var k = 0; k < tabs.length; k++){\n    (function(tab){\n      tab.addEventListener(\"click\", function(e){\n        e.preventDefault();\n        var id = tab.getAttribute(\"data-tab\") || \"dashboard\";\n        activate(id);\n      });\n    })(tabs[k]);\n  }\n\n  var initial = (location.hash || \"#dashboard\").slice(1);\n  var hasInitial = tabs.some(function(t){ return t.getAttribute(\"data-tab\") === initial; });\n  activate(hasInitial ? initial : \"dashboard\");\n\n  window.addEventListener(\"hashchange\", function(){\n    var current = (location.hash || \"#dashboard\").slice(1);\n    var hasCurrent = tabs.some(function(t){ return t.getAttribute(\"data-tab\") === current; });\n    activate(hasCurrent ? current : \"dashboard\");\n  });\n\n  var glSearch = document.getElementById(\"glSearch\");\n  if (glSearch){\n    glSearch.addEventListener(\"input\", function(e){\n      var q = String(e.target.value || \"\").trim().toLowerCase();\n      var cards = document.querySelectorAll(\"[data-gl-account]\");\n      for (var c = 0; c < cards.length; c++){\n        var name = String(cards[c].getAttribute(\"data-gl-account\") || \"\").toLowerCase();\n        cards[c].style.display = (!q || name.indexOf(q) !== -1) ? \"\" : \"none\";\n      }\n    });\n  }\n\n  function applyTableFilter(prefix){\n    var qInput = document.getElementById(prefix + \"Search\");\n    var fInput = document.getElementById(prefix + \"From\");\n    var tInput = document.getElementById(prefix + \"To\");\n    var q = qInput ? String(qInput.value || \"\").trim().toLowerCase() : \"\";\n    var from = fInput ? String(fInput.value || \"\").trim() : \"\";\n    var to = tInput ? String(tInput.value || \"\").trim() : \"\";\n    var rows = document.querySelectorAll(\"[data-filter-row='\" + prefix + \"']\");\n    for (var r = 0; r < rows.length; r++){\n      var row = rows[r];\n      var text = String(row.getAttribute(\"data-text\") || \"\").toLowerCase();\n      var date = String(row.getAttribute(\"data-date\") || \"\");\n      var okText = !q || text.indexOf(q) !== -1;\n      var okFrom = !from || (date && date >= from);\n      var okTo = !to || (date && date <= to);\n      row.style.display = (okText && okFrom && okTo) ? \"\" : \"none\";\n    }\n  }\n\n  [\"jr\", \"audit\"].forEach(function(prefix){\n    var input = document.getElementById(prefix + \"Search\");\n    var from = document.getElementById(prefix + \"From\");\n    var to = document.getElementById(prefix + \"To\");\n    [input, from, to].forEach(function(el){\n      if (!el) return;\n      el.addEventListener(\"input\", function(){ applyTableFilter(prefix); });\n      el.addEventListener(\"change\", function(){ applyTableFilter(prefix); });\n    });\n  });\n\n  function clearPrintState(){\n    var active = document.querySelectorAll(\".section[data-print-active='true']\");\n    for (var i2 = 0; i2 < active.length; i2++){\n      active[i2].removeAttribute(\"data-print-active\");\n    }\n  }\n\n  function printReport(reportId){\n    var section = document.querySelector(\"[data-report='\" + reportId + \"']\");\n    if (!section) return;\n    clearPrintState();\n    section.setAttribute(\"data-print-active\", \"true\");\n    var title = section.getAttribute(\"data-title\") || \"Report\";\n    var period = section.getAttribute(\"data-period\") || \"\";\n    var t = document.getElementById(\"printTitle\");\n    var p = document.getElementById(\"printPeriod\");\n    if (t) t.textContent = title;\n    if (p) p.textContent = period;\n    window.print();\n  }\n\n  window.addEventListener(\"afterprint\", function(){\n    clearPrintState();\n  });\n\n  var printBtns = document.querySelectorAll(\"[data-print-action]\");\n  for (var pb = 0; pb < printBtns.length; pb++){\n    (function(btn){\n      btn.addEventListener(\"click\", function(){\n        var reportId = btn.getAttribute(\"data-print-action\");\n        if (reportId) printReport(reportId);\n      });\n    })(printBtns[pb]);\n  }\n\n  var auditLinks = document.querySelectorAll(\"[data-audit-headers]\");\n  for (var al = 0; al < auditLinks.length; al++){\n    (function(el){\n      el.addEventListener(\"click\", function(){\n        var headers = String(el.getAttribute(\"data-audit-headers\") || \"\").split(\",\").filter(Boolean);\n        var query = headers[0] || \"\";\n        var input = document.getElementById(\"auditSearch\");\n        if (input){\n          input.value = query;\n          input.dispatchEvent(new Event(\"input\"));\n        }\n        activate(\"audit\");\n      });\n    })(auditLinks[al]);\n  }\n\n  function initRawDataPager(){\n    var rows = document.querySelectorAll(\"[data-raw-row]\");\n    if (!rows.length) return;\n    var pageSize = 50;\n    var total = rows.length;\n    var pageCount = Math.max(1, Math.ceil(total / pageSize));\n    var current = 1;\n    var info = document.getElementById(\"rawPageInfo\");\n    var prev = document.getElementById(\"rawPrev\");\n    var next = document.getElementById(\"rawNext\");\n    var count = document.getElementById(\"rawCount\");\n\n    function render(){\n      var start = (current - 1) * pageSize;\n      var end = start + pageSize;\n      for (var i = 0; i < rows.length; i++){\n        rows[i].style.display = (i >= start && i < end) ? \"\" : \"none\";\n      }\n      if (info) info.textContent = \"Page \" + current + \" / \" + pageCount;\n      if (count) count.textContent = total + \" rows\";\n      if (prev) prev.disabled = current <= 1;\n      if (next) next.disabled = current >= pageCount;\n    }\n\n    if (prev) prev.addEventListener(\"click\", function(){\n      if (current > 1){ current -= 1; render(); }\n    });\n    if (next) next.addEventListener(\"click\", function(){\n      if (current < pageCount){ current += 1; render(); }\n    });\n\n    render();\n  }\n\n  initRawDataPager();\n</script>\n</body>\n</html>`;\n}\nfunction sectionDashboard(report) {\n    const { checks, models, periodFrom, periodTo } = report;\n    const tb = models.trialBalance;\n    const pl = models.profitLoss;\n    const bs = models.balanceSheet;\n    const cf = models.cashflow;\n    const balancedTag = checks.isBalanced ? tag(\"Balanced\", \"ok\") : tag(\"Not Balanced\", \"bad\");\n    const period = `Period: ${periodFrom || \"-\"} → ${periodTo || \"-\"}`;\n    return `\n  <section class=\"section\" id=\"dashboard\" data-section=\"dashboard\" data-report=\"dashboard\" data-title=\"Dashboard\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Dashboard\", period, \"dashboard\")}\n      <div class=\"toolbar\">\n        <div class=\"right\">\n          ${balancedTag}\n          ${tag(`Journal lines: ${checks.rowCount}`)}\n          ${checks.missingDates ? tag(`Missing dates: ${checks.missingDates}`, \"bad\") : tag(\"Dates OK\", \"ok\")}\n        </div>\n      </div>\n      <div class=\"grid\" style=\"margin-top:10px\">\n        <div class=\"kpi\"><div class=\"label\">Total Debit (periode)</div><div class=\"val\">${money(checks.totalDebit)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Total Credit (periode)</div><div class=\"val\">${money(checks.totalCredit)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Net Profit (P&L)</div><div class=\"val\">${money(pl.totals.net_profit)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Net Cash Change</div><div class=\"val\">${money(cf.totals.net_change)}</div></div>\n      </div>\n      <div class=\"note\" style=\"margin-top:10px\">\n        Period range: <b>${esc(periodFrom || \"-\")}</b> → <b>${esc(periodTo || \"-\")}</b>.\n        Balance Sheet memakai tanggal akhir periode (<b>${esc(periodTo || \"-\")}</b>).\n      </div>\n    </div>\n\n    <div class=\"card\">\n      <h2>Quick Snapshot</h2>\n      <div class=\"grid\">\n        <div class=\"kpi\"><div class=\"label\">Total Assets (as-of)</div><div class=\"val\">${money(bs.totals.assets)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Total Liabilities (as-of)</div><div class=\"val\">${money(bs.totals.liabilities)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Total Equity (as-of)</div><div class=\"val\">${money(bs.totals.equity)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Balance Diff</div><div class=\"val\">${money(bs.totals.balance_diff)}</div></div>\n      </div>\n      <div class=\"note\" style=\"margin-top:10px\">\n        Balance validation: ${bs.validations.is_balanced ? tag(\"Balanced\", \"ok\") : tag(\"Not Balanced\", \"bad\")}\n      </div>\n    </div>\n\n    <div class=\"card\">\n      <h2>Trial Balance Snapshot</h2>\n      <div class=\"grid\">\n        <div class=\"kpi\"><div class=\"label\">Opening Balance Total</div><div class=\"val\">${money(tb.totals.opening_balance)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Period Debit</div><div class=\"val\">${money(tb.totals.debit)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Period Credit</div><div class=\"val\">${money(tb.totals.credit)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Closing Dr/Cr</div><div class=\"val\">${money(tb.totals.closing_debit)} / ${money(tb.totals.closing_credit)}</div></div>\n      </div>\n    </div>\n  </section>`;\n}\nfunction sectionJournalRegister(report) {\n    const entries = report.models.journalRegister.grouped.entries;\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const rows = entries.map((e)=>`\n    <tr data-filter-row=\"jr\" data-date=\"${esc(e.date || \"\")}\" data-text=\"${esc(`${e.journal_header_id} ${e.description}`)}\">\n      <td>${esc(e.date || \"-\")}</td>\n      <td class=\"muted\"><a class=\"auditLink\" data-audit-headers=\"${esc(e.journal_header_id)}\" href=\"#audit\">${esc(e.journal_header_id)}</a></td>\n      <td>${esc(e.description || \"\")}</td>\n      <td class=\"num\">${money(e.total_debit)}</td>\n      <td class=\"num\">${money(e.total_credit)}</td>\n      <td>${e.is_balanced ? tag(\"OK\", \"ok\") : tag(\"NOT OK\", \"bad\")}</td>\n    </tr>\n  `).join(\"\");\n    return `\n  <section class=\"section\" id=\"journal\" data-section=\"journal\" data-report=\"journal-register\" data-title=\"Journal Register\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Journal Register\", period, \"journal-register\")}\n      <div class=\"section-title\">\n        <div class=\"right\">${tag(`Entries: ${entries.length}`)}</div>\n      </div>\n      <div class=\"note\">Ringkasan per <b>Journal Header</b> (chronological, filterable).</div>\n      <div class=\"toolbar\">\n        <div class=\"right\">\n          <input id=\"jrFrom\" class=\"input\" type=\"date\" />\n          <input id=\"jrTo\" class=\"input\" type=\"date\" />\n        </div>\n        <input id=\"jrSearch\" class=\"input\" placeholder=\"Search header/description...\" />\n      </div>\n      <table class=\"audit-table\">\n        <colgroup>\n          <col class=\"date\" />\n          <col class=\"header\" />\n          <col />\n          <col class=\"debit\" />\n          <col class=\"credit\" />\n          <col class=\"status\" />\n        </colgroup>\n        <thead><tr>\n          <th>Tanggal</th><th>Journal Header ID</th><th>Deskripsi</th>\n          <th class=\"num\">Debit</th><th class=\"num\">Credit</th><th>Status</th>\n        </tr></thead>\n        <tbody>${rows || \"\"}</tbody>\n      </table>\n    </div>\n  </section>`;\n}\nfunction sectionGeneralLedger(report) {\n    const accounts = report.models.generalLedger.grouped.accounts;\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const glCards = accounts.map((acc)=>{\n        const dayRows = acc.days.map((day)=>{\n            const lines = day.entries.map((r)=>{\n                return `<tr>\n          <td>${esc(r.transaction_date || \"-\")}</td>\n          <td class=\"muted\">${esc(r.journal_header_id)}</td>\n          <td>${esc(r.description || \"\")}</td>\n          <td class=\"num\">${money(r.debit)}</td>\n          <td class=\"num\">${money(r.credit)}</td>\n          <td class=\"num\"><b>${money(r.balance)}</b></td>\n        </tr>`;\n            }).join(\"\");\n            return `\n        <tr>\n          <td colspan=\"6\" class=\"muted\"><b>${esc(day.date || \"(No Date)\")}</b> — Day Total: ${money(day.day_debit)} / ${money(day.day_credit)}</td>\n        </tr>\n        ${lines}\n      `;\n        }).join(\"\");\n        return `\n      <div class=\"card\" data-gl-account=\"${esc(acc.account.account_name)}\">\n        <div style=\"display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between\">\n          <div>\n            <div style=\"font-weight:800\">${esc(acc.account.account_name)}</div>\n            <div class=\"muted\" style=\"font-size:12px\">\n              ${esc(acc.account.account_type)} • ${esc(acc.account.account_category)} • Kelompok: ${esc(acc.account.kelompok_neraca || \"-\")}\n            </div>\n          </div>\n          <div class=\"right\">\n            ${tag(`Opening: ${money(acc.opening_balance)}`)}\n            ${tag(`Closing: ${money(acc.closing_balance)}`, \"ok\")}\n          </div>\n        </div>\n\n        <table>\n          <thead><tr>\n            <th>Tanggal</th><th>Ref</th><th>Deskripsi</th>\n            <th class=\"num\">Debit</th><th class=\"num\">Credit</th><th class=\"num\">Saldo</th>\n          </tr></thead>\n          <tbody>${dayRows || \"\"}</tbody>\n          <tfoot>\n            <tr>\n              <th colspan=\"3\" class=\"num\">Total</th>\n              <th class=\"num\">${money(acc.total_debit)}</th>\n              <th class=\"num\">${money(acc.total_credit)}</th>\n              <th class=\"num\">${money(acc.closing_balance)}</th>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    `;\n    }).join(\"\");\n    return `\n  <section class=\"section\" id=\"gl\" data-section=\"gl\" data-report=\"general-ledger\" data-title=\"General Ledger\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"General Ledger\", period, \"general-ledger\")}\n      <div class=\"toolbar\">\n        <div class=\"note\">Cari akun: ketik sebagian nama akun untuk filter ledger.</div>\n        <input id=\"glSearch\" class=\"input\" placeholder=\"Search account name...\" />\n      </div>\n    </div>\n    ${glCards || `<div class=\"card\"><div class=\"note\">No GL data.</div></div>`}\n  </section>`;\n}\nfunction sectionTrialBalance(report) {\n    const tb = report.models.trialBalance;\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const rows = tb.grouped.rows.map((r)=>`\n    <tr>\n      <td>${esc(r.account.account_name)}</td>\n      <td class=\"muted\">${esc(r.account.account_type)}</td>\n      <td class=\"muted\">${esc(r.account.kelompok_neraca || \"-\")}</td>\n      <td class=\"num\">${money(r.opening_balance)}</td>\n      <td class=\"num\">${money(r.debit)}</td>\n      <td class=\"num\">${money(r.credit)}</td>\n      <td class=\"num\">${money(r.closing_debit)}</td>\n      <td class=\"num\">${money(r.closing_credit)}</td>\n      <td class=\"num\">${esc(r.journal_lines)}</td>\n    </tr>\n  `).join(\"\");\n    return `\n  <section class=\"section\" id=\"tb\" data-section=\"tb\" data-report=\"trial-balance\" data-title=\"Trial Balance\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Trial Balance\", period, \"trial-balance\")}\n      <div class=\"note\">Closing debit/credit disusun dari saldo akhir (balances should match).</div>\n      <table>\n        <thead><tr>\n          <th>Akun</th><th>Tipe</th><th>Kelompok Neraca</th>\n          <th class=\"num\">Opening</th><th class=\"num\">Period Debit</th><th class=\"num\">Period Credit</th>\n          <th class=\"num\">Closing Debit</th><th class=\"num\">Closing Credit</th><th class=\"num\">Lines</th>\n        </tr></thead>\n        <tbody>${rows || \"\"}</tbody>\n        <tfoot>\n          <tr>\n            <th colspan=\"3\" class=\"num\">Total</th>\n            <th class=\"num\">${money(tb.totals.opening_balance)}</th>\n            <th class=\"num\">${money(tb.totals.debit)}</th>\n            <th class=\"num\">${money(tb.totals.credit)}</th>\n            <th class=\"num\">${money(tb.totals.closing_debit)}</th>\n            <th class=\"num\">${money(tb.totals.closing_credit)}</th>\n            <th></th>\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n  </section>`;\n}\nfunction sectionProfitLoss(report) {\n    const pl = report.models.profitLoss;\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const groupBlock = (group)=>{\n        const cats = group.categories.map((c)=>{\n            const accounts = c.accounts.map((a)=>`<tr><td class=\"muted\">${esc(a.account.account_name)}</td><td class=\"num\">${money(a.amount)}</td><td>${auditLink(a.trace)}</td></tr>`).join(\"\");\n            return `\n        <div class=\"card\">\n          <div class=\"section-title\">\n            <h3>${esc(c.category)}</h3>\n            <div class=\"right\">${tag(`Total: ${money(c.amount)}`)} ${auditLink(c.trace)}</div>\n          </div>\n          <table class=\"compact\"><thead><tr><th>Akun</th><th class=\"num\">Jumlah</th><th>Trace</th></tr></thead><tbody>${accounts || \"\"}</tbody></table>\n        </div>\n      `;\n        }).join(\"\");\n        return `\n      <div class=\"card\">\n        <div class=\"section-title\">\n          <h2>${group.type === \"income\" ? \"Income\" : \"Expense\"}</h2>\n          <div class=\"right\">${tag(`Total: ${money(group.total)}`)} ${auditLink(group.trace)}</div>\n        </div>\n        <div class=\"note\">Multi-level grouping: category → account.</div>\n      </div>\n      ${cats || \"\"}\n    `;\n    };\n    return `\n  <section class=\"section\" id=\"pl\" data-section=\"pl\" data-report=\"profit-loss\" data-title=\"Profit & Loss\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Profit & Loss\", period, \"profit-loss\")}\n      <div class=\"grid\">\n        <div class=\"kpi\"><div class=\"label\">Total Income</div><div class=\"val\">${money(pl.totals.income)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Total Expense</div><div class=\"val\">${money(pl.totals.expense)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Net Profit</div><div class=\"val\">${money(pl.totals.net_profit)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Margin</div><div class=\"val\">${pl.totals.income ? Math.round(pl.totals.net_profit / pl.totals.income * 100) : 0}%</div></div>\n      </div>\n    </div>\n    ${groupBlock(pl.grouped.income)}\n    ${groupBlock(pl.grouped.expense)}\n  </section>`;\n}\nfunction sectionBalanceSheet(report) {\n    const bs = report.models.balanceSheet;\n    const period = `As of: ${report.periodTo || \"-\"}`;\n    const render = (arr)=>arr.sort((a, b)=>(a.account.kelompok_neraca || \"\").localeCompare(b.account.kelompok_neraca || \"\") || a.account.account_name.localeCompare(b.account.account_name)).map((r)=>`<tr><td>${esc(r.account.kelompok_neraca || \"-\")}</td><td>${esc(r.account.account_name)}</td><td class=\"num\">${money(r.balance)}</td><td>${auditLink(r.trace)}</td></tr>`).join(\"\");\n    return `\n  <section class=\"section\" id=\"bs\" data-section=\"bs\" data-report=\"balance-sheet\" data-title=\"Balance Sheet\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Balance Sheet (As of)\", period, \"balance-sheet\")}\n      <div class=\"note\">Saldo akhir per akun dan validasi Aset = Liabilities + Equity.</div>\n      <div class=\"grid\" style=\"margin-top:10px\">\n        <div class=\"kpi\"><div class=\"label\">Assets</div><div class=\"val\">${money(bs.totals.assets)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Liabilities</div><div class=\"val\">${money(bs.totals.liabilities)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Equity</div><div class=\"val\">${money(bs.totals.equity)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Balance Diff</div><div class=\"val\">${money(bs.totals.balance_diff)}</div></div>\n      </div>\n    </div>\n\n    <div class=\"card\">\n      <h3>Aset Lancar</h3>\n      <table><thead><tr><th>Kelompok</th><th>Akun</th><th class=\"num\">Saldo</th><th>Trace</th></tr></thead><tbody>${render(bs.grouped.assets_current)}</tbody></table>\n    </div>\n\n    <div class=\"card\">\n      <h3>Aset Tidak Lancar</h3>\n      <table><thead><tr><th>Kelompok</th><th>Akun</th><th class=\"num\">Saldo</th><th>Trace</th></tr></thead><tbody>${render(bs.grouped.assets_noncurrent)}</tbody></table>\n    </div>\n\n    <div class=\"card\">\n      <h3>Aset Lainnya (Unclassified)</h3>\n      <table><thead><tr><th>Kelompok</th><th>Akun</th><th class=\"num\">Saldo</th><th>Trace</th></tr></thead><tbody>${render(bs.grouped.assets_uncategorized)}</tbody></table>\n    </div>\n\n    <div class=\"card\">\n      <h3>Liabilities Jangka Pendek</h3>\n      <table><thead><tr><th>Kelompok</th><th>Akun</th><th class=\"num\">Saldo</th><th>Trace</th></tr></thead><tbody>${render(bs.grouped.liabilities_short)}</tbody></table>\n    </div>\n\n    <div class=\"card\">\n      <h3>Liabilities Jangka Panjang</h3>\n      <table><thead><tr><th>Kelompok</th><th>Akun</th><th class=\"num\">Saldo</th><th>Trace</th></tr></thead><tbody>${render(bs.grouped.liabilities_long)}</tbody></table>\n    </div>\n\n    <div class=\"card\">\n      <h3>Liabilities Lainnya (Unclassified)</h3>\n      <table><thead><tr><th>Kelompok</th><th>Akun</th><th class=\"num\">Saldo</th><th>Trace</th></tr></thead><tbody>${render(bs.grouped.liabilities_uncategorized)}</tbody></table>\n    </div>\n\n    <div class=\"card\">\n      <h3>Equity & Retained Earnings</h3>\n      <table><thead><tr><th>Kelompok</th><th>Akun</th><th class=\"num\">Saldo</th><th>Trace</th></tr></thead><tbody>${render(bs.grouped.equity)}</tbody></table>\n    </div>\n  </section>`;\n}\nfunction sectionCashflow(report) {\n    const cf = report.models.cashflow;\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const rows = (title, arr)=>`\n    <div class=\"card\">\n      <h3>${title}</h3>\n      <table><thead><tr><th>Activity</th><th class=\"num\">Amount</th><th>Trace</th></tr></thead><tbody>${arr.map((a)=>`<tr><td>${esc(a.activity)}</td><td class=\"num\">${money(a.amount)}</td><td>${auditLink(a.trace)}</td></tr>`).join(\"\")}</tbody></table>\n    </div>\n  `;\n    return `\n  <section class=\"section\" id=\"cf\" data-section=\"cf\" data-report=\"cash-flow\" data-title=\"Cash Flow (Direct)\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Cash Flow (Direct)\", period, \"cash-flow\")}\n      <div class=\"grid\">\n        <div class=\"kpi\"><div class=\"label\">Cash Lines</div><div class=\"val\">${esc(cf.raw_rows.length)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Net Cash Change</div><div class=\"val\">${money(cf.totals.net_change)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Method</div><div class=\"val\">Direct</div></div>\n        <div class=\"kpi\"><div class=\"label\">Activities</div><div class=\"val\">${esc(cf.grouped.operating.length + cf.grouped.investing.length + cf.grouped.financing.length + cf.grouped.uncategorized.length)}</div></div>\n      </div>\n      <div class=\"note\" style=\"margin-top:10px\">\n        Metode direct mengandalkan flag <b>is_cash_account</b> dan <b>cashflow_activity</b>.\n      </div>\n    </div>\n    ${rows(\"Operating Activities\", cf.grouped.operating)}\n    ${rows(\"Investing Activities\", cf.grouped.investing)}\n    ${rows(\"Financing Activities\", cf.grouped.financing)}\n    ${rows(\"Uncategorized\", cf.grouped.uncategorized)}\n  </section>`;\n}\nfunction sectionEquityChanges(report) {\n    const eq = report.models.equityChanges;\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const rows = eq.grouped.rows.map((r)=>`\n    <tr><td>${esc(r.account.account_name)}</td><td class=\"num\">${money(r.opening_balance)}</td><td class=\"num\">${money(r.net_change)}</td><td class=\"num\">${money(r.closing_balance)}</td><td>${auditLink(r.trace)}</td></tr>\n  `).join(\"\");\n    return `\n  <section class=\"section\" id=\"equity\" data-section=\"equity\" data-report=\"equity-changes\" data-title=\"Statement of Changes in Equity\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Statement of Changes in Equity\", period, \"equity-changes\")}\n      <div class=\"grid\">\n        <div class=\"kpi\"><div class=\"label\">Opening Equity</div><div class=\"val\">${money(eq.totals.opening_equity)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Net Profit</div><div class=\"val\">${money(eq.totals.net_profit)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Equity Increase</div><div class=\"val\">${money(eq.totals.equity_increase)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Equity Decrease</div><div class=\"val\">${money(eq.totals.equity_decrease)}</div></div>\n      </div>\n      <div class=\"note\" style=\"margin-top:10px\">Closing Equity = Opening + Net Profit + Equity Movements.</div>\n      <div class=\"divider\"></div>\n      <div class=\"kpi\"><div class=\"label\">Closing Equity</div><div class=\"val\">${money(eq.totals.closing_equity)}</div></div>\n    </div>\n\n    <div class=\"card\">\n      <h3>Equity Movement by Account</h3>\n      <table><thead><tr><th>Akun</th><th class=\"num\">Opening</th><th class=\"num\">Change</th><th class=\"num\">Closing</th><th>Trace</th></tr></thead><tbody>${rows || \"\"}</tbody></table>\n    </div>\n  </section>`;\n}\nfunction sectionComparativePL(report) {\n    const cmp = report.models.comparativeProfitLoss;\n    if (!cmp) {\n        return `\n    <section class=\"section\" id=\"plc\" data-section=\"plc\" data-report=\"comparative-pl\" data-title=\"Comparative Profit & Loss\" data-period=\"N/A\">\n      <div class=\"card\">\n        ${sectionHeaderHTML(\"Comparative Profit & Loss\", \"N/A\", \"comparative-pl\")}\n        <div class=\"note\">Previous period not available.</div>\n      </div>\n    </section>`;\n    }\n    const renderSection = (section)=>{\n        const rows = section.rows.map((r)=>`\n      <tr>\n        <td>${esc(r.label)}</td>\n        <td class=\"num\">${money(r.current)}</td>\n        <td class=\"num\">${money(r.previous)}</td>\n        <td class=\"num\">${money(r.variance)}</td>\n        <td class=\"num\">${r.variance_pct === null ? \"-\" : Math.round(r.variance_pct * 1000) / 10 + \"%\"}</td>\n      </tr>\n    `).join(\"\");\n        return `\n      <div class=\"card\">\n        <div class=\"section-title\">\n          <h3>${esc(section.label)}</h3>\n          <div class=\"right\">${tag(section.total.label)}</div>\n        </div>\n        <table><thead><tr><th>Category</th><th class=\"num\">Current</th><th class=\"num\">Previous</th><th class=\"num\">Variance</th><th class=\"num\">Var %</th></tr></thead>\n          <tbody>${rows}</tbody>\n          <tfoot><tr><th>Total</th><th class=\"num\">${money(section.total.current)}</th><th class=\"num\">${money(section.total.previous)}</th><th class=\"num\">${money(section.total.variance)}</th><th class=\"num\">${section.total.variance_pct === null ? \"-\" : Math.round(section.total.variance_pct * 1000) / 10 + \"%\"}</th></tr></tfoot>\n        </table>\n      </div>\n    `;\n    };\n    return `\n  <section class=\"section\" id=\"plc\" data-section=\"plc\" data-report=\"comparative-pl\" data-title=\"Comparative Profit & Loss\" data-period=\"${esc(cmp.current_period.from || \"-\")} → ${esc(cmp.current_period.to || \"-\")}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Comparative Profit & Loss\", `Current: ${cmp.current_period.from || \"-\"} → ${cmp.current_period.to || \"-\"}`, \"comparative-pl\")}\n      <div class=\"note\">Current period: ${esc(cmp.current_period.from || \"-\")} → ${esc(cmp.current_period.to || \"-\")} | Previous: ${esc(cmp.previous_period.from || \"-\")} → ${esc(cmp.previous_period.to || \"-\")}</div>\n    </div>\n    ${renderSection(cmp.income)}\n    ${renderSection(cmp.expense)}\n    <div class=\"card\">\n      <h3>Net Profit</h3>\n      <table><thead><tr><th></th><th class=\"num\">Current</th><th class=\"num\">Previous</th><th class=\"num\">Variance</th><th class=\"num\">Var %</th></tr></thead>\n      <tbody><tr><td>Net Profit</td><td class=\"num\">${money(cmp.net_profit.current)}</td><td class=\"num\">${money(cmp.net_profit.previous)}</td><td class=\"num\">${money(cmp.net_profit.variance)}</td><td class=\"num\">${cmp.net_profit.variance_pct === null ? \"-\" : Math.round(cmp.net_profit.variance_pct * 1000) / 10 + \"%\"}</td></tr></tbody></table>\n    </div>\n  </section>`;\n}\nfunction sectionComparativeBS(report) {\n    const cmp = report.models.comparativeBalanceSheet;\n    if (!cmp) {\n        return `\n    <section class=\"section\" id=\"bsc\" data-section=\"bsc\" data-report=\"comparative-bs\" data-title=\"Comparative Balance Sheet\" data-period=\"N/A\">\n      <div class=\"card\">\n        ${sectionHeaderHTML(\"Comparative Balance Sheet\", \"N/A\", \"comparative-bs\")}\n        <div class=\"note\">Previous period not available.</div>\n      </div>\n    </section>`;\n    }\n    const renderSection = (section)=>{\n        const rows = section.rows.map((r)=>`\n      <tr>\n        <td>${esc(r.label)}</td>\n        <td class=\"num\">${money(r.current)}</td>\n        <td class=\"num\">${money(r.previous)}</td>\n        <td class=\"num\">${money(r.variance)}</td>\n        <td class=\"num\">${r.variance_pct === null ? \"-\" : Math.round(r.variance_pct * 1000) / 10 + \"%\"}</td>\n      </tr>\n    `).join(\"\");\n        return `\n      <div class=\"card\">\n        <h3>${esc(section.label)}</h3>\n        <table><thead><tr><th>Account</th><th class=\"num\">Current</th><th class=\"num\">Previous</th><th class=\"num\">Variance</th><th class=\"num\">Var %</th></tr></thead>\n          <tbody>${rows}</tbody>\n          <tfoot><tr><th>Total</th><th class=\"num\">${money(section.total.current)}</th><th class=\"num\">${money(section.total.previous)}</th><th class=\"num\">${money(section.total.variance)}</th><th class=\"num\">${section.total.variance_pct === null ? \"-\" : Math.round(section.total.variance_pct * 1000) / 10 + \"%\"}</th></tr></tfoot>\n        </table>\n      </div>\n    `;\n    };\n    return `\n  <section class=\"section\" id=\"bsc\" data-section=\"bsc\" data-report=\"comparative-bs\" data-title=\"Comparative Balance Sheet\" data-period=\"${esc(cmp.current_as_of || \"-\")}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Comparative Balance Sheet\", `As of: ${cmp.current_as_of || \"-\"}`, \"comparative-bs\")}\n      <div class=\"note\">As-of current: ${esc(cmp.current_as_of || \"-\")} | As-of previous: ${esc(cmp.previous_as_of || \"-\")}</div>\n    </div>\n    ${renderSection(cmp.assets)}\n    ${renderSection(cmp.liabilities)}\n    ${renderSection(cmp.equity)}\n    <div class=\"card\">\n      <h3>Totals</h3>\n      <table><thead><tr><th></th><th class=\"num\">Current</th><th class=\"num\">Previous</th><th class=\"num\">Variance</th><th class=\"num\">Var %</th></tr></thead>\n      <tbody>\n        <tr><td>${esc(cmp.totals.assets.label)}</td><td class=\"num\">${money(cmp.totals.assets.current)}</td><td class=\"num\">${money(cmp.totals.assets.previous)}</td><td class=\"num\">${money(cmp.totals.assets.variance)}</td><td class=\"num\">${cmp.totals.assets.variance_pct === null ? \"-\" : Math.round(cmp.totals.assets.variance_pct * 1000) / 10 + \"%\"}</td></tr>\n        <tr><td>${esc(cmp.totals.liabilities.label)}</td><td class=\"num\">${money(cmp.totals.liabilities.current)}</td><td class=\"num\">${money(cmp.totals.liabilities.previous)}</td><td class=\"num\">${money(cmp.totals.liabilities.variance)}</td><td class=\"num\">${cmp.totals.liabilities.variance_pct === null ? \"-\" : Math.round(cmp.totals.liabilities.variance_pct * 1000) / 10 + \"%\"}</td></tr>\n        <tr><td>${esc(cmp.totals.equity.label)}</td><td class=\"num\">${money(cmp.totals.equity.current)}</td><td class=\"num\">${money(cmp.totals.equity.previous)}</td><td class=\"num\">${money(cmp.totals.equity.variance)}</td><td class=\"num\">${cmp.totals.equity.variance_pct === null ? \"-\" : Math.round(cmp.totals.equity.variance_pct * 1000) / 10 + \"%\"}</td></tr>\n        <tr><td>${esc(cmp.totals.liabilities_plus_equity.label)}</td><td class=\"num\">${money(cmp.totals.liabilities_plus_equity.current)}</td><td class=\"num\">${money(cmp.totals.liabilities_plus_equity.previous)}</td><td class=\"num\">${money(cmp.totals.liabilities_plus_equity.variance)}</td><td class=\"num\">${cmp.totals.liabilities_plus_equity.variance_pct === null ? \"-\" : Math.round(cmp.totals.liabilities_plus_equity.variance_pct * 1000) / 10 + \"%\"}</td></tr>\n      </tbody>\n      </table>\n    </div>\n  </section>`;\n}\nfunction sectionAccountMovement(report) {\n    const mv = report.models.accountMovement;\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const rows = mv.grouped.rows.map((r)=>`\n    <tr>\n      <td>${esc(r.account.account_name)}</td>\n      <td class=\"muted\">${esc(r.account.account_type)}</td>\n      <td class=\"num\">${money(r.opening_balance)}</td>\n      <td class=\"num\">${money(r.debit)}</td>\n      <td class=\"num\">${money(r.credit)}</td>\n      <td class=\"num\">${money(r.net_movement)}</td>\n      <td class=\"num\">${money(r.closing_balance)}</td>\n      <td>${auditLink(r.trace)}</td>\n    </tr>\n  `).join(\"\");\n    return `\n  <section class=\"section\" id=\"movement\" data-section=\"movement\" data-report=\"account-movement\" data-title=\"Account Movement Summary\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Account Movement Summary\", period, \"account-movement\")}\n      <div class=\"note\">Opening + period movement = closing. Useful for audit readiness.</div>\n      <table>\n        <thead><tr>\n          <th>Akun</th><th>Tipe</th><th class=\"num\">Opening</th><th class=\"num\">Debit</th><th class=\"num\">Credit</th><th class=\"num\">Net</th><th class=\"num\">Closing</th><th>Trace</th>\n        </tr></thead>\n        <tbody>${rows || \"\"}</tbody>\n        <tfoot>\n          <tr>\n            <th colspan=\"2\" class=\"num\">Total</th>\n            <th class=\"num\">${money(mv.totals.opening_balance)}</th>\n            <th class=\"num\">${money(mv.totals.debit)}</th>\n            <th class=\"num\">${money(mv.totals.credit)}</th>\n            <th class=\"num\">${money(mv.totals.closing_balance - mv.totals.opening_balance)}</th>\n            <th class=\"num\">${money(mv.totals.closing_balance)}</th>\n            <th></th>\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n  </section>`;\n}\nfunction sectionAuditTrail(report) {\n    const entries = report.models.auditTrail.grouped.entries;\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const rows = entries.map((e)=>`\n    <tr data-filter-row=\"audit\" data-date=\"${esc(e.date || \"\")}\" data-text=\"${esc(`${e.journal_header_id} ${e.description}`)}\">\n      <td>${esc(e.date || \"-\")}</td>\n      <td class=\"muted\">${esc(e.journal_header_id)}</td>\n      <td>${esc(e.description || \"\")}</td>\n      <td class=\"num\">${money(e.total_debit)}</td>\n      <td class=\"num\">${money(e.total_credit)}</td>\n      <td>${e.is_balanced ? tag(\"OK\", \"ok\") : tag(\"NOT OK\", \"bad\")}</td>\n    </tr>\n    <tr data-filter-row=\"audit\" data-date=\"${esc(e.date || \"\")}\" data-text=\"${esc(`${e.journal_header_id} ${e.description}`)}\">\n      <td colspan=\"6\" class=\"audit-detail-cell\">\n        <div class=\"audit-detail-wrap\">\n          <table class=\"audit-detail\">\n            <colgroup>\n              <col style=\"width:120px\" />\n              <col style=\"width:200px\" />\n              <col />\n              <col style=\"width:140px\" />\n              <col style=\"width:140px\" />\n              <col style=\"width:90px\" />\n            </colgroup>\n            <thead>\n              <tr>\n                <th>Tanggal</th><th>Account</th><th>Description</th><th class=\"num\">Debit</th><th class=\"num\">Credit</th><th>Status</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${e.lines.map((l)=>`\n                <tr>\n                  <td>${esc(l.transaction_date || \"-\")}</td>\n                  <td>${esc(l.account_name)}</td>\n                  <td>${esc(l.description || \"\")}</td>\n                  <td class=\"num\">${money(l.debit)}</td>\n                  <td class=\"num\">${money(l.credit)}</td>\n                  <td>${esc(l.status || \"-\")}</td>\n                </tr>\n              `).join(\"\")}\n            </tbody>\n          </table>\n        </div>\n      </td>\n    </tr>\n  `).join(\"\");\n    return `\n  <section class=\"section\" id=\"audit\" data-section=\"audit\" data-report=\"audit-trail\" data-title=\"Audit Trail\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Audit Trail\", period, \"audit-trail\")}\n      <div class=\"section-title\">\n        <div class=\"right\">${tag(`Entries: ${entries.length}`)}</div>\n      </div>\n      <div class=\"note\">Detail journal per header ID (drill-down lines).</div>\n      <div class=\"toolbar\">\n        <div class=\"right\">\n          <input id=\"auditFrom\" class=\"input\" type=\"date\" />\n          <input id=\"auditTo\" class=\"input\" type=\"date\" />\n        </div>\n        <input id=\"auditSearch\" class=\"input\" placeholder=\"Search header/description...\" />\n      </div>\n      <table>\n        <thead><tr>\n          <th>Tanggal</th><th>Journal Header ID</th><th>Deskripsi</th>\n          <th class=\"num\">Debit</th><th class=\"num\">Credit</th><th>Status</th>\n        </tr></thead>\n        <tbody>${rows || \"\"}</tbody>\n      </table>\n    </div>\n  </section>`;\n}\nfunction sectionAnalytics(report) {\n    const a = report.models.activitySummary;\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const byType = a.by_type.map((x)=>`\n    <tr><td>${esc(x.type)}</td><td class=\"num\">${money(x.debit)}</td><td class=\"num\">${money(x.credit)}</td><td class=\"num\">${esc(x.lines)}</td></tr>\n  `).join(\"\");\n    const byCat = a.by_category.slice(0, 50).map((x)=>`\n    <tr><td>${esc(x.category)}</td><td class=\"num\">${money(x.debit)}</td><td class=\"num\">${money(x.credit)}</td><td class=\"num\">${esc(x.lines)}</td></tr>\n  `).join(\"\");\n    const top10 = a.top10_lines.map((x)=>`\n    <tr><td>${esc(x.transaction_date || \"-\")}</td><td>${esc(x.account_name)}</td><td class=\"muted\">${esc(x.account_type)}</td><td>${esc(x.description)}</td><td class=\"num\">${money(Math.max(x.debit, x.credit))}</td></tr>\n  `).join(\"\");\n    return `\n  <section class=\"section\" id=\"analytics\" data-section=\"analytics\" data-report=\"analytics\" data-title=\"Enterprise Analytics\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Enterprise Analytics\", period, \"analytics\")}\n      <div class=\"grid\">\n        <div class=\"kpi\"><div class=\"label\">Unique Accounts</div><div class=\"val\">${esc(a.unique_accounts)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Top Transactions Listed</div><div class=\"val\">10</div></div>\n        <div class=\"kpi\"><div class=\"label\">Category Rows Shown</div><div class=\"val\">${Math.min(50, report.models.activitySummary.by_category.length)}</div></div>\n        <div class=\"kpi\"><div class=\"label\">Notes</div><div class=\"val\">Audit-ready</div></div>\n      </div>\n    </div>\n\n    <div class=\"card\">\n      <h3>By Account Type</h3>\n      <table><thead><tr><th>Type</th><th class=\"num\">Debit</th><th class=\"num\">Credit</th><th class=\"num\">Lines</th></tr></thead><tbody>${byType}</tbody></table>\n    </div>\n\n    <div class=\"card\">\n      <h3>By Category (Top 50)</h3>\n      <table><thead><tr><th>Category</th><th class=\"num\">Debit</th><th class=\"num\">Credit</th><th class=\"num\">Lines</th></tr></thead><tbody>${byCat}</tbody></table>\n    </div>\n\n    <div class=\"card\">\n      <h3>Top 10 Largest Journal Lines</h3>\n      <table><thead><tr><th>Date</th><th>Account</th><th>Type</th><th>Description</th><th class=\"num\">Magnitude</th></tr></thead><tbody>${top10}</tbody></table>\n    </div>\n  </section>`;\n}\nfunction sectionRawData(report) {\n    const period = `Period: ${report.periodFrom || \"-\"} → ${report.periodTo || \"-\"}`;\n    const rows = report.journals.map((r, idx)=>`\n    <tr data-raw-row=\"${idx}\">\n      <td>${esc(r.transaction_date || \"-\")}</td>\n      <td class=\"muted\">${esc(r.journal_header_id)}</td>\n      <td>${esc(r.account_name)}</td>\n      <td class=\"num\">${money(r.debit)}</td>\n      <td class=\"num\">${money(r.credit)}</td>\n      <td>${esc(r.is_cash_account ? \"true\" : \"false\")}</td>\n      <td>${esc(r.cashflow_activity || \"\")}</td>\n      <td>${esc(r.description || \"\")}</td>\n    </tr>\n  `).join(\"\");\n    return `\n  <section class=\"section\" id=\"data\" data-section=\"data\" data-report=\"raw-data\" data-title=\"Raw Data\" data-period=\"${esc(period)}\">\n    <div class=\"card\">\n      ${sectionHeaderHTML(\"Raw Data\", period, \"raw-data\")}\n      <div class=\"note\">Data mentah jurnal untuk kebutuhan audit dan verifikasi internal. Gunakan pagination untuk melihat data secara bertahap.</div>\n      <div class=\"toolbar\">\n        <div class=\"pager\">\n          <button id=\"rawPrev\" class=\"btn\" type=\"button\">Prev</button>\n          <button id=\"rawNext\" class=\"btn\" type=\"button\">Next</button>\n          <span id=\"rawPageInfo\" class=\"count\">Page 1 / 1</span>\n        </div>\n        <div id=\"rawCount\" class=\"count\">0 rows</div>\n      </div>\n      <table>\n        <thead><tr>\n          <th>Date</th><th>Header</th><th>Account</th>\n          <th class=\"num\">Debit</th><th class=\"num\">Credit</th>\n          <th>is_cash</th><th>activity</th><th>Description</th>\n        </tr></thead>\n        <tbody>${rows || \"\"}</tbody>\n      </table>\n    </div>\n  </section>`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7Ozs0SUFLTCxFQUFFRyxNQUFNOzs7Ozt3SUFLWixFQUFFRSxNQUFNOztZQUVwSSxDQUFDO0FBQ2I7QUFFQSxTQUFTM0gsZUFBZWpDLE1BQW9CO0lBQzFDLE1BQU1WLFNBQVMsQ0FBQyxRQUFRLEVBQUVVLE9BQU9LLFVBQVUsSUFBSSxJQUFJLEdBQUcsRUFBRUwsT0FBT00sUUFBUSxJQUFJLElBQUksQ0FBQztJQUNoRixNQUFNMkQsT0FBT2pFLE9BQU9pSyxRQUFRLENBQUNoSixHQUFHLENBQUMsQ0FBQytELEdBQUdrRixNQUFRLENBQUM7c0JBQzFCLEVBQUVBLElBQUk7VUFDbEIsRUFBRTFMLElBQUl3RyxFQUFFQyxnQkFBZ0IsSUFBSSxLQUFLO3dCQUNuQixFQUFFekcsSUFBSXdHLEVBQUVaLGlCQUFpQixFQUFFO1VBQ3pDLEVBQUU1RixJQUFJd0csRUFBRU0sWUFBWSxFQUFFO3NCQUNWLEVBQUV6RyxNQUFNbUcsRUFBRXRCLEtBQUssRUFBRTtzQkFDakIsRUFBRTdFLE1BQU1tRyxFQUFFckIsTUFBTSxFQUFFO1VBQzlCLEVBQUVuRixJQUFJd0csRUFBRW1GLGVBQWUsR0FBRyxTQUFTLFNBQVM7VUFDNUMsRUFBRTNMLElBQUl3RyxFQUFFb0YsaUJBQWlCLElBQUksSUFBSTtVQUNqQyxFQUFFNUwsSUFBSXdHLEVBQUVYLFdBQVcsSUFBSSxJQUFJOztFQUVuQyxDQUFDLEVBQUV4RSxJQUFJLENBQUM7SUFFUixPQUFPLENBQUM7bUhBQ3lHLEVBQUVyQixJQUFJYyxRQUFROztNQUUzSCxFQUFFRixrQkFBa0IsWUFBWUUsUUFBUSxZQUFZOzs7Ozs7Ozs7Ozs7Ozs7O2VBZ0IzQyxFQUFFMkUsUUFBUSxHQUFHOzs7WUFHaEIsQ0FBQztBQUNiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3B0aXZ1ei1yZXBvcnQtZW5naW5lLy4vbGliL2h0bWwudHM/OWI1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFJlcG9ydFJlc3VsdCwgVHJhY2VSZWYgfSBmcm9tIFwiLi9yZXBvcnQvdHlwZXNcIjtcbmltcG9ydCB7IGZvcm1hdElEUiB9IGZyb20gXCIuL3JlcG9ydC91dGlsc1wiO1xuXG5jb25zdCBCUkFORCA9IHtcbiAgcHJpbWFyeTogXCIjMEI0RjZDXCIsXG4gIGFjY2VudDogXCIjRjJDOTRDXCIsXG4gIHRleHQ6IFwiIzBmMTcyYVwiLFxuICBtdXRlZDogXCIjNjQ3NDhiXCIsXG4gIGxpbmU6IFwiI2U1ZTdlYlwiLFxuICBzb2Z0OiBcIiNmNmY4ZmJcIixcbiAgY2FyZDogXCIjZmZmZmZmXCIsXG59O1xuXG5mdW5jdGlvbiBlc2MoczogdW5rbm93bik6IHN0cmluZyB7XG4gIHJldHVybiBTdHJpbmcocyA/PyBcIlwiKS5yZXBsYWNlKC9bJjw+XCInXS9nLCAoYykgPT4gKHtcbiAgICBcIiZcIjogXCImYW1wO1wiLFxuICAgIFwiPFwiOiBcIiZsdDtcIixcbiAgICBcIj5cIjogXCImZ3Q7XCIsXG4gICAgJ1wiJzogXCImcXVvdDtcIixcbiAgICBcIidcIjogXCImIzM5O1wiLFxuICB9W2NdIGFzIHN0cmluZykpO1xufVxuXG5mdW5jdGlvbiBtb25leShuOiBudW1iZXIpOiBzdHJpbmcgeyByZXR1cm4gZm9ybWF0SURSKG4pOyB9XG5cbmZ1bmN0aW9uIHRhZyhsYWJlbDogc3RyaW5nLCB0b25lID0gXCJtdXRlZFwiKTogc3RyaW5nIHtcbiAgY29uc3QgYmcgPSB0b25lID09PSBcIm9rXCIgPyBcInJnYmEoMTYsMTg1LDEyOSwuMTIpXCIgOiB0b25lID09PSBcImJhZFwiID8gXCJyZ2JhKDIzOSw2OCw2OCwuMTIpXCIgOiBcInJnYmEoMTQ4LDE2MywxODQsLjE4KVwiO1xuICBjb25zdCBmZyA9IHRvbmUgPT09IFwib2tcIiA/IFwiIzA2NWY0NlwiIDogdG9uZSA9PT0gXCJiYWRcIiA/IFwiIzdmMWQxZFwiIDogQlJBTkQubXV0ZWQ7XG4gIHJldHVybiBgPHNwYW4gY2xhc3M9XCJ0YWdcIiBzdHlsZT1cImJhY2tncm91bmQ6JHtiZ307Y29sb3I6JHtmZ31cIj4ke2VzYyhsYWJlbCl9PC9zcGFuPmA7XG59XG5cbmZ1bmN0aW9uIHNlY3Rpb25IZWFkZXJIVE1MKHRpdGxlOiBzdHJpbmcsIHBlcmlvZDogc3RyaW5nLCByZXBvcnRJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbkhlYWRlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cInRpdGxlV3JhcFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGl0bGVcIj4ke2VzYyh0aXRsZSl9PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwZXJpb2RcIj4ke2VzYyhwZXJpb2QpfTwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIHByaW1hcnlcIiBkYXRhLXByaW50LWFjdGlvbj1cIiR7ZXNjKHJlcG9ydElkKX1cIj5QcmludCBQREY8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgYDtcbn1cblxuZnVuY3Rpb24gYXVkaXRMaW5rKHRyYWNlOiBUcmFjZVJlZiB8IG51bGwsIGxhYmVsID0gXCJUcmFjZVwiKTogc3RyaW5nIHtcbiAgaWYgKCF0cmFjZSB8fCB0cmFjZS5oZWFkZXJfaWRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IGhlYWRlcnMgPSB0cmFjZS5oZWFkZXJfaWRzLmpvaW4oXCIsXCIpO1xuICBjb25zdCBjb3VudCA9IHRyYWNlLmhlYWRlcl9pZHMubGVuZ3RoO1xuICByZXR1cm4gYDxhIGhyZWY9XCIjYXVkaXRcIiBjbGFzcz1cImF1ZGl0TGlua1wiIGRhdGEtYXVkaXQtaGVhZGVycz1cIiR7ZXNjKGhlYWRlcnMpfVwiPiR7ZXNjKGxhYmVsKX0gKCR7Y291bnR9KTwvYT5gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyVGFiYmVkSFRNTChyZXBvcnQ6IFJlcG9ydFJlc3VsdCk6IHN0cmluZyB7XG4gIGNvbnN0IHsgY29tcGFueSwgbG9nbywgYWRkcmVzcywgY29udGFjdCwgcGVyaW9kRnJvbSwgcGVyaW9kVG8sIGNoZWNrcywgbW9kZWxzIH0gPSByZXBvcnQ7XG4gIGNvbnN0IGdlbkF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gIGNvbnN0IHRhYnMgPSBbXG4gICAgeyBpZDogXCJkYXNoYm9hcmRcIiwgbGFiZWw6IFwiRGFzaGJvYXJkXCIgfSxcbiAgICB7IGlkOiBcImpvdXJuYWxcIiwgbGFiZWw6IFwiSm91cm5hbCBSZWdpc3RlclwiIH0sXG4gICAgeyBpZDogXCJnbFwiLCBsYWJlbDogXCJHZW5lcmFsIExlZGdlclwiIH0sXG4gICAgeyBpZDogXCJ0YlwiLCBsYWJlbDogXCJUcmlhbCBCYWxhbmNlXCIgfSxcbiAgICB7IGlkOiBcInBsXCIsIGxhYmVsOiBcIlByb2ZpdCAmIExvc3NcIiB9LFxuICAgIHsgaWQ6IFwiYnNcIiwgbGFiZWw6IFwiQmFsYW5jZSBTaGVldFwiIH0sXG4gICAgeyBpZDogXCJjZlwiLCBsYWJlbDogXCJDYXNoIEZsb3dcIiB9LFxuICAgIHsgaWQ6IFwiZXF1aXR5XCIsIGxhYmVsOiBcIkNoYW5nZXMgaW4gRXF1aXR5XCIgfSxcbiAgICB7IGlkOiBcInBsY1wiLCBsYWJlbDogXCJDb21wYXJhdGl2ZSBQJkxcIiB9LFxuICAgIHsgaWQ6IFwiYnNjXCIsIGxhYmVsOiBcIkNvbXBhcmF0aXZlIEJTXCIgfSxcbiAgICB7IGlkOiBcIm1vdmVtZW50XCIsIGxhYmVsOiBcIkFjY291bnQgTW92ZW1lbnRcIiB9LFxuICAgIHsgaWQ6IFwiYXVkaXRcIiwgbGFiZWw6IFwiQXVkaXQgVHJhaWxcIiB9LFxuICAgIHsgaWQ6IFwiYW5hbHl0aWNzXCIsIGxhYmVsOiBcIkFuYWx5dGljc1wiIH0sXG4gICAgeyBpZDogXCJkYXRhXCIsIGxhYmVsOiBcIlJhdyBEYXRhXCIgfSxcbiAgXTtcblxuICBjb25zdCBoZWFkZXIgPSBgXG4gICAgPGRpdiBjbGFzcz1cInRvcGJhclwiPlxuICAgICAgPGRpdiBjbGFzcz1cImJyYW5kXCI+XG4gICAgICAgICR7bG9nbyA/IGA8aW1nIGNsYXNzPVwibG9nb1wiIHNyYz1cIiR7ZXNjKGxvZ28pfVwiIGFsdD1cImxvZ29cIiAvPmAgOiBgPGRpdiBjbGFzcz1cImxvZ29QaFwiPjwvZGl2PmB9XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRpdGxlXCI+JHtlc2MoY29tcGFueSl9PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInN1YiBtdXRlZFwiPiR7ZXNjKGFkZHJlc3MpfSAke2FkZHJlc3MgJiYgY29udGFjdCA/IFwi4oCiXCIgOiBcIlwifSAke2VzYyhjb250YWN0KX08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtZXRhXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwaWxsXCI+PHNwYW4gY2xhc3M9XCJtdXRlZFwiPlBlcmlvZGU8L3NwYW4+PGI+JHtlc2MocGVyaW9kRnJvbSB8fCBcIi1cIil9PC9iPiDihpIgPGI+JHtlc2MocGVyaW9kVG8gfHwgXCItXCIpfTwvYj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBpbGxcIj48c3BhbiBjbGFzcz1cIm11dGVkXCI+R2VuZXJhdGVkPC9zcGFuPjxiPiR7ZXNjKGdlbkF0LnNsaWNlKDAsIDE5KS5yZXBsYWNlKFwiVFwiLCBcIiBcIikpfVo8L2I+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5gO1xuXG4gIGNvbnN0IHRhYnNIdG1sID0gdGFicy5tYXAoKHQpID0+IGA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInRhYlwiIGRhdGEtdGFiPVwiJHt0LmlkfVwiPiR7ZXNjKHQubGFiZWwpfTwvYnV0dG9uPmApLmpvaW4oXCJcIik7XG5cbiAgY29uc3QgYm9keSA9IGBcbiAgICAke2hlYWRlcn1cbiAgICA8ZGl2IGNsYXNzPVwidGFic1wiPiR7dGFic0h0bWx9PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJwcmludEhlYWRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJpbnRCcmFuZFwiPiR7ZXNjKGNvbXBhbnkpfTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJpbnRUaXRsZVwiIGlkPVwicHJpbnRUaXRsZVwiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJpbnRQZXJpb2RcIiBpZD1cInByaW50UGVyaW9kXCI+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJwcmludEZvb3RlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJpbnRNZXRhXCI+R2VuZXJhdGVkICR7ZXNjKGdlbkF0LnNsaWNlKDAsIDE5KS5yZXBsYWNlKFwiVFwiLCBcIiBcIikpfVo8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBhZ2VOdW1cIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgJHtzZWN0aW9uRGFzaGJvYXJkKHJlcG9ydCl9XG4gICAgICAke3NlY3Rpb25Kb3VybmFsUmVnaXN0ZXIocmVwb3J0KX1cbiAgICAgICR7c2VjdGlvbkdlbmVyYWxMZWRnZXIocmVwb3J0KX1cbiAgICAgICR7c2VjdGlvblRyaWFsQmFsYW5jZShyZXBvcnQpfVxuICAgICAgJHtzZWN0aW9uUHJvZml0TG9zcyhyZXBvcnQpfVxuICAgICAgJHtzZWN0aW9uQmFsYW5jZVNoZWV0KHJlcG9ydCl9XG4gICAgICAke3NlY3Rpb25DYXNoZmxvdyhyZXBvcnQpfVxuICAgICAgJHtzZWN0aW9uRXF1aXR5Q2hhbmdlcyhyZXBvcnQpfVxuICAgICAgJHtzZWN0aW9uQ29tcGFyYXRpdmVQTChyZXBvcnQpfVxuICAgICAgJHtzZWN0aW9uQ29tcGFyYXRpdmVCUyhyZXBvcnQpfVxuICAgICAgJHtzZWN0aW9uQWNjb3VudE1vdmVtZW50KHJlcG9ydCl9XG4gICAgICAke3NlY3Rpb25BdWRpdFRyYWlsKHJlcG9ydCl9XG4gICAgICAke3NlY3Rpb25BbmFseXRpY3MocmVwb3J0KX1cbiAgICAgICR7c2VjdGlvblJhd0RhdGEocmVwb3J0KX1cbiAgICA8L2Rpdj5cbiAgYDtcblxuICByZXR1cm4gYDwhZG9jdHlwZSBodG1sPlxuPGh0bWwgbGFuZz1cImlkXCI+XG48aGVhZD5cbjxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiIC8+XG48bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MVwiIC8+XG48dGl0bGU+QWNjb3VudGluZyBSZXBvcnRzIHwgJHtlc2MoY29tcGFueSl9PC90aXRsZT5cbjxsaW5rIHJlbD1cInByZWNvbm5lY3RcIiBocmVmPVwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbVwiPlxuPGxpbmsgcmVsPVwicHJlY29ubmVjdFwiIGhyZWY9XCJodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tXCIgY3Jvc3NvcmlnaW4+XG48bGluayBocmVmPVwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Tb3VyY2UrU2FucyszOndnaHRAMzAwOzQwMDs1MDA7NjAwOzcwMDs4MDAmZGlzcGxheT1zd2FwXCIgcmVsPVwic3R5bGVzaGVldFwiPlxuPHN0eWxlPlxuICA6cm9vdHtcbiAgICAtLWJyYW5kOiR7QlJBTkQucHJpbWFyeX07XG4gICAgLS1hY2NlbnQ6JHtCUkFORC5hY2NlbnR9O1xuICAgIC0tdGV4dDoke0JSQU5ELnRleHR9O1xuICAgIC0tbXV0ZWQ6JHtCUkFORC5tdXRlZH07XG4gICAgLS1saW5lOiR7QlJBTkQubGluZX07XG4gICAgLS1zb2Z0OiR7QlJBTkQuc29mdH07XG4gICAgLS1jYXJkOiR7QlJBTkQuY2FyZH07XG4gIH1cbiAgKntib3gtc2l6aW5nOmJvcmRlci1ib3h9XG4gIGJvZHl7bWFyZ2luOjA7Zm9udC1mYW1pbHk6XCJTb3VyY2UgU2FucyAzXCIsc3lzdGVtLXVpLFNlZ29lIFVJLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6dmFyKC0tdGV4dCk7YmFja2dyb3VuZDp2YXIoLS1zb2Z0KX1cbiAgLnRvcGJhcntkaXNwbGF5OmZsZXg7Z2FwOjE0cHg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjE2cHggMTZweCAxMHB4O2JhY2tncm91bmQ6I2ZmZjtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1saW5lKTtwb3NpdGlvbjpzdGlja3k7dG9wOjA7ei1pbmRleDo1fVxuICAuYnJhbmR7ZGlzcGxheTpmbGV4O2dhcDoxMnB4O2FsaWduLWl0ZW1zOmNlbnRlcjttaW4td2lkdGg6MjYwcHh9XG4gIC5sb2dve3dpZHRoOjQ0cHg7aGVpZ2h0OjQ0cHg7Ym9yZGVyLXJhZGl1czoxMHB4O29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1saW5lKX1cbiAgLmxvZ29QaHt3aWR0aDo0NHB4O2hlaWdodDo0NHB4O2JvcmRlci1yYWRpdXM6MTBweDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHJnYmEoMTEsNzksMTA4LC4yKSwgcmdiYSgyNDIsMjAxLDc2LC4yKSk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1saW5lKX1cbiAgLnRpdGxle2ZvbnQtd2VpZ2h0OjgwMDtmb250LXNpemU6MTZweH1cbiAgLnN1Yntmb250LXNpemU6MTJweDttYXgtd2lkdGg6NTIwcHh9XG4gIC5tdXRlZHtjb2xvcjp2YXIoLS1tdXRlZCl9XG4gIC5tZXRhe2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2ZsZXgtd3JhcDp3cmFwO2p1c3RpZnktY29udGVudDpmbGV4LWVuZH1cbiAgLnBpbGx7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1saW5lKTtiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czo5OTlweDtwYWRkaW5nOjdweCAxMHB4O2ZvbnQtc2l6ZToxMnB4O2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlcn1cbiAgLnRhYnN7ZGlzcGxheTpmbGV4O2dhcDo4cHg7b3ZlcmZsb3c6YXV0bztwYWRkaW5nOjEwcHggMTJweDtiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tbGluZSk7cG9zaXRpb246c3RpY2t5O3RvcDo3N3B4O3otaW5kZXg6NH1cbiAgLnRhYntib3JkZXI6MXB4IHNvbGlkIHZhcigtLWxpbmUpO2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjk5OXB4O3BhZGRpbmc6OHB4IDEycHg7Zm9udC1zaXplOjEycHg7Y3Vyc29yOnBvaW50ZXI7d2hpdGUtc3BhY2U6bm93cmFwO3RleHQtZGVjb3JhdGlvbjpub25lO2NvbG9yOmluaGVyaXQ7ZGlzcGxheTppbmxpbmUtYmxvY2s7dHJhbnNpdGlvbjphbGwgLjE1cyBlYXNlfVxuICAudGFiOmhvdmVye2JvcmRlci1jb2xvcjpyZ2JhKDExLDc5LDEwOCwuMzUpO2JhY2tncm91bmQ6cmdiYSgxMSw3OSwxMDgsLjA4KTtjb2xvcjp2YXIoLS1icmFuZCl9XG4gIC50YWIuYWN0aXZle2JvcmRlci1jb2xvcjpyZ2JhKDExLDc5LDEwOCwuMzUpO2JhY2tncm91bmQ6cmdiYSgxMSw3OSwxMDgsLjEyKTtjb2xvcjp2YXIoLS1icmFuZCk7Zm9udC13ZWlnaHQ6NzAwfVxuICAuY29udGVudHtwYWRkaW5nOjE0cHggMTJweCA4MHB4O21heC13aWR0aDoxMzAwcHg7bWFyZ2luOjAgYXV0b31cbiAgLnNlY3Rpb257ZGlzcGxheTpub25lfVxuICAuc2VjdGlvbi5hY3RpdmV7ZGlzcGxheTpibG9ja31cbiAgLmNhcmR7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWxpbmUpO2JvcmRlci1yYWRpdXM6MTRweDtwYWRkaW5nOjE0cHg7bWFyZ2luOjEycHggMH1cbiAgLmdyaWR7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoNCwxZnIpO2dhcDoxMHB4fVxuICAua3Bpe2JvcmRlcjoxcHggc29saWQgdmFyKC0tbGluZSk7Ym9yZGVyLXJhZGl1czoxMnB4O3BhZGRpbmc6MTBweDtiYWNrZ3JvdW5kOiNmZmZ9XG4gIC5rcGkgLmxhYmVse2ZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLW11dGVkKX1cbiAgLmtwaSAudmFse2ZvbnQtc2l6ZToxNXB4O2ZvbnQtd2VpZ2h0OjgwMDttYXJnaW4tdG9wOjRweH1cbiAgaDJ7bWFyZ2luOjZweCAwIDEwcHg7Zm9udC1zaXplOjE1cHh9XG4gIGgze21hcmdpbjoxMHB4IDAgOHB4O2ZvbnQtc2l6ZToxM3B4fVxuICB0YWJsZXt3aWR0aDoxMDAlO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZX1cbiAgdGgsdGR7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tbGluZSk7cGFkZGluZzo4cHggMTBweDtmb250LXNpemU6MTJweDt2ZXJ0aWNhbC1hbGlnbjp0b3B9XG4gIHRoe3RleHQtYWxpZ246bGVmdDtiYWNrZ3JvdW5kOiNmOGZhZmM7Y29sb3I6IzBmMTcyYTtwb3NpdGlvbjpzdGlja3k7dG9wOjEyNnB4O3otaW5kZXg6M31cbiAgdGQubnVtLHRoLm51bXt0ZXh0LWFsaWduOnJpZ2h0O2ZvbnQtdmFyaWFudC1udW1lcmljOnRhYnVsYXItbnVtc31cbiAgLnRhZ3tkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMTQ4LDE2MywxODQsLjM1KTtwYWRkaW5nOjJweCA4cHg7Ym9yZGVyLXJhZGl1czo5OTlweDtmb250LXNpemU6MTFweH1cbiAgLnRvb2xiYXJ7ZGlzcGxheTpmbGV4O2dhcDo4cHg7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO21hcmdpbjoxMHB4IDAgMH1cbiAgLmlucHV0e2JvcmRlcjoxcHggc29saWQgdmFyKC0tbGluZSk7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6OHB4IDEwcHg7Zm9udC1zaXplOjEycHg7bWluLXdpZHRoOjIwMHB4fVxuICAuYnRue2JvcmRlcjoxcHggc29saWQgdmFyKC0tbGluZSk7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6OHB4IDEwcHg7Zm9udC1zaXplOjEycHg7YmFja2dyb3VuZDojZmZmO2N1cnNvcjpwb2ludGVyfVxuICAuYnRuLnByaW1hcnl7YmFja2dyb3VuZDp2YXIoLS1icmFuZCk7Ym9yZGVyLWNvbG9yOnZhcigtLWJyYW5kKTtjb2xvcjojZmZmfVxuICAubm90ZXtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS1tdXRlZCk7bGluZS1oZWlnaHQ6MS41fVxuICAucmlnaHR7ZGlzcGxheTpmbGV4O2dhcDo4cHg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LWVuZH1cbiAgLnNlY3Rpb24tdGl0bGV7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtnYXA6MTBweH1cbiAgLmRpdmlkZXJ7aGVpZ2h0OjFweDtiYWNrZ3JvdW5kOnZhcigtLWxpbmUpO21hcmdpbjoxMHB4IDB9XG4gIC5jb21wYWN0IHRke3BhZGRpbmc6NnB4IDhweH1cbiAgLmF1ZGl0TGlua3tmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS1icmFuZCk7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTtjdXJzb3I6cG9pbnRlcn1cbiAgLnNlY3Rpb25IZWFkZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtnYXA6MTBweDttYXJnaW4tYm90dG9tOjhweH1cbiAgLnNlY3Rpb25IZWFkZXIgLnRpdGxlV3JhcHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDoycHh9XG4gIC5zZWN0aW9uSGVhZGVyIC50aXRsZXtmb250LXdlaWdodDo4MDA7Zm9udC1zaXplOjE1cHh9XG4gIC5zZWN0aW9uSGVhZGVyIC5wZXJpb2R7Zm9udC1zaXplOjExcHg7Y29sb3I6dmFyKC0tbXV0ZWQpfVxuICAuYXVkaXQtdGFibGUgY29sLmRhdGV7d2lkdGg6MTIwcHh9XG4gIC5hdWRpdC10YWJsZSBjb2wuaGVhZGVye3dpZHRoOjE3MHB4fVxuICAuYXVkaXQtdGFibGUgY29sLmRlYml0e3dpZHRoOjE0MHB4fVxuICAuYXVkaXQtdGFibGUgY29sLmNyZWRpdHt3aWR0aDoxNDBweH1cbiAgLmF1ZGl0LXRhYmxlIGNvbC5zdGF0dXN7d2lkdGg6OTBweH1cbiAgLmF1ZGl0LWRldGFpbC1jZWxse3BhZGRpbmc6MDtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1saW5lKX1cbiAgLmF1ZGl0LWRldGFpbC13cmFwe2JhY2tncm91bmQ6I2Y4ZmFmYztwYWRkaW5nOjhweCAxMHB4fVxuICAuYXVkaXQtZGV0YWlse3dpZHRoOjEwMCU7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlfVxuICAuYXVkaXQtZGV0YWlsIHRoLC5hdWRpdC1kZXRhaWwgdGR7Ym9yZGVyLWJvdHRvbToxcHggZGFzaGVkICNlNWU3ZWI7cGFkZGluZzo2cHggOHB4O2ZvbnQtc2l6ZToxMXB4fVxuICAuYXVkaXQtZGV0YWlsIHRoe3Bvc2l0aW9uOnN0YXRpYztiYWNrZ3JvdW5kOiNlZWYyZjc7Y29sb3I6IzBmMTcyYX1cbiAgLmF1ZGl0LWRldGFpbCAubnVte3RleHQtYWxpZ246cmlnaHQ7Zm9udC12YXJpYW50LW51bWVyaWM6dGFidWxhci1udW1zfVxuICAuYXVkaXQtZGV0YWlsIHRyOmxhc3QtY2hpbGQgdGR7Ym9yZGVyLWJvdHRvbTowfVxuICAucGFnZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4fVxuICAucGFnZXIgLmJ0bntwYWRkaW5nOjZweCAxMHB4fVxuICAucGFnZXIgLmNvdW50e2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKX1cbiAgLnByaW50SGVhZGVyLC5wcmludEZvb3RlcntkaXNwbGF5Om5vbmV9XG4gIEBtZWRpYSAobWF4LXdpZHRoOiA5ODBweCl7XG4gICAgLmdyaWR7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCgyLDFmcil9XG4gICAgLnN1YnttYXgtd2lkdGg6MzQwcHh9XG4gIH1cbiAgQG1lZGlhIHByaW50e1xuICAgIEBwYWdlIHsgc2l6ZTogQTQ7IG1hcmdpbjogMTRtbTsgfVxuICAgIGJvZHl7YmFja2dyb3VuZDojZmZmfVxuICAgIC50YWJzLC50b29sYmFyLC5idG4sLnRvcGJhcntkaXNwbGF5Om5vbmUgIWltcG9ydGFudH1cbiAgICAuY29udGVudHttYXgtd2lkdGg6bm9uZTtwYWRkaW5nOjIwbW0gMH1cbiAgICAuc2VjdGlvbntkaXNwbGF5Om5vbmV9XG4gICAgLnNlY3Rpb25bZGF0YS1wcmludC1hY3RpdmU9XCJ0cnVlXCJde2Rpc3BsYXk6YmxvY2t9XG4gICAgLnNlY3Rpb25bZGF0YS1wcmludC1hY3RpdmU9XCJ0cnVlXCJdIC5jYXJke3BhZ2UtYnJlYWstaW5zaWRlOmF2b2lkfVxuICAgIC5wcmludEhlYWRlciwucHJpbnRGb290ZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmZsZXgtZW5kO2dhcDoxMnB4fVxuICAgIC5wcmludEhlYWRlcntwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtwYWRkaW5nOjAgMCA2bW07Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tbGluZSl9XG4gICAgLnByaW50Rm9vdGVye3Bvc2l0aW9uOmZpeGVkO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO3BhZGRpbmc6Nm1tIDAgMDtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1saW5lKTtmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS1tdXRlZCl9XG4gICAgLnByaW50QnJhbmR7Zm9udC13ZWlnaHQ6ODAwO2ZvbnQtc2l6ZToxNHB4fVxuICAgIC5wcmludFRpdGxle2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6MTNweH1cbiAgICAucHJpbnRQZXJpb2R7Zm9udC1zaXplOjExcHg7Y29sb3I6dmFyKC0tbXV0ZWQpfVxuICAgIC5wYWdlTnVtOjphZnRlcntjb250ZW50OlwiUGFnZSBcIiBjb3VudGVyKHBhZ2UpfVxuICAgIHRhYmxlIHRoZWFke2Rpc3BsYXk6dGFibGUtaGVhZGVyLWdyb3VwfVxuICAgIHRhYmxlIHRmb290e2Rpc3BsYXk6dGFibGUtZm9vdGVyLWdyb3VwfVxuICAgIHRoe3Bvc2l0aW9uOnN0YXRpY31cbiAgfVxuPC9zdHlsZT5cbjwvaGVhZD5cbjxib2R5PlxuICAke2JvZHl9XG48c2NyaXB0PlxuICB2YXIgdGFicyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFiXCIpKTtcbiAgdmFyIHNlY3Rpb25zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWN0aW9uXCIpKTtcblxuICBmdW5jdGlvbiBhY3RpdmF0ZShpZCl7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJzLmxlbmd0aDsgaSsrKXtcbiAgICAgIHZhciB0ID0gdGFic1tpXTtcbiAgICAgIHZhciBpc0FjdGl2ZSA9IHQuZ2V0QXR0cmlidXRlKFwiZGF0YS10YWJcIikgPT09IGlkO1xuICAgICAgaWYgKGlzQWN0aXZlKSB0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICBlbHNlIHQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZWN0aW9ucy5sZW5ndGg7IGorKyl7XG4gICAgICB2YXIgcyA9IHNlY3Rpb25zW2pdO1xuICAgICAgdmFyIGlzU2hvd24gPSBzLmdldEF0dHJpYnV0ZShcImRhdGEtc2VjdGlvblwiKSA9PT0gaWQ7XG4gICAgICBpZiAoaXNTaG93bikgcy5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgZWxzZSBzLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgfVxuICAgIGlmIChoaXN0b3J5ICYmIGhpc3RvcnkucmVwbGFjZVN0YXRlKSBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBcIlwiLCBcIiNcIiArIGlkKTtcbiAgfVxuXG4gIGZvciAodmFyIGsgPSAwOyBrIDwgdGFicy5sZW5ndGg7IGsrKyl7XG4gICAgKGZ1bmN0aW9uKHRhYil7XG4gICAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBpZCA9IHRhYi5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRhYlwiKSB8fCBcImRhc2hib2FyZFwiO1xuICAgICAgICBhY3RpdmF0ZShpZCk7XG4gICAgICB9KTtcbiAgICB9KSh0YWJzW2tdKTtcbiAgfVxuXG4gIHZhciBpbml0aWFsID0gKGxvY2F0aW9uLmhhc2ggfHwgXCIjZGFzaGJvYXJkXCIpLnNsaWNlKDEpO1xuICB2YXIgaGFzSW5pdGlhbCA9IHRhYnMuc29tZShmdW5jdGlvbih0KXsgcmV0dXJuIHQuZ2V0QXR0cmlidXRlKFwiZGF0YS10YWJcIikgPT09IGluaXRpYWw7IH0pO1xuICBhY3RpdmF0ZShoYXNJbml0aWFsID8gaW5pdGlhbCA6IFwiZGFzaGJvYXJkXCIpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLCBmdW5jdGlvbigpe1xuICAgIHZhciBjdXJyZW50ID0gKGxvY2F0aW9uLmhhc2ggfHwgXCIjZGFzaGJvYXJkXCIpLnNsaWNlKDEpO1xuICAgIHZhciBoYXNDdXJyZW50ID0gdGFicy5zb21lKGZ1bmN0aW9uKHQpeyByZXR1cm4gdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRhYlwiKSA9PT0gY3VycmVudDsgfSk7XG4gICAgYWN0aXZhdGUoaGFzQ3VycmVudCA/IGN1cnJlbnQgOiBcImRhc2hib2FyZFwiKTtcbiAgfSk7XG5cbiAgdmFyIGdsU2VhcmNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnbFNlYXJjaFwiKTtcbiAgaWYgKGdsU2VhcmNoKXtcbiAgICBnbFNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24oZSl7XG4gICAgICB2YXIgcSA9IFN0cmluZyhlLnRhcmdldC52YWx1ZSB8fCBcIlwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhciBjYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1nbC1hY2NvdW50XVwiKTtcbiAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgY2FyZHMubGVuZ3RoOyBjKyspe1xuICAgICAgICB2YXIgbmFtZSA9IFN0cmluZyhjYXJkc1tjXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWdsLWFjY291bnRcIikgfHwgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY2FyZHNbY10uc3R5bGUuZGlzcGxheSA9ICghcSB8fCBuYW1lLmluZGV4T2YocSkgIT09IC0xKSA/IFwiXCIgOiBcIm5vbmVcIjtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFwcGx5VGFibGVGaWx0ZXIocHJlZml4KXtcbiAgICB2YXIgcUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4ICsgXCJTZWFyY2hcIik7XG4gICAgdmFyIGZJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZWZpeCArIFwiRnJvbVwiKTtcbiAgICB2YXIgdElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4ICsgXCJUb1wiKTtcbiAgICB2YXIgcSA9IHFJbnB1dCA/IFN0cmluZyhxSW5wdXQudmFsdWUgfHwgXCJcIikudHJpbSgpLnRvTG93ZXJDYXNlKCkgOiBcIlwiO1xuICAgIHZhciBmcm9tID0gZklucHV0ID8gU3RyaW5nKGZJbnB1dC52YWx1ZSB8fCBcIlwiKS50cmltKCkgOiBcIlwiO1xuICAgIHZhciB0byA9IHRJbnB1dCA/IFN0cmluZyh0SW5wdXQudmFsdWUgfHwgXCJcIikudHJpbSgpIDogXCJcIjtcbiAgICB2YXIgcm93cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1maWx0ZXItcm93PSdcIiArIHByZWZpeCArIFwiJ11cIik7XG4gICAgZm9yICh2YXIgciA9IDA7IHIgPCByb3dzLmxlbmd0aDsgcisrKXtcbiAgICAgIHZhciByb3cgPSByb3dzW3JdO1xuICAgICAgdmFyIHRleHQgPSBTdHJpbmcocm93LmdldEF0dHJpYnV0ZShcImRhdGEtdGV4dFwiKSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIGRhdGUgPSBTdHJpbmcocm93LmdldEF0dHJpYnV0ZShcImRhdGEtZGF0ZVwiKSB8fCBcIlwiKTtcbiAgICAgIHZhciBva1RleHQgPSAhcSB8fCB0ZXh0LmluZGV4T2YocSkgIT09IC0xO1xuICAgICAgdmFyIG9rRnJvbSA9ICFmcm9tIHx8IChkYXRlICYmIGRhdGUgPj0gZnJvbSk7XG4gICAgICB2YXIgb2tUbyA9ICF0byB8fCAoZGF0ZSAmJiBkYXRlIDw9IHRvKTtcbiAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gKG9rVGV4dCAmJiBva0Zyb20gJiYgb2tUbykgPyBcIlwiIDogXCJub25lXCI7XG4gICAgfVxuICB9XG5cbiAgW1wianJcIiwgXCJhdWRpdFwiXS5mb3JFYWNoKGZ1bmN0aW9uKHByZWZpeCl7XG4gICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4ICsgXCJTZWFyY2hcIik7XG4gICAgdmFyIGZyb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVmaXggKyBcIkZyb21cIik7XG4gICAgdmFyIHRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4ICsgXCJUb1wiKTtcbiAgICBbaW5wdXQsIGZyb20sIHRvXS5mb3JFYWNoKGZ1bmN0aW9uKGVsKXtcbiAgICAgIGlmICghZWwpIHJldHVybjtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbigpeyBhcHBseVRhYmxlRmlsdGVyKHByZWZpeCk7IH0pO1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbigpeyBhcHBseVRhYmxlRmlsdGVyKHByZWZpeCk7IH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBmdW5jdGlvbiBjbGVhclByaW50U3RhdGUoKXtcbiAgICB2YXIgYWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWN0aW9uW2RhdGEtcHJpbnQtYWN0aXZlPSd0cnVlJ11cIik7XG4gICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IGFjdGl2ZS5sZW5ndGg7IGkyKyspe1xuICAgICAgYWN0aXZlW2kyXS5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXByaW50LWFjdGl2ZVwiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwcmludFJlcG9ydChyZXBvcnRJZCl7XG4gICAgdmFyIHNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtcmVwb3J0PSdcIiArIHJlcG9ydElkICsgXCInXVwiKTtcbiAgICBpZiAoIXNlY3Rpb24pIHJldHVybjtcbiAgICBjbGVhclByaW50U3RhdGUoKTtcbiAgICBzZWN0aW9uLnNldEF0dHJpYnV0ZShcImRhdGEtcHJpbnQtYWN0aXZlXCIsIFwidHJ1ZVwiKTtcbiAgICB2YXIgdGl0bGUgPSBzZWN0aW9uLmdldEF0dHJpYnV0ZShcImRhdGEtdGl0bGVcIikgfHwgXCJSZXBvcnRcIjtcbiAgICB2YXIgcGVyaW9kID0gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBlcmlvZFwiKSB8fCBcIlwiO1xuICAgIHZhciB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmludFRpdGxlXCIpO1xuICAgIHZhciBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmludFBlcmlvZFwiKTtcbiAgICBpZiAodCkgdC50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgIGlmIChwKSBwLnRleHRDb250ZW50ID0gcGVyaW9kO1xuICAgIHdpbmRvdy5wcmludCgpO1xuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJhZnRlcnByaW50XCIsIGZ1bmN0aW9uKCl7XG4gICAgY2xlYXJQcmludFN0YXRlKCk7XG4gIH0pO1xuXG4gIHZhciBwcmludEJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtcHJpbnQtYWN0aW9uXVwiKTtcbiAgZm9yICh2YXIgcGIgPSAwOyBwYiA8IHByaW50QnRucy5sZW5ndGg7IHBiKyspe1xuICAgIChmdW5jdGlvbihidG4pe1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgcmVwb3J0SWQgPSBidG4uZ2V0QXR0cmlidXRlKFwiZGF0YS1wcmludC1hY3Rpb25cIik7XG4gICAgICAgIGlmIChyZXBvcnRJZCkgcHJpbnRSZXBvcnQocmVwb3J0SWQpO1xuICAgICAgfSk7XG4gICAgfSkocHJpbnRCdG5zW3BiXSk7XG4gIH1cblxuICB2YXIgYXVkaXRMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1hdWRpdC1oZWFkZXJzXVwiKTtcbiAgZm9yICh2YXIgYWwgPSAwOyBhbCA8IGF1ZGl0TGlua3MubGVuZ3RoOyBhbCsrKXtcbiAgICAoZnVuY3Rpb24oZWwpe1xuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBoZWFkZXJzID0gU3RyaW5nKGVsLmdldEF0dHJpYnV0ZShcImRhdGEtYXVkaXQtaGVhZGVyc1wiKSB8fCBcIlwiKS5zcGxpdChcIixcIikuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICB2YXIgcXVlcnkgPSBoZWFkZXJzWzBdIHx8IFwiXCI7XG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXVkaXRTZWFyY2hcIik7XG4gICAgICAgIGlmIChpbnB1dCl7XG4gICAgICAgICAgaW5wdXQudmFsdWUgPSBxdWVyeTtcbiAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIpKTtcbiAgICAgICAgfVxuICAgICAgICBhY3RpdmF0ZShcImF1ZGl0XCIpO1xuICAgICAgfSk7XG4gICAgfSkoYXVkaXRMaW5rc1thbF0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdFJhd0RhdGFQYWdlcigpe1xuICAgIHZhciByb3dzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXJhdy1yb3ddXCIpO1xuICAgIGlmICghcm93cy5sZW5ndGgpIHJldHVybjtcbiAgICB2YXIgcGFnZVNpemUgPSA1MDtcbiAgICB2YXIgdG90YWwgPSByb3dzLmxlbmd0aDtcbiAgICB2YXIgcGFnZUNvdW50ID0gTWF0aC5tYXgoMSwgTWF0aC5jZWlsKHRvdGFsIC8gcGFnZVNpemUpKTtcbiAgICB2YXIgY3VycmVudCA9IDE7XG4gICAgdmFyIGluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJhd1BhZ2VJbmZvXCIpO1xuICAgIHZhciBwcmV2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyYXdQcmV2XCIpO1xuICAgIHZhciBuZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyYXdOZXh0XCIpO1xuICAgIHZhciBjb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmF3Q291bnRcIik7XG5cbiAgICBmdW5jdGlvbiByZW5kZXIoKXtcbiAgICAgIHZhciBzdGFydCA9IChjdXJyZW50IC0gMSkgKiBwYWdlU2l6ZTtcbiAgICAgIHZhciBlbmQgPSBzdGFydCArIHBhZ2VTaXplO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgcm93c1tpXS5zdHlsZS5kaXNwbGF5ID0gKGkgPj0gc3RhcnQgJiYgaSA8IGVuZCkgPyBcIlwiIDogXCJub25lXCI7XG4gICAgICB9XG4gICAgICBpZiAoaW5mbykgaW5mby50ZXh0Q29udGVudCA9IFwiUGFnZSBcIiArIGN1cnJlbnQgKyBcIiAvIFwiICsgcGFnZUNvdW50O1xuICAgICAgaWYgKGNvdW50KSBjb3VudC50ZXh0Q29udGVudCA9IHRvdGFsICsgXCIgcm93c1wiO1xuICAgICAgaWYgKHByZXYpIHByZXYuZGlzYWJsZWQgPSBjdXJyZW50IDw9IDE7XG4gICAgICBpZiAobmV4dCkgbmV4dC5kaXNhYmxlZCA9IGN1cnJlbnQgPj0gcGFnZUNvdW50O1xuICAgIH1cblxuICAgIGlmIChwcmV2KSBwcmV2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgICAgaWYgKGN1cnJlbnQgPiAxKXsgY3VycmVudCAtPSAxOyByZW5kZXIoKTsgfVxuICAgIH0pO1xuICAgIGlmIChuZXh0KSBuZXh0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICAgICAgaWYgKGN1cnJlbnQgPCBwYWdlQ291bnQpeyBjdXJyZW50ICs9IDE7IHJlbmRlcigpOyB9XG4gICAgfSk7XG5cbiAgICByZW5kZXIoKTtcbiAgfVxuXG4gIGluaXRSYXdEYXRhUGFnZXIoKTtcbjwvc2NyaXB0PlxuPC9ib2R5PlxuPC9odG1sPmA7XG59XG5cbmZ1bmN0aW9uIHNlY3Rpb25EYXNoYm9hcmQocmVwb3J0OiBSZXBvcnRSZXN1bHQpOiBzdHJpbmcge1xuICBjb25zdCB7IGNoZWNrcywgbW9kZWxzLCBwZXJpb2RGcm9tLCBwZXJpb2RUbyB9ID0gcmVwb3J0O1xuICBjb25zdCB0YiA9IG1vZGVscy50cmlhbEJhbGFuY2U7XG4gIGNvbnN0IHBsID0gbW9kZWxzLnByb2ZpdExvc3M7XG4gIGNvbnN0IGJzID0gbW9kZWxzLmJhbGFuY2VTaGVldDtcbiAgY29uc3QgY2YgPSBtb2RlbHMuY2FzaGZsb3c7XG5cbiAgY29uc3QgYmFsYW5jZWRUYWcgPSBjaGVja3MuaXNCYWxhbmNlZCA/IHRhZyhcIkJhbGFuY2VkXCIsIFwib2tcIikgOiB0YWcoXCJOb3QgQmFsYW5jZWRcIiwgXCJiYWRcIik7XG5cbiAgY29uc3QgcGVyaW9kID0gYFBlcmlvZDogJHtwZXJpb2RGcm9tIHx8IFwiLVwifSDihpIgJHtwZXJpb2RUbyB8fCBcIi1cIn1gO1xuICByZXR1cm4gYFxuICA8c2VjdGlvbiBjbGFzcz1cInNlY3Rpb25cIiBpZD1cImRhc2hib2FyZFwiIGRhdGEtc2VjdGlvbj1cImRhc2hib2FyZFwiIGRhdGEtcmVwb3J0PVwiZGFzaGJvYXJkXCIgZGF0YS10aXRsZT1cIkRhc2hib2FyZFwiIGRhdGEtcGVyaW9kPVwiJHtlc2MocGVyaW9kKX1cIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgJHtzZWN0aW9uSGVhZGVySFRNTChcIkRhc2hib2FyZFwiLCBwZXJpb2QsIFwiZGFzaGJvYXJkXCIpfVxuICAgICAgPGRpdiBjbGFzcz1cInRvb2xiYXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4gICAgICAgICAgJHtiYWxhbmNlZFRhZ31cbiAgICAgICAgICAke3RhZyhgSm91cm5hbCBsaW5lczogJHtjaGVja3Mucm93Q291bnR9YCl9XG4gICAgICAgICAgJHtjaGVja3MubWlzc2luZ0RhdGVzID8gdGFnKGBNaXNzaW5nIGRhdGVzOiAke2NoZWNrcy5taXNzaW5nRGF0ZXN9YCwgXCJiYWRcIikgOiB0YWcoXCJEYXRlcyBPS1wiLCBcIm9rXCIpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImdyaWRcIiBzdHlsZT1cIm1hcmdpbi10b3A6MTBweFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+VG90YWwgRGViaXQgKHBlcmlvZGUpPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPiR7bW9uZXkoY2hlY2tzLnRvdGFsRGViaXQpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+VG90YWwgQ3JlZGl0IChwZXJpb2RlKTwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke21vbmV5KGNoZWNrcy50b3RhbENyZWRpdCl9PC9kaXY+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJrcGlcIj48ZGl2IGNsYXNzPVwibGFiZWxcIj5OZXQgUHJvZml0IChQJkwpPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPiR7bW9uZXkocGwudG90YWxzLm5ldF9wcm9maXQpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+TmV0IENhc2ggQ2hhbmdlPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPiR7bW9uZXkoY2YudG90YWxzLm5ldF9jaGFuZ2UpfTwvZGl2PjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiIHN0eWxlPVwibWFyZ2luLXRvcDoxMHB4XCI+XG4gICAgICAgIFBlcmlvZCByYW5nZTogPGI+JHtlc2MocGVyaW9kRnJvbSB8fCBcIi1cIil9PC9iPiDihpIgPGI+JHtlc2MocGVyaW9kVG8gfHwgXCItXCIpfTwvYj4uXG4gICAgICAgIEJhbGFuY2UgU2hlZXQgbWVtYWthaSB0YW5nZ2FsIGFraGlyIHBlcmlvZGUgKDxiPiR7ZXNjKHBlcmlvZFRvIHx8IFwiLVwiKX08L2I+KS5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgIDxoMj5RdWljayBTbmFwc2hvdDwvaDI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZ3JpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+VG90YWwgQXNzZXRzIChhcy1vZik8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHttb25leShicy50b3RhbHMuYXNzZXRzKX08L2Rpdj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImtwaVwiPjxkaXYgY2xhc3M9XCJsYWJlbFwiPlRvdGFsIExpYWJpbGl0aWVzIChhcy1vZik8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHttb25leShicy50b3RhbHMubGlhYmlsaXRpZXMpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+VG90YWwgRXF1aXR5IChhcy1vZik8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHttb25leShicy50b3RhbHMuZXF1aXR5KX08L2Rpdj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImtwaVwiPjxkaXYgY2xhc3M9XCJsYWJlbFwiPkJhbGFuY2UgRGlmZjwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke21vbmV5KGJzLnRvdGFscy5iYWxhbmNlX2RpZmYpfTwvZGl2PjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiIHN0eWxlPVwibWFyZ2luLXRvcDoxMHB4XCI+XG4gICAgICAgIEJhbGFuY2UgdmFsaWRhdGlvbjogJHticy52YWxpZGF0aW9ucy5pc19iYWxhbmNlZCA/IHRhZyhcIkJhbGFuY2VkXCIsIFwib2tcIikgOiB0YWcoXCJOb3QgQmFsYW5jZWRcIiwgXCJiYWRcIil9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICA8aDI+VHJpYWwgQmFsYW5jZSBTbmFwc2hvdDwvaDI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZ3JpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+T3BlbmluZyBCYWxhbmNlIFRvdGFsPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPiR7bW9uZXkodGIudG90YWxzLm9wZW5pbmdfYmFsYW5jZSl9PC9kaXY+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJrcGlcIj48ZGl2IGNsYXNzPVwibGFiZWxcIj5QZXJpb2QgRGViaXQ8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHttb25leSh0Yi50b3RhbHMuZGViaXQpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+UGVyaW9kIENyZWRpdDwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke21vbmV5KHRiLnRvdGFscy5jcmVkaXQpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+Q2xvc2luZyBEci9DcjwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke21vbmV5KHRiLnRvdGFscy5jbG9zaW5nX2RlYml0KX0gLyAke21vbmV5KHRiLnRvdGFscy5jbG9zaW5nX2NyZWRpdCl9PC9kaXY+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9zZWN0aW9uPmA7XG59XG5cbmZ1bmN0aW9uIHNlY3Rpb25Kb3VybmFsUmVnaXN0ZXIocmVwb3J0OiBSZXBvcnRSZXN1bHQpOiBzdHJpbmcge1xuICBjb25zdCBlbnRyaWVzID0gcmVwb3J0Lm1vZGVscy5qb3VybmFsUmVnaXN0ZXIuZ3JvdXBlZC5lbnRyaWVzO1xuICBjb25zdCBwZXJpb2QgPSBgUGVyaW9kOiAke3JlcG9ydC5wZXJpb2RGcm9tIHx8IFwiLVwifSDihpIgJHtyZXBvcnQucGVyaW9kVG8gfHwgXCItXCJ9YDtcblxuICBjb25zdCByb3dzID0gZW50cmllcy5tYXAoZSA9PiBgXG4gICAgPHRyIGRhdGEtZmlsdGVyLXJvdz1cImpyXCIgZGF0YS1kYXRlPVwiJHtlc2MoZS5kYXRlIHx8IFwiXCIpfVwiIGRhdGEtdGV4dD1cIiR7ZXNjKGAke2Uuam91cm5hbF9oZWFkZXJfaWR9ICR7ZS5kZXNjcmlwdGlvbn1gKX1cIj5cbiAgICAgIDx0ZD4ke2VzYyhlLmRhdGUgfHwgXCItXCIpfTwvdGQ+XG4gICAgICA8dGQgY2xhc3M9XCJtdXRlZFwiPjxhIGNsYXNzPVwiYXVkaXRMaW5rXCIgZGF0YS1hdWRpdC1oZWFkZXJzPVwiJHtlc2MoZS5qb3VybmFsX2hlYWRlcl9pZCl9XCIgaHJlZj1cIiNhdWRpdFwiPiR7ZXNjKGUuam91cm5hbF9oZWFkZXJfaWQpfTwvYT48L3RkPlxuICAgICAgPHRkPiR7ZXNjKGUuZGVzY3JpcHRpb24gfHwgXCJcIil9PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoZS50b3RhbF9kZWJpdCl9PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoZS50b3RhbF9jcmVkaXQpfTwvdGQ+XG4gICAgICA8dGQ+JHtlLmlzX2JhbGFuY2VkID8gdGFnKFwiT0tcIiwgXCJva1wiKSA6IHRhZyhcIk5PVCBPS1wiLCBcImJhZFwiKX08L3RkPlxuICAgIDwvdHI+XG4gIGApLmpvaW4oXCJcIik7XG5cbiAgcmV0dXJuIGBcbiAgPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uXCIgaWQ9XCJqb3VybmFsXCIgZGF0YS1zZWN0aW9uPVwiam91cm5hbFwiIGRhdGEtcmVwb3J0PVwiam91cm5hbC1yZWdpc3RlclwiIGRhdGEtdGl0bGU9XCJKb3VybmFsIFJlZ2lzdGVyXCIgZGF0YS1wZXJpb2Q9XCIke2VzYyhwZXJpb2QpfVwiPlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAke3NlY3Rpb25IZWFkZXJIVE1MKFwiSm91cm5hbCBSZWdpc3RlclwiLCBwZXJpb2QsIFwiam91cm5hbC1yZWdpc3RlclwiKX1cbiAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uLXRpdGxlXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPiR7dGFnKGBFbnRyaWVzOiAke2VudHJpZXMubGVuZ3RofWApfTwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiPlJpbmdrYXNhbiBwZXIgPGI+Sm91cm5hbCBIZWFkZXI8L2I+IChjaHJvbm9sb2dpY2FsLCBmaWx0ZXJhYmxlKS48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0b29sYmFyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPlxuICAgICAgICAgIDxpbnB1dCBpZD1cImpyRnJvbVwiIGNsYXNzPVwiaW5wdXRcIiB0eXBlPVwiZGF0ZVwiIC8+XG4gICAgICAgICAgPGlucHV0IGlkPVwianJUb1wiIGNsYXNzPVwiaW5wdXRcIiB0eXBlPVwiZGF0ZVwiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aW5wdXQgaWQ9XCJqclNlYXJjaFwiIGNsYXNzPVwiaW5wdXRcIiBwbGFjZWhvbGRlcj1cIlNlYXJjaCBoZWFkZXIvZGVzY3JpcHRpb24uLi5cIiAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8dGFibGUgY2xhc3M9XCJhdWRpdC10YWJsZVwiPlxuICAgICAgICA8Y29sZ3JvdXA+XG4gICAgICAgICAgPGNvbCBjbGFzcz1cImRhdGVcIiAvPlxuICAgICAgICAgIDxjb2wgY2xhc3M9XCJoZWFkZXJcIiAvPlxuICAgICAgICAgIDxjb2wgLz5cbiAgICAgICAgICA8Y29sIGNsYXNzPVwiZGViaXRcIiAvPlxuICAgICAgICAgIDxjb2wgY2xhc3M9XCJjcmVkaXRcIiAvPlxuICAgICAgICAgIDxjb2wgY2xhc3M9XCJzdGF0dXNcIiAvPlxuICAgICAgICA8L2NvbGdyb3VwPlxuICAgICAgICA8dGhlYWQ+PHRyPlxuICAgICAgICAgIDx0aD5UYW5nZ2FsPC90aD48dGg+Sm91cm5hbCBIZWFkZXIgSUQ8L3RoPjx0aD5EZXNrcmlwc2k8L3RoPlxuICAgICAgICAgIDx0aCBjbGFzcz1cIm51bVwiPkRlYml0PC90aD48dGggY2xhc3M9XCJudW1cIj5DcmVkaXQ8L3RoPjx0aD5TdGF0dXM8L3RoPlxuICAgICAgICA8L3RyPjwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT4ke3Jvd3MgfHwgXCJcIn08L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICA8L2Rpdj5cbiAgPC9zZWN0aW9uPmA7XG59XG5cbmZ1bmN0aW9uIHNlY3Rpb25HZW5lcmFsTGVkZ2VyKHJlcG9ydDogUmVwb3J0UmVzdWx0KTogc3RyaW5nIHtcbiAgY29uc3QgYWNjb3VudHMgPSByZXBvcnQubW9kZWxzLmdlbmVyYWxMZWRnZXIuZ3JvdXBlZC5hY2NvdW50cztcbiAgY29uc3QgcGVyaW9kID0gYFBlcmlvZDogJHtyZXBvcnQucGVyaW9kRnJvbSB8fCBcIi1cIn0g4oaSICR7cmVwb3J0LnBlcmlvZFRvIHx8IFwiLVwifWA7XG5cbiAgY29uc3QgZ2xDYXJkcyA9IGFjY291bnRzLm1hcChhY2MgPT4ge1xuICAgIGNvbnN0IGRheVJvd3MgPSBhY2MuZGF5cy5tYXAoZGF5ID0+IHtcbiAgICAgIGNvbnN0IGxpbmVzID0gZGF5LmVudHJpZXMubWFwKHIgPT4ge1xuICAgICAgICByZXR1cm4gYDx0cj5cbiAgICAgICAgICA8dGQ+JHtlc2Moci50cmFuc2FjdGlvbl9kYXRlIHx8IFwiLVwiKX08L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzcz1cIm11dGVkXCI+JHtlc2Moci5qb3VybmFsX2hlYWRlcl9pZCl9PC90ZD5cbiAgICAgICAgICA8dGQ+JHtlc2Moci5kZXNjcmlwdGlvbiB8fCBcIlwiKX08L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci5kZWJpdCl9PC90ZD5cbiAgICAgICAgICA8dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KHIuY3JlZGl0KX08L3RkPlxuICAgICAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPjxiPiR7bW9uZXkoci5iYWxhbmNlKX08L2I+PC90ZD5cbiAgICAgICAgPC90cj5gO1xuICAgICAgfSkuam9pbihcIlwiKTtcblxuICAgICAgcmV0dXJuIGBcbiAgICAgICAgPHRyPlxuICAgICAgICAgIDx0ZCBjb2xzcGFuPVwiNlwiIGNsYXNzPVwibXV0ZWRcIj48Yj4ke2VzYyhkYXkuZGF0ZSB8fCBcIihObyBEYXRlKVwiKX08L2I+IOKAlCBEYXkgVG90YWw6ICR7bW9uZXkoZGF5LmRheV9kZWJpdCl9IC8gJHttb25leShkYXkuZGF5X2NyZWRpdCl9PC90ZD5cbiAgICAgICAgPC90cj5cbiAgICAgICAgJHtsaW5lc31cbiAgICAgIGA7XG4gICAgfSkuam9pbihcIlwiKTtcblxuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiIGRhdGEtZ2wtYWNjb3VudD1cIiR7ZXNjKGFjYy5hY2NvdW50LmFjY291bnRfbmFtZSl9XCI+XG4gICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OmZsZXg7Z2FwOjEwcHg7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuXCI+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LXdlaWdodDo4MDBcIj4ke2VzYyhhY2MuYWNjb3VudC5hY2NvdW50X25hbWUpfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm11dGVkXCIgc3R5bGU9XCJmb250LXNpemU6MTJweFwiPlxuICAgICAgICAgICAgICAke2VzYyhhY2MuYWNjb3VudC5hY2NvdW50X3R5cGUpfSDigKIgJHtlc2MoYWNjLmFjY291bnQuYWNjb3VudF9jYXRlZ29yeSl9IOKAoiBLZWxvbXBvazogJHtlc2MoYWNjLmFjY291bnQua2Vsb21wb2tfbmVyYWNhIHx8IFwiLVwiKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPlxuICAgICAgICAgICAgJHt0YWcoYE9wZW5pbmc6ICR7bW9uZXkoYWNjLm9wZW5pbmdfYmFsYW5jZSl9YCl9XG4gICAgICAgICAgICAke3RhZyhgQ2xvc2luZzogJHttb25leShhY2MuY2xvc2luZ19iYWxhbmNlKX1gLFwib2tcIil9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDx0YWJsZT5cbiAgICAgICAgICA8dGhlYWQ+PHRyPlxuICAgICAgICAgICAgPHRoPlRhbmdnYWw8L3RoPjx0aD5SZWY8L3RoPjx0aD5EZXNrcmlwc2k8L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzPVwibnVtXCI+RGViaXQ8L3RoPjx0aCBjbGFzcz1cIm51bVwiPkNyZWRpdDwvdGg+PHRoIGNsYXNzPVwibnVtXCI+U2FsZG88L3RoPlxuICAgICAgICAgIDwvdHI+PC90aGVhZD5cbiAgICAgICAgICA8dGJvZHk+JHtkYXlSb3dzIHx8IFwiXCJ9PC90Ym9keT5cbiAgICAgICAgICA8dGZvb3Q+XG4gICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgIDx0aCBjb2xzcGFuPVwiM1wiIGNsYXNzPVwibnVtXCI+VG90YWw8L3RoPlxuICAgICAgICAgICAgICA8dGggY2xhc3M9XCJudW1cIj4ke21vbmV5KGFjYy50b3RhbF9kZWJpdCl9PC90aD5cbiAgICAgICAgICAgICAgPHRoIGNsYXNzPVwibnVtXCI+JHttb25leShhY2MudG90YWxfY3JlZGl0KX08L3RoPlxuICAgICAgICAgICAgICA8dGggY2xhc3M9XCJudW1cIj4ke21vbmV5KGFjYy5jbG9zaW5nX2JhbGFuY2UpfTwvdGg+XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICAgIDwvdGZvb3Q+XG4gICAgICAgIDwvdGFibGU+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9KS5qb2luKFwiXCIpO1xuXG4gIHJldHVybiBgXG4gIDxzZWN0aW9uIGNsYXNzPVwic2VjdGlvblwiIGlkPVwiZ2xcIiBkYXRhLXNlY3Rpb249XCJnbFwiIGRhdGEtcmVwb3J0PVwiZ2VuZXJhbC1sZWRnZXJcIiBkYXRhLXRpdGxlPVwiR2VuZXJhbCBMZWRnZXJcIiBkYXRhLXBlcmlvZD1cIiR7ZXNjKHBlcmlvZCl9XCI+XG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgICR7c2VjdGlvbkhlYWRlckhUTUwoXCJHZW5lcmFsIExlZGdlclwiLCBwZXJpb2QsIFwiZ2VuZXJhbC1sZWRnZXJcIil9XG4gICAgICA8ZGl2IGNsYXNzPVwidG9vbGJhclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiPkNhcmkgYWt1bjoga2V0aWsgc2ViYWdpYW4gbmFtYSBha3VuIHVudHVrIGZpbHRlciBsZWRnZXIuPC9kaXY+XG4gICAgICAgIDxpbnB1dCBpZD1cImdsU2VhcmNoXCIgY2xhc3M9XCJpbnB1dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIGFjY291bnQgbmFtZS4uLlwiIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICAke2dsQ2FyZHMgfHwgYDxkaXYgY2xhc3M9XCJjYXJkXCI+PGRpdiBjbGFzcz1cIm5vdGVcIj5ObyBHTCBkYXRhLjwvZGl2PjwvZGl2PmB9XG4gIDwvc2VjdGlvbj5gO1xufVxuXG5mdW5jdGlvbiBzZWN0aW9uVHJpYWxCYWxhbmNlKHJlcG9ydDogUmVwb3J0UmVzdWx0KTogc3RyaW5nIHtcbiAgY29uc3QgdGIgPSByZXBvcnQubW9kZWxzLnRyaWFsQmFsYW5jZTtcbiAgY29uc3QgcGVyaW9kID0gYFBlcmlvZDogJHtyZXBvcnQucGVyaW9kRnJvbSB8fCBcIi1cIn0g4oaSICR7cmVwb3J0LnBlcmlvZFRvIHx8IFwiLVwifWA7XG5cbiAgY29uc3Qgcm93cyA9IHRiLmdyb3VwZWQucm93cy5tYXAociA9PiBgXG4gICAgPHRyPlxuICAgICAgPHRkPiR7ZXNjKHIuYWNjb3VudC5hY2NvdW50X25hbWUpfTwvdGQ+XG4gICAgICA8dGQgY2xhc3M9XCJtdXRlZFwiPiR7ZXNjKHIuYWNjb3VudC5hY2NvdW50X3R5cGUpfTwvdGQ+XG4gICAgICA8dGQgY2xhc3M9XCJtdXRlZFwiPiR7ZXNjKHIuYWNjb3VudC5rZWxvbXBva19uZXJhY2EgfHwgXCItXCIpfTwvdGQ+XG4gICAgICA8dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KHIub3BlbmluZ19iYWxhbmNlKX08L3RkPlxuICAgICAgPHRkIGNsYXNzPVwibnVtXCI+JHttb25leShyLmRlYml0KX08L3RkPlxuICAgICAgPHRkIGNsYXNzPVwibnVtXCI+JHttb25leShyLmNyZWRpdCl9PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci5jbG9zaW5nX2RlYml0KX08L3RkPlxuICAgICAgPHRkIGNsYXNzPVwibnVtXCI+JHttb25leShyLmNsb3NpbmdfY3JlZGl0KX08L3RkPlxuICAgICAgPHRkIGNsYXNzPVwibnVtXCI+JHtlc2Moci5qb3VybmFsX2xpbmVzKX08L3RkPlxuICAgIDwvdHI+XG4gIGApLmpvaW4oXCJcIik7XG5cbiAgcmV0dXJuIGBcbiAgPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uXCIgaWQ9XCJ0YlwiIGRhdGEtc2VjdGlvbj1cInRiXCIgZGF0YS1yZXBvcnQ9XCJ0cmlhbC1iYWxhbmNlXCIgZGF0YS10aXRsZT1cIlRyaWFsIEJhbGFuY2VcIiBkYXRhLXBlcmlvZD1cIiR7ZXNjKHBlcmlvZCl9XCI+XG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgICR7c2VjdGlvbkhlYWRlckhUTUwoXCJUcmlhbCBCYWxhbmNlXCIsIHBlcmlvZCwgXCJ0cmlhbC1iYWxhbmNlXCIpfVxuICAgICAgPGRpdiBjbGFzcz1cIm5vdGVcIj5DbG9zaW5nIGRlYml0L2NyZWRpdCBkaXN1c3VuIGRhcmkgc2FsZG8gYWtoaXIgKGJhbGFuY2VzIHNob3VsZCBtYXRjaCkuPC9kaXY+XG4gICAgICA8dGFibGU+XG4gICAgICAgIDx0aGVhZD48dHI+XG4gICAgICAgICAgPHRoPkFrdW48L3RoPjx0aD5UaXBlPC90aD48dGg+S2Vsb21wb2sgTmVyYWNhPC90aD5cbiAgICAgICAgICA8dGggY2xhc3M9XCJudW1cIj5PcGVuaW5nPC90aD48dGggY2xhc3M9XCJudW1cIj5QZXJpb2QgRGViaXQ8L3RoPjx0aCBjbGFzcz1cIm51bVwiPlBlcmlvZCBDcmVkaXQ8L3RoPlxuICAgICAgICAgIDx0aCBjbGFzcz1cIm51bVwiPkNsb3NpbmcgRGViaXQ8L3RoPjx0aCBjbGFzcz1cIm51bVwiPkNsb3NpbmcgQ3JlZGl0PC90aD48dGggY2xhc3M9XCJudW1cIj5MaW5lczwvdGg+XG4gICAgICAgIDwvdHI+PC90aGVhZD5cbiAgICAgICAgPHRib2R5PiR7cm93cyB8fCBcIlwifTwvdGJvZHk+XG4gICAgICAgIDx0Zm9vdD5cbiAgICAgICAgICA8dHI+XG4gICAgICAgICAgICA8dGggY29sc3Bhbj1cIjNcIiBjbGFzcz1cIm51bVwiPlRvdGFsPC90aD5cbiAgICAgICAgICAgIDx0aCBjbGFzcz1cIm51bVwiPiR7bW9uZXkodGIudG90YWxzLm9wZW5pbmdfYmFsYW5jZSl9PC90aD5cbiAgICAgICAgICAgIDx0aCBjbGFzcz1cIm51bVwiPiR7bW9uZXkodGIudG90YWxzLmRlYml0KX08L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzPVwibnVtXCI+JHttb25leSh0Yi50b3RhbHMuY3JlZGl0KX08L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzPVwibnVtXCI+JHttb25leSh0Yi50b3RhbHMuY2xvc2luZ19kZWJpdCl9PC90aD5cbiAgICAgICAgICAgIDx0aCBjbGFzcz1cIm51bVwiPiR7bW9uZXkodGIudG90YWxzLmNsb3NpbmdfY3JlZGl0KX08L3RoPlxuICAgICAgICAgICAgPHRoPjwvdGg+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgPC90Zm9vdD5cbiAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5gO1xufVxuXG5mdW5jdGlvbiBzZWN0aW9uUHJvZml0TG9zcyhyZXBvcnQ6IFJlcG9ydFJlc3VsdCk6IHN0cmluZyB7XG4gIGNvbnN0IHBsID0gcmVwb3J0Lm1vZGVscy5wcm9maXRMb3NzO1xuICBjb25zdCBwZXJpb2QgPSBgUGVyaW9kOiAke3JlcG9ydC5wZXJpb2RGcm9tIHx8IFwiLVwifSDihpIgJHtyZXBvcnQucGVyaW9kVG8gfHwgXCItXCJ9YDtcblxuICBjb25zdCBncm91cEJsb2NrID0gKGdyb3VwOiB0eXBlb2YgcGwuZ3JvdXBlZC5pbmNvbWUpID0+IHtcbiAgICBjb25zdCBjYXRzID0gZ3JvdXAuY2F0ZWdvcmllcy5tYXAoYyA9PiB7XG4gICAgICBjb25zdCBhY2NvdW50cyA9IGMuYWNjb3VudHMubWFwKGEgPT4gYDx0cj48dGQgY2xhc3M9XCJtdXRlZFwiPiR7ZXNjKGEuYWNjb3VudC5hY2NvdW50X25hbWUpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHttb25leShhLmFtb3VudCl9PC90ZD48dGQ+JHthdWRpdExpbmsoYS50cmFjZSl9PC90ZD48L3RyPmApLmpvaW4oXCJcIik7XG4gICAgICByZXR1cm4gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uLXRpdGxlXCI+XG4gICAgICAgICAgICA8aDM+JHtlc2MoYy5jYXRlZ29yeSl9PC9oMz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPiR7dGFnKGBUb3RhbDogJHttb25leShjLmFtb3VudCl9YCl9ICR7YXVkaXRMaW5rKGMudHJhY2UpfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDx0YWJsZSBjbGFzcz1cImNvbXBhY3RcIj48dGhlYWQ+PHRyPjx0aD5Ba3VuPC90aD48dGggY2xhc3M9XCJudW1cIj5KdW1sYWg8L3RoPjx0aD5UcmFjZTwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT4ke2FjY291bnRzIHx8IFwiXCJ9PC90Ym9keT48L3RhYmxlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfSkuam9pbihcIlwiKTtcblxuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPlxuICAgICAgICAgIDxoMj4ke2dyb3VwLnR5cGUgPT09IFwiaW5jb21lXCIgPyBcIkluY29tZVwiIDogXCJFeHBlbnNlXCJ9PC9oMj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicmlnaHRcIj4ke3RhZyhgVG90YWw6ICR7bW9uZXkoZ3JvdXAudG90YWwpfWApfSAke2F1ZGl0TGluayhncm91cC50cmFjZSl9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiPk11bHRpLWxldmVsIGdyb3VwaW5nOiBjYXRlZ29yeSDihpIgYWNjb3VudC48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgJHtjYXRzIHx8IFwiXCJ9XG4gICAgYDtcbiAgfTtcblxuICByZXR1cm4gYFxuICA8c2VjdGlvbiBjbGFzcz1cInNlY3Rpb25cIiBpZD1cInBsXCIgZGF0YS1zZWN0aW9uPVwicGxcIiBkYXRhLXJlcG9ydD1cInByb2ZpdC1sb3NzXCIgZGF0YS10aXRsZT1cIlByb2ZpdCAmIExvc3NcIiBkYXRhLXBlcmlvZD1cIiR7ZXNjKHBlcmlvZCl9XCI+XG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgICR7c2VjdGlvbkhlYWRlckhUTUwoXCJQcm9maXQgJiBMb3NzXCIsIHBlcmlvZCwgXCJwcm9maXQtbG9zc1wiKX1cbiAgICAgIDxkaXYgY2xhc3M9XCJncmlkXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJrcGlcIj48ZGl2IGNsYXNzPVwibGFiZWxcIj5Ub3RhbCBJbmNvbWU8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHttb25leShwbC50b3RhbHMuaW5jb21lKX08L2Rpdj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImtwaVwiPjxkaXYgY2xhc3M9XCJsYWJlbFwiPlRvdGFsIEV4cGVuc2U8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHttb25leShwbC50b3RhbHMuZXhwZW5zZSl9PC9kaXY+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJrcGlcIj48ZGl2IGNsYXNzPVwibGFiZWxcIj5OZXQgUHJvZml0PC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPiR7bW9uZXkocGwudG90YWxzLm5ldF9wcm9maXQpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+TWFyZ2luPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPiR7cGwudG90YWxzLmluY29tZSA/IE1hdGgucm91bmQoKHBsLnRvdGFscy5uZXRfcHJvZml0IC8gcGwudG90YWxzLmluY29tZSkgKiAxMDApIDogMH0lPC9kaXY+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICAke2dyb3VwQmxvY2socGwuZ3JvdXBlZC5pbmNvbWUpfVxuICAgICR7Z3JvdXBCbG9jayhwbC5ncm91cGVkLmV4cGVuc2UpfVxuICA8L3NlY3Rpb24+YDtcbn1cblxuZnVuY3Rpb24gc2VjdGlvbkJhbGFuY2VTaGVldChyZXBvcnQ6IFJlcG9ydFJlc3VsdCk6IHN0cmluZyB7XG4gIGNvbnN0IGJzID0gcmVwb3J0Lm1vZGVscy5iYWxhbmNlU2hlZXQ7XG4gIGNvbnN0IHBlcmlvZCA9IGBBcyBvZjogJHtyZXBvcnQucGVyaW9kVG8gfHwgXCItXCJ9YDtcblxuICBjb25zdCByZW5kZXIgPSAoYXJyOiB0eXBlb2YgYnMuZ3JvdXBlZC5hc3NldHNfY3VycmVudCkgPT4gYXJyXG4gICAgLnNvcnQoKGEsIGIpID0+IChhLmFjY291bnQua2Vsb21wb2tfbmVyYWNhIHx8IFwiXCIpLmxvY2FsZUNvbXBhcmUoYi5hY2NvdW50LmtlbG9tcG9rX25lcmFjYSB8fCBcIlwiKSB8fCBhLmFjY291bnQuYWNjb3VudF9uYW1lLmxvY2FsZUNvbXBhcmUoYi5hY2NvdW50LmFjY291bnRfbmFtZSkpXG4gICAgLm1hcChyID0+IGA8dHI+PHRkPiR7ZXNjKHIuYWNjb3VudC5rZWxvbXBva19uZXJhY2EgfHwgXCItXCIpfTwvdGQ+PHRkPiR7ZXNjKHIuYWNjb3VudC5hY2NvdW50X25hbWUpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHttb25leShyLmJhbGFuY2UpfTwvdGQ+PHRkPiR7YXVkaXRMaW5rKHIudHJhY2UpfTwvdGQ+PC90cj5gKVxuICAgIC5qb2luKFwiXCIpO1xuXG4gIHJldHVybiBgXG4gIDxzZWN0aW9uIGNsYXNzPVwic2VjdGlvblwiIGlkPVwiYnNcIiBkYXRhLXNlY3Rpb249XCJic1wiIGRhdGEtcmVwb3J0PVwiYmFsYW5jZS1zaGVldFwiIGRhdGEtdGl0bGU9XCJCYWxhbmNlIFNoZWV0XCIgZGF0YS1wZXJpb2Q9XCIke2VzYyhwZXJpb2QpfVwiPlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAke3NlY3Rpb25IZWFkZXJIVE1MKFwiQmFsYW5jZSBTaGVldCAoQXMgb2YpXCIsIHBlcmlvZCwgXCJiYWxhbmNlLXNoZWV0XCIpfVxuICAgICAgPGRpdiBjbGFzcz1cIm5vdGVcIj5TYWxkbyBha2hpciBwZXIgYWt1biBkYW4gdmFsaWRhc2kgQXNldCA9IExpYWJpbGl0aWVzICsgRXF1aXR5LjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImdyaWRcIiBzdHlsZT1cIm1hcmdpbi10b3A6MTBweFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+QXNzZXRzPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPiR7bW9uZXkoYnMudG90YWxzLmFzc2V0cyl9PC9kaXY+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJrcGlcIj48ZGl2IGNsYXNzPVwibGFiZWxcIj5MaWFiaWxpdGllczwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke21vbmV5KGJzLnRvdGFscy5saWFiaWxpdGllcyl9PC9kaXY+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJrcGlcIj48ZGl2IGNsYXNzPVwibGFiZWxcIj5FcXVpdHk8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHttb25leShicy50b3RhbHMuZXF1aXR5KX08L2Rpdj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImtwaVwiPjxkaXYgY2xhc3M9XCJsYWJlbFwiPkJhbGFuY2UgRGlmZjwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke21vbmV5KGJzLnRvdGFscy5iYWxhbmNlX2RpZmYpfTwvZGl2PjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgPGgzPkFzZXQgTGFuY2FyPC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5LZWxvbXBvazwvdGg+PHRoPkFrdW48L3RoPjx0aCBjbGFzcz1cIm51bVwiPlNhbGRvPC90aD48dGg+VHJhY2U8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyZW5kZXIoYnMuZ3JvdXBlZC5hc3NldHNfY3VycmVudCl9PC90Ym9keT48L3RhYmxlPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgIDxoMz5Bc2V0IFRpZGFrIExhbmNhcjwvaDM+XG4gICAgICA8dGFibGU+PHRoZWFkPjx0cj48dGg+S2Vsb21wb2s8L3RoPjx0aD5Ba3VuPC90aD48dGggY2xhc3M9XCJudW1cIj5TYWxkbzwvdGg+PHRoPlRyYWNlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7cmVuZGVyKGJzLmdyb3VwZWQuYXNzZXRzX25vbmN1cnJlbnQpfTwvdGJvZHk+PC90YWJsZT5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICA8aDM+QXNldCBMYWlubnlhIChVbmNsYXNzaWZpZWQpPC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5LZWxvbXBvazwvdGg+PHRoPkFrdW48L3RoPjx0aCBjbGFzcz1cIm51bVwiPlNhbGRvPC90aD48dGg+VHJhY2U8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyZW5kZXIoYnMuZ3JvdXBlZC5hc3NldHNfdW5jYXRlZ29yaXplZCl9PC90Ym9keT48L3RhYmxlPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgIDxoMz5MaWFiaWxpdGllcyBKYW5na2EgUGVuZGVrPC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5LZWxvbXBvazwvdGg+PHRoPkFrdW48L3RoPjx0aCBjbGFzcz1cIm51bVwiPlNhbGRvPC90aD48dGg+VHJhY2U8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyZW5kZXIoYnMuZ3JvdXBlZC5saWFiaWxpdGllc19zaG9ydCl9PC90Ym9keT48L3RhYmxlPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgIDxoMz5MaWFiaWxpdGllcyBKYW5na2EgUGFuamFuZzwvaDM+XG4gICAgICA8dGFibGU+PHRoZWFkPjx0cj48dGg+S2Vsb21wb2s8L3RoPjx0aD5Ba3VuPC90aD48dGggY2xhc3M9XCJudW1cIj5TYWxkbzwvdGg+PHRoPlRyYWNlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7cmVuZGVyKGJzLmdyb3VwZWQubGlhYmlsaXRpZXNfbG9uZyl9PC90Ym9keT48L3RhYmxlPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgIDxoMz5MaWFiaWxpdGllcyBMYWlubnlhIChVbmNsYXNzaWZpZWQpPC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5LZWxvbXBvazwvdGg+PHRoPkFrdW48L3RoPjx0aCBjbGFzcz1cIm51bVwiPlNhbGRvPC90aD48dGg+VHJhY2U8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyZW5kZXIoYnMuZ3JvdXBlZC5saWFiaWxpdGllc191bmNhdGVnb3JpemVkKX08L3Rib2R5PjwvdGFibGU+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgPGgzPkVxdWl0eSAmIFJldGFpbmVkIEVhcm5pbmdzPC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5LZWxvbXBvazwvdGg+PHRoPkFrdW48L3RoPjx0aCBjbGFzcz1cIm51bVwiPlNhbGRvPC90aD48dGg+VHJhY2U8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyZW5kZXIoYnMuZ3JvdXBlZC5lcXVpdHkpfTwvdGJvZHk+PC90YWJsZT5cbiAgICA8L2Rpdj5cbiAgPC9zZWN0aW9uPmA7XG59XG5cbmZ1bmN0aW9uIHNlY3Rpb25DYXNoZmxvdyhyZXBvcnQ6IFJlcG9ydFJlc3VsdCk6IHN0cmluZyB7XG4gIGNvbnN0IGNmID0gcmVwb3J0Lm1vZGVscy5jYXNoZmxvdztcbiAgY29uc3QgcGVyaW9kID0gYFBlcmlvZDogJHtyZXBvcnQucGVyaW9kRnJvbSB8fCBcIi1cIn0g4oaSICR7cmVwb3J0LnBlcmlvZFRvIHx8IFwiLVwifWA7XG4gIGNvbnN0IHJvd3MgPSAodGl0bGU6IHN0cmluZywgYXJyOiB0eXBlb2YgY2YuZ3JvdXBlZC5vcGVyYXRpbmcpID0+IGBcbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgPGgzPiR7dGl0bGV9PC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5BY3Rpdml0eTwvdGg+PHRoIGNsYXNzPVwibnVtXCI+QW1vdW50PC90aD48dGg+VHJhY2U8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHthcnIubWFwKGEgPT4gYDx0cj48dGQ+JHtlc2MoYS5hY3Rpdml0eSl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KGEuYW1vdW50KX08L3RkPjx0ZD4ke2F1ZGl0TGluayhhLnRyYWNlKX08L3RkPjwvdHI+YCkuam9pbihcIlwiKX08L3Rib2R5PjwvdGFibGU+XG4gICAgPC9kaXY+XG4gIGA7XG5cbiAgcmV0dXJuIGBcbiAgPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uXCIgaWQ9XCJjZlwiIGRhdGEtc2VjdGlvbj1cImNmXCIgZGF0YS1yZXBvcnQ9XCJjYXNoLWZsb3dcIiBkYXRhLXRpdGxlPVwiQ2FzaCBGbG93IChEaXJlY3QpXCIgZGF0YS1wZXJpb2Q9XCIke2VzYyhwZXJpb2QpfVwiPlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAke3NlY3Rpb25IZWFkZXJIVE1MKFwiQ2FzaCBGbG93IChEaXJlY3QpXCIsIHBlcmlvZCwgXCJjYXNoLWZsb3dcIil9XG4gICAgICA8ZGl2IGNsYXNzPVwiZ3JpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+Q2FzaCBMaW5lczwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke2VzYyhjZi5yYXdfcm93cy5sZW5ndGgpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+TmV0IENhc2ggQ2hhbmdlPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPiR7bW9uZXkoY2YudG90YWxzLm5ldF9jaGFuZ2UpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+TWV0aG9kPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPkRpcmVjdDwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+QWN0aXZpdGllczwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke2VzYyhjZi5ncm91cGVkLm9wZXJhdGluZy5sZW5ndGggKyBjZi5ncm91cGVkLmludmVzdGluZy5sZW5ndGggKyBjZi5ncm91cGVkLmZpbmFuY2luZy5sZW5ndGggKyBjZi5ncm91cGVkLnVuY2F0ZWdvcml6ZWQubGVuZ3RoKX08L2Rpdj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cIm5vdGVcIiBzdHlsZT1cIm1hcmdpbi10b3A6MTBweFwiPlxuICAgICAgICBNZXRvZGUgZGlyZWN0IG1lbmdhbmRhbGthbiBmbGFnIDxiPmlzX2Nhc2hfYWNjb3VudDwvYj4gZGFuIDxiPmNhc2hmbG93X2FjdGl2aXR5PC9iPi5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgICR7cm93cyhcIk9wZXJhdGluZyBBY3Rpdml0aWVzXCIsIGNmLmdyb3VwZWQub3BlcmF0aW5nKX1cbiAgICAke3Jvd3MoXCJJbnZlc3RpbmcgQWN0aXZpdGllc1wiLCBjZi5ncm91cGVkLmludmVzdGluZyl9XG4gICAgJHtyb3dzKFwiRmluYW5jaW5nIEFjdGl2aXRpZXNcIiwgY2YuZ3JvdXBlZC5maW5hbmNpbmcpfVxuICAgICR7cm93cyhcIlVuY2F0ZWdvcml6ZWRcIiwgY2YuZ3JvdXBlZC51bmNhdGVnb3JpemVkKX1cbiAgPC9zZWN0aW9uPmA7XG59XG5cbmZ1bmN0aW9uIHNlY3Rpb25FcXVpdHlDaGFuZ2VzKHJlcG9ydDogUmVwb3J0UmVzdWx0KTogc3RyaW5nIHtcbiAgY29uc3QgZXEgPSByZXBvcnQubW9kZWxzLmVxdWl0eUNoYW5nZXM7XG4gIGNvbnN0IHBlcmlvZCA9IGBQZXJpb2Q6ICR7cmVwb3J0LnBlcmlvZEZyb20gfHwgXCItXCJ9IOKGkiAke3JlcG9ydC5wZXJpb2RUbyB8fCBcIi1cIn1gO1xuICBjb25zdCByb3dzID0gZXEuZ3JvdXBlZC5yb3dzLm1hcChyID0+IGBcbiAgICA8dHI+PHRkPiR7ZXNjKHIuYWNjb3VudC5hY2NvdW50X25hbWUpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHttb25leShyLm9wZW5pbmdfYmFsYW5jZSl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KHIubmV0X2NoYW5nZSl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KHIuY2xvc2luZ19iYWxhbmNlKX08L3RkPjx0ZD4ke2F1ZGl0TGluayhyLnRyYWNlKX08L3RkPjwvdHI+XG4gIGApLmpvaW4oXCJcIik7XG5cbiAgcmV0dXJuIGBcbiAgPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uXCIgaWQ9XCJlcXVpdHlcIiBkYXRhLXNlY3Rpb249XCJlcXVpdHlcIiBkYXRhLXJlcG9ydD1cImVxdWl0eS1jaGFuZ2VzXCIgZGF0YS10aXRsZT1cIlN0YXRlbWVudCBvZiBDaGFuZ2VzIGluIEVxdWl0eVwiIGRhdGEtcGVyaW9kPVwiJHtlc2MocGVyaW9kKX1cIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgJHtzZWN0aW9uSGVhZGVySFRNTChcIlN0YXRlbWVudCBvZiBDaGFuZ2VzIGluIEVxdWl0eVwiLCBwZXJpb2QsIFwiZXF1aXR5LWNoYW5nZXNcIil9XG4gICAgICA8ZGl2IGNsYXNzPVwiZ3JpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+T3BlbmluZyBFcXVpdHk8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHttb25leShlcS50b3RhbHMub3BlbmluZ19lcXVpdHkpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+TmV0IFByb2ZpdDwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke21vbmV5KGVxLnRvdGFscy5uZXRfcHJvZml0KX08L2Rpdj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImtwaVwiPjxkaXYgY2xhc3M9XCJsYWJlbFwiPkVxdWl0eSBJbmNyZWFzZTwvZGl2PjxkaXYgY2xhc3M9XCJ2YWxcIj4ke21vbmV5KGVxLnRvdGFscy5lcXVpdHlfaW5jcmVhc2UpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+RXF1aXR5IERlY3JlYXNlPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPiR7bW9uZXkoZXEudG90YWxzLmVxdWl0eV9kZWNyZWFzZSl9PC9kaXY+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJub3RlXCIgc3R5bGU9XCJtYXJnaW4tdG9wOjEwcHhcIj5DbG9zaW5nIEVxdWl0eSA9IE9wZW5pbmcgKyBOZXQgUHJvZml0ICsgRXF1aXR5IE1vdmVtZW50cy48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJkaXZpZGVyXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+Q2xvc2luZyBFcXVpdHk8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHttb25leShlcS50b3RhbHMuY2xvc2luZ19lcXVpdHkpfTwvZGl2PjwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgIDxoMz5FcXVpdHkgTW92ZW1lbnQgYnkgQWNjb3VudDwvaDM+XG4gICAgICA8dGFibGU+PHRoZWFkPjx0cj48dGg+QWt1bjwvdGg+PHRoIGNsYXNzPVwibnVtXCI+T3BlbmluZzwvdGg+PHRoIGNsYXNzPVwibnVtXCI+Q2hhbmdlPC90aD48dGggY2xhc3M9XCJudW1cIj5DbG9zaW5nPC90aD48dGg+VHJhY2U8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyb3dzIHx8IFwiXCJ9PC90Ym9keT48L3RhYmxlPlxuICAgIDwvZGl2PlxuICA8L3NlY3Rpb24+YDtcbn1cblxuZnVuY3Rpb24gc2VjdGlvbkNvbXBhcmF0aXZlUEwocmVwb3J0OiBSZXBvcnRSZXN1bHQpOiBzdHJpbmcge1xuICBjb25zdCBjbXAgPSByZXBvcnQubW9kZWxzLmNvbXBhcmF0aXZlUHJvZml0TG9zcztcbiAgaWYgKCFjbXApIHtcbiAgICByZXR1cm4gYFxuICAgIDxzZWN0aW9uIGNsYXNzPVwic2VjdGlvblwiIGlkPVwicGxjXCIgZGF0YS1zZWN0aW9uPVwicGxjXCIgZGF0YS1yZXBvcnQ9XCJjb21wYXJhdGl2ZS1wbFwiIGRhdGEtdGl0bGU9XCJDb21wYXJhdGl2ZSBQcm9maXQgJiBMb3NzXCIgZGF0YS1wZXJpb2Q9XCJOL0FcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAgICR7c2VjdGlvbkhlYWRlckhUTUwoXCJDb21wYXJhdGl2ZSBQcm9maXQgJiBMb3NzXCIsIFwiTi9BXCIsIFwiY29tcGFyYXRpdmUtcGxcIil9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJub3RlXCI+UHJldmlvdXMgcGVyaW9kIG5vdCBhdmFpbGFibGUuPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L3NlY3Rpb24+YDtcbiAgfVxuXG4gIGNvbnN0IHJlbmRlclNlY3Rpb24gPSAoc2VjdGlvbjogdHlwZW9mIGNtcC5pbmNvbWUpID0+IHtcbiAgICBjb25zdCByb3dzID0gc2VjdGlvbi5yb3dzLm1hcChyID0+IGBcbiAgICAgIDx0cj5cbiAgICAgICAgPHRkPiR7ZXNjKHIubGFiZWwpfTwvdGQ+XG4gICAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci5jdXJyZW50KX08L3RkPlxuICAgICAgICA8dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KHIucHJldmlvdXMpfTwvdGQ+XG4gICAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci52YXJpYW5jZSl9PC90ZD5cbiAgICAgICAgPHRkIGNsYXNzPVwibnVtXCI+JHtyLnZhcmlhbmNlX3BjdCA9PT0gbnVsbCA/IFwiLVwiIDogKE1hdGgucm91bmQoci52YXJpYW5jZV9wY3QgKiAxMDAwKSAvIDEwKSArIFwiJVwifTwvdGQ+XG4gICAgICA8L3RyPlxuICAgIGApLmpvaW4oXCJcIik7XG5cbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj5cbiAgICAgICAgICA8aDM+JHtlc2Moc2VjdGlvbi5sYWJlbCl9PC9oMz5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicmlnaHRcIj4ke3RhZyhzZWN0aW9uLnRvdGFsLmxhYmVsKX08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5DYXRlZ29yeTwvdGg+PHRoIGNsYXNzPVwibnVtXCI+Q3VycmVudDwvdGg+PHRoIGNsYXNzPVwibnVtXCI+UHJldmlvdXM8L3RoPjx0aCBjbGFzcz1cIm51bVwiPlZhcmlhbmNlPC90aD48dGggY2xhc3M9XCJudW1cIj5WYXIgJTwvdGg+PC90cj48L3RoZWFkPlxuICAgICAgICAgIDx0Ym9keT4ke3Jvd3N9PC90Ym9keT5cbiAgICAgICAgICA8dGZvb3Q+PHRyPjx0aD5Ub3RhbDwvdGg+PHRoIGNsYXNzPVwibnVtXCI+JHttb25leShzZWN0aW9uLnRvdGFsLmN1cnJlbnQpfTwvdGg+PHRoIGNsYXNzPVwibnVtXCI+JHttb25leShzZWN0aW9uLnRvdGFsLnByZXZpb3VzKX08L3RoPjx0aCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoc2VjdGlvbi50b3RhbC52YXJpYW5jZSl9PC90aD48dGggY2xhc3M9XCJudW1cIj4ke3NlY3Rpb24udG90YWwudmFyaWFuY2VfcGN0ID09PSBudWxsID8gXCItXCIgOiAoTWF0aC5yb3VuZChzZWN0aW9uLnRvdGFsLnZhcmlhbmNlX3BjdCAqIDEwMDApIC8gMTApICsgXCIlXCJ9PC90aD48L3RyPjwvdGZvb3Q+XG4gICAgICAgIDwvdGFibGU+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9O1xuXG4gIHJldHVybiBgXG4gIDxzZWN0aW9uIGNsYXNzPVwic2VjdGlvblwiIGlkPVwicGxjXCIgZGF0YS1zZWN0aW9uPVwicGxjXCIgZGF0YS1yZXBvcnQ9XCJjb21wYXJhdGl2ZS1wbFwiIGRhdGEtdGl0bGU9XCJDb21wYXJhdGl2ZSBQcm9maXQgJiBMb3NzXCIgZGF0YS1wZXJpb2Q9XCIke2VzYyhjbXAuY3VycmVudF9wZXJpb2QuZnJvbSB8fCBcIi1cIil9IOKGkiAke2VzYyhjbXAuY3VycmVudF9wZXJpb2QudG8gfHwgXCItXCIpfVwiPlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAke3NlY3Rpb25IZWFkZXJIVE1MKFwiQ29tcGFyYXRpdmUgUHJvZml0ICYgTG9zc1wiLCBgQ3VycmVudDogJHtjbXAuY3VycmVudF9wZXJpb2QuZnJvbSB8fCBcIi1cIn0g4oaSICR7Y21wLmN1cnJlbnRfcGVyaW9kLnRvIHx8IFwiLVwifWAsIFwiY29tcGFyYXRpdmUtcGxcIil9XG4gICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiPkN1cnJlbnQgcGVyaW9kOiAke2VzYyhjbXAuY3VycmVudF9wZXJpb2QuZnJvbSB8fCBcIi1cIil9IOKGkiAke2VzYyhjbXAuY3VycmVudF9wZXJpb2QudG8gfHwgXCItXCIpfSB8IFByZXZpb3VzOiAke2VzYyhjbXAucHJldmlvdXNfcGVyaW9kLmZyb20gfHwgXCItXCIpfSDihpIgJHtlc2MoY21wLnByZXZpb3VzX3BlcmlvZC50byB8fCBcIi1cIil9PC9kaXY+XG4gICAgPC9kaXY+XG4gICAgJHtyZW5kZXJTZWN0aW9uKGNtcC5pbmNvbWUpfVxuICAgICR7cmVuZGVyU2VjdGlvbihjbXAuZXhwZW5zZSl9XG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgIDxoMz5OZXQgUHJvZml0PC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD48L3RoPjx0aCBjbGFzcz1cIm51bVwiPkN1cnJlbnQ8L3RoPjx0aCBjbGFzcz1cIm51bVwiPlByZXZpb3VzPC90aD48dGggY2xhc3M9XCJudW1cIj5WYXJpYW5jZTwvdGg+PHRoIGNsYXNzPVwibnVtXCI+VmFyICU8L3RoPjwvdHI+PC90aGVhZD5cbiAgICAgIDx0Ym9keT48dHI+PHRkPk5ldCBQcm9maXQ8L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoY21wLm5ldF9wcm9maXQuY3VycmVudCl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KGNtcC5uZXRfcHJvZml0LnByZXZpb3VzKX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoY21wLm5ldF9wcm9maXQudmFyaWFuY2UpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHtjbXAubmV0X3Byb2ZpdC52YXJpYW5jZV9wY3QgPT09IG51bGwgPyBcIi1cIiA6IChNYXRoLnJvdW5kKGNtcC5uZXRfcHJvZml0LnZhcmlhbmNlX3BjdCAqIDEwMDApIC8gMTApICsgXCIlXCJ9PC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT5cbiAgICA8L2Rpdj5cbiAgPC9zZWN0aW9uPmA7XG59XG5cbmZ1bmN0aW9uIHNlY3Rpb25Db21wYXJhdGl2ZUJTKHJlcG9ydDogUmVwb3J0UmVzdWx0KTogc3RyaW5nIHtcbiAgY29uc3QgY21wID0gcmVwb3J0Lm1vZGVscy5jb21wYXJhdGl2ZUJhbGFuY2VTaGVldDtcbiAgaWYgKCFjbXApIHtcbiAgICByZXR1cm4gYFxuICAgIDxzZWN0aW9uIGNsYXNzPVwic2VjdGlvblwiIGlkPVwiYnNjXCIgZGF0YS1zZWN0aW9uPVwiYnNjXCIgZGF0YS1yZXBvcnQ9XCJjb21wYXJhdGl2ZS1ic1wiIGRhdGEtdGl0bGU9XCJDb21wYXJhdGl2ZSBCYWxhbmNlIFNoZWV0XCIgZGF0YS1wZXJpb2Q9XCJOL0FcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAgICR7c2VjdGlvbkhlYWRlckhUTUwoXCJDb21wYXJhdGl2ZSBCYWxhbmNlIFNoZWV0XCIsIFwiTi9BXCIsIFwiY29tcGFyYXRpdmUtYnNcIil9XG4gICAgICAgIDxkaXYgY2xhc3M9XCJub3RlXCI+UHJldmlvdXMgcGVyaW9kIG5vdCBhdmFpbGFibGUuPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L3NlY3Rpb24+YDtcbiAgfVxuXG4gIGNvbnN0IHJlbmRlclNlY3Rpb24gPSAoc2VjdGlvbjogdHlwZW9mIGNtcC5hc3NldHMpID0+IHtcbiAgICBjb25zdCByb3dzID0gc2VjdGlvbi5yb3dzLm1hcChyID0+IGBcbiAgICAgIDx0cj5cbiAgICAgICAgPHRkPiR7ZXNjKHIubGFiZWwpfTwvdGQ+XG4gICAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci5jdXJyZW50KX08L3RkPlxuICAgICAgICA8dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KHIucHJldmlvdXMpfTwvdGQ+XG4gICAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci52YXJpYW5jZSl9PC90ZD5cbiAgICAgICAgPHRkIGNsYXNzPVwibnVtXCI+JHtyLnZhcmlhbmNlX3BjdCA9PT0gbnVsbCA/IFwiLVwiIDogKE1hdGgucm91bmQoci52YXJpYW5jZV9wY3QgKiAxMDAwKSAvIDEwKSArIFwiJVwifTwvdGQ+XG4gICAgICA8L3RyPlxuICAgIGApLmpvaW4oXCJcIik7XG5cbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgICAgPGgzPiR7ZXNjKHNlY3Rpb24ubGFiZWwpfTwvaDM+XG4gICAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5BY2NvdW50PC90aD48dGggY2xhc3M9XCJudW1cIj5DdXJyZW50PC90aD48dGggY2xhc3M9XCJudW1cIj5QcmV2aW91czwvdGg+PHRoIGNsYXNzPVwibnVtXCI+VmFyaWFuY2U8L3RoPjx0aCBjbGFzcz1cIm51bVwiPlZhciAlPC90aD48L3RyPjwvdGhlYWQ+XG4gICAgICAgICAgPHRib2R5PiR7cm93c308L3Rib2R5PlxuICAgICAgICAgIDx0Zm9vdD48dHI+PHRoPlRvdGFsPC90aD48dGggY2xhc3M9XCJudW1cIj4ke21vbmV5KHNlY3Rpb24udG90YWwuY3VycmVudCl9PC90aD48dGggY2xhc3M9XCJudW1cIj4ke21vbmV5KHNlY3Rpb24udG90YWwucHJldmlvdXMpfTwvdGg+PHRoIGNsYXNzPVwibnVtXCI+JHttb25leShzZWN0aW9uLnRvdGFsLnZhcmlhbmNlKX08L3RoPjx0aCBjbGFzcz1cIm51bVwiPiR7c2VjdGlvbi50b3RhbC52YXJpYW5jZV9wY3QgPT09IG51bGwgPyBcIi1cIiA6IChNYXRoLnJvdW5kKHNlY3Rpb24udG90YWwudmFyaWFuY2VfcGN0ICogMTAwMCkgLyAxMCkgKyBcIiVcIn08L3RoPjwvdHI+PC90Zm9vdD5cbiAgICAgICAgPC90YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH07XG5cbiAgcmV0dXJuIGBcbiAgPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uXCIgaWQ9XCJic2NcIiBkYXRhLXNlY3Rpb249XCJic2NcIiBkYXRhLXJlcG9ydD1cImNvbXBhcmF0aXZlLWJzXCIgZGF0YS10aXRsZT1cIkNvbXBhcmF0aXZlIEJhbGFuY2UgU2hlZXRcIiBkYXRhLXBlcmlvZD1cIiR7ZXNjKGNtcC5jdXJyZW50X2FzX29mIHx8IFwiLVwiKX1cIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgJHtzZWN0aW9uSGVhZGVySFRNTChcIkNvbXBhcmF0aXZlIEJhbGFuY2UgU2hlZXRcIiwgYEFzIG9mOiAke2NtcC5jdXJyZW50X2FzX29mIHx8IFwiLVwifWAsIFwiY29tcGFyYXRpdmUtYnNcIil9XG4gICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiPkFzLW9mIGN1cnJlbnQ6ICR7ZXNjKGNtcC5jdXJyZW50X2FzX29mIHx8IFwiLVwiKX0gfCBBcy1vZiBwcmV2aW91czogJHtlc2MoY21wLnByZXZpb3VzX2FzX29mIHx8IFwiLVwiKX08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICAke3JlbmRlclNlY3Rpb24oY21wLmFzc2V0cyl9XG4gICAgJHtyZW5kZXJTZWN0aW9uKGNtcC5saWFiaWxpdGllcyl9XG4gICAgJHtyZW5kZXJTZWN0aW9uKGNtcC5lcXVpdHkpfVxuICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICA8aDM+VG90YWxzPC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD48L3RoPjx0aCBjbGFzcz1cIm51bVwiPkN1cnJlbnQ8L3RoPjx0aCBjbGFzcz1cIm51bVwiPlByZXZpb3VzPC90aD48dGggY2xhc3M9XCJudW1cIj5WYXJpYW5jZTwvdGg+PHRoIGNsYXNzPVwibnVtXCI+VmFyICU8L3RoPjwvdHI+PC90aGVhZD5cbiAgICAgIDx0Ym9keT5cbiAgICAgICAgPHRyPjx0ZD4ke2VzYyhjbXAudG90YWxzLmFzc2V0cy5sYWJlbCl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KGNtcC50b3RhbHMuYXNzZXRzLmN1cnJlbnQpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHttb25leShjbXAudG90YWxzLmFzc2V0cy5wcmV2aW91cyl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KGNtcC50b3RhbHMuYXNzZXRzLnZhcmlhbmNlKX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7Y21wLnRvdGFscy5hc3NldHMudmFyaWFuY2VfcGN0ID09PSBudWxsID8gXCItXCIgOiAoTWF0aC5yb3VuZChjbXAudG90YWxzLmFzc2V0cy52YXJpYW5jZV9wY3QgKiAxMDAwKSAvIDEwKSArIFwiJVwifTwvdGQ+PC90cj5cbiAgICAgICAgPHRyPjx0ZD4ke2VzYyhjbXAudG90YWxzLmxpYWJpbGl0aWVzLmxhYmVsKX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoY21wLnRvdGFscy5saWFiaWxpdGllcy5jdXJyZW50KX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoY21wLnRvdGFscy5saWFiaWxpdGllcy5wcmV2aW91cyl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KGNtcC50b3RhbHMubGlhYmlsaXRpZXMudmFyaWFuY2UpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHtjbXAudG90YWxzLmxpYWJpbGl0aWVzLnZhcmlhbmNlX3BjdCA9PT0gbnVsbCA/IFwiLVwiIDogKE1hdGgucm91bmQoY21wLnRvdGFscy5saWFiaWxpdGllcy52YXJpYW5jZV9wY3QgKiAxMDAwKSAvIDEwKSArIFwiJVwifTwvdGQ+PC90cj5cbiAgICAgICAgPHRyPjx0ZD4ke2VzYyhjbXAudG90YWxzLmVxdWl0eS5sYWJlbCl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KGNtcC50b3RhbHMuZXF1aXR5LmN1cnJlbnQpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHttb25leShjbXAudG90YWxzLmVxdWl0eS5wcmV2aW91cyl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KGNtcC50b3RhbHMuZXF1aXR5LnZhcmlhbmNlKX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7Y21wLnRvdGFscy5lcXVpdHkudmFyaWFuY2VfcGN0ID09PSBudWxsID8gXCItXCIgOiAoTWF0aC5yb3VuZChjbXAudG90YWxzLmVxdWl0eS52YXJpYW5jZV9wY3QgKiAxMDAwKSAvIDEwKSArIFwiJVwifTwvdGQ+PC90cj5cbiAgICAgICAgPHRyPjx0ZD4ke2VzYyhjbXAudG90YWxzLmxpYWJpbGl0aWVzX3BsdXNfZXF1aXR5LmxhYmVsKX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoY21wLnRvdGFscy5saWFiaWxpdGllc19wbHVzX2VxdWl0eS5jdXJyZW50KX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoY21wLnRvdGFscy5saWFiaWxpdGllc19wbHVzX2VxdWl0eS5wcmV2aW91cyl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KGNtcC50b3RhbHMubGlhYmlsaXRpZXNfcGx1c19lcXVpdHkudmFyaWFuY2UpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHtjbXAudG90YWxzLmxpYWJpbGl0aWVzX3BsdXNfZXF1aXR5LnZhcmlhbmNlX3BjdCA9PT0gbnVsbCA/IFwiLVwiIDogKE1hdGgucm91bmQoY21wLnRvdGFscy5saWFiaWxpdGllc19wbHVzX2VxdWl0eS52YXJpYW5jZV9wY3QgKiAxMDAwKSAvIDEwKSArIFwiJVwifTwvdGQ+PC90cj5cbiAgICAgIDwvdGJvZHk+XG4gICAgICA8L3RhYmxlPlxuICAgIDwvZGl2PlxuICA8L3NlY3Rpb24+YDtcbn1cblxuZnVuY3Rpb24gc2VjdGlvbkFjY291bnRNb3ZlbWVudChyZXBvcnQ6IFJlcG9ydFJlc3VsdCk6IHN0cmluZyB7XG4gIGNvbnN0IG12ID0gcmVwb3J0Lm1vZGVscy5hY2NvdW50TW92ZW1lbnQ7XG4gIGNvbnN0IHBlcmlvZCA9IGBQZXJpb2Q6ICR7cmVwb3J0LnBlcmlvZEZyb20gfHwgXCItXCJ9IOKGkiAke3JlcG9ydC5wZXJpb2RUbyB8fCBcIi1cIn1gO1xuICBjb25zdCByb3dzID0gbXYuZ3JvdXBlZC5yb3dzLm1hcChyID0+IGBcbiAgICA8dHI+XG4gICAgICA8dGQ+JHtlc2Moci5hY2NvdW50LmFjY291bnRfbmFtZSl9PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz1cIm11dGVkXCI+JHtlc2Moci5hY2NvdW50LmFjY291bnRfdHlwZSl9PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci5vcGVuaW5nX2JhbGFuY2UpfTwvdGQ+XG4gICAgICA8dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KHIuZGViaXQpfTwvdGQ+XG4gICAgICA8dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KHIuY3JlZGl0KX08L3RkPlxuICAgICAgPHRkIGNsYXNzPVwibnVtXCI+JHttb25leShyLm5ldF9tb3ZlbWVudCl9PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci5jbG9zaW5nX2JhbGFuY2UpfTwvdGQ+XG4gICAgICA8dGQ+JHthdWRpdExpbmsoci50cmFjZSl9PC90ZD5cbiAgICA8L3RyPlxuICBgKS5qb2luKFwiXCIpO1xuXG4gIHJldHVybiBgXG4gIDxzZWN0aW9uIGNsYXNzPVwic2VjdGlvblwiIGlkPVwibW92ZW1lbnRcIiBkYXRhLXNlY3Rpb249XCJtb3ZlbWVudFwiIGRhdGEtcmVwb3J0PVwiYWNjb3VudC1tb3ZlbWVudFwiIGRhdGEtdGl0bGU9XCJBY2NvdW50IE1vdmVtZW50IFN1bW1hcnlcIiBkYXRhLXBlcmlvZD1cIiR7ZXNjKHBlcmlvZCl9XCI+XG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgICR7c2VjdGlvbkhlYWRlckhUTUwoXCJBY2NvdW50IE1vdmVtZW50IFN1bW1hcnlcIiwgcGVyaW9kLCBcImFjY291bnQtbW92ZW1lbnRcIil9XG4gICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiPk9wZW5pbmcgKyBwZXJpb2QgbW92ZW1lbnQgPSBjbG9zaW5nLiBVc2VmdWwgZm9yIGF1ZGl0IHJlYWRpbmVzcy48L2Rpdj5cbiAgICAgIDx0YWJsZT5cbiAgICAgICAgPHRoZWFkPjx0cj5cbiAgICAgICAgICA8dGg+QWt1bjwvdGg+PHRoPlRpcGU8L3RoPjx0aCBjbGFzcz1cIm51bVwiPk9wZW5pbmc8L3RoPjx0aCBjbGFzcz1cIm51bVwiPkRlYml0PC90aD48dGggY2xhc3M9XCJudW1cIj5DcmVkaXQ8L3RoPjx0aCBjbGFzcz1cIm51bVwiPk5ldDwvdGg+PHRoIGNsYXNzPVwibnVtXCI+Q2xvc2luZzwvdGg+PHRoPlRyYWNlPC90aD5cbiAgICAgICAgPC90cj48L3RoZWFkPlxuICAgICAgICA8dGJvZHk+JHtyb3dzIHx8IFwiXCJ9PC90Ym9keT5cbiAgICAgICAgPHRmb290PlxuICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgIDx0aCBjb2xzcGFuPVwiMlwiIGNsYXNzPVwibnVtXCI+VG90YWw8L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzPVwibnVtXCI+JHttb25leShtdi50b3RhbHMub3BlbmluZ19iYWxhbmNlKX08L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzPVwibnVtXCI+JHttb25leShtdi50b3RhbHMuZGViaXQpfTwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3M9XCJudW1cIj4ke21vbmV5KG12LnRvdGFscy5jcmVkaXQpfTwvdGg+XG4gICAgICAgICAgICA8dGggY2xhc3M9XCJudW1cIj4ke21vbmV5KG12LnRvdGFscy5jbG9zaW5nX2JhbGFuY2UgLSBtdi50b3RhbHMub3BlbmluZ19iYWxhbmNlKX08L3RoPlxuICAgICAgICAgICAgPHRoIGNsYXNzPVwibnVtXCI+JHttb25leShtdi50b3RhbHMuY2xvc2luZ19iYWxhbmNlKX08L3RoPlxuICAgICAgICAgICAgPHRoPjwvdGg+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgPC90Zm9vdD5cbiAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5gO1xufVxuXG5mdW5jdGlvbiBzZWN0aW9uQXVkaXRUcmFpbChyZXBvcnQ6IFJlcG9ydFJlc3VsdCk6IHN0cmluZyB7XG4gIGNvbnN0IGVudHJpZXMgPSByZXBvcnQubW9kZWxzLmF1ZGl0VHJhaWwuZ3JvdXBlZC5lbnRyaWVzO1xuICBjb25zdCBwZXJpb2QgPSBgUGVyaW9kOiAke3JlcG9ydC5wZXJpb2RGcm9tIHx8IFwiLVwifSDihpIgJHtyZXBvcnQucGVyaW9kVG8gfHwgXCItXCJ9YDtcblxuICBjb25zdCByb3dzID0gZW50cmllcy5tYXAoZSA9PiBgXG4gICAgPHRyIGRhdGEtZmlsdGVyLXJvdz1cImF1ZGl0XCIgZGF0YS1kYXRlPVwiJHtlc2MoZS5kYXRlIHx8IFwiXCIpfVwiIGRhdGEtdGV4dD1cIiR7ZXNjKGAke2Uuam91cm5hbF9oZWFkZXJfaWR9ICR7ZS5kZXNjcmlwdGlvbn1gKX1cIj5cbiAgICAgIDx0ZD4ke2VzYyhlLmRhdGUgfHwgXCItXCIpfTwvdGQ+XG4gICAgICA8dGQgY2xhc3M9XCJtdXRlZFwiPiR7ZXNjKGUuam91cm5hbF9oZWFkZXJfaWQpfTwvdGQ+XG4gICAgICA8dGQ+JHtlc2MoZS5kZXNjcmlwdGlvbiB8fCBcIlwiKX08L3RkPlxuICAgICAgPHRkIGNsYXNzPVwibnVtXCI+JHttb25leShlLnRvdGFsX2RlYml0KX08L3RkPlxuICAgICAgPHRkIGNsYXNzPVwibnVtXCI+JHttb25leShlLnRvdGFsX2NyZWRpdCl9PC90ZD5cbiAgICAgIDx0ZD4ke2UuaXNfYmFsYW5jZWQgPyB0YWcoXCJPS1wiLCBcIm9rXCIpIDogdGFnKFwiTk9UIE9LXCIsIFwiYmFkXCIpfTwvdGQ+XG4gICAgPC90cj5cbiAgICA8dHIgZGF0YS1maWx0ZXItcm93PVwiYXVkaXRcIiBkYXRhLWRhdGU9XCIke2VzYyhlLmRhdGUgfHwgXCJcIil9XCIgZGF0YS10ZXh0PVwiJHtlc2MoYCR7ZS5qb3VybmFsX2hlYWRlcl9pZH0gJHtlLmRlc2NyaXB0aW9ufWApfVwiPlxuICAgICAgPHRkIGNvbHNwYW49XCI2XCIgY2xhc3M9XCJhdWRpdC1kZXRhaWwtY2VsbFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiYXVkaXQtZGV0YWlsLXdyYXBcIj5cbiAgICAgICAgICA8dGFibGUgY2xhc3M9XCJhdWRpdC1kZXRhaWxcIj5cbiAgICAgICAgICAgIDxjb2xncm91cD5cbiAgICAgICAgICAgICAgPGNvbCBzdHlsZT1cIndpZHRoOjEyMHB4XCIgLz5cbiAgICAgICAgICAgICAgPGNvbCBzdHlsZT1cIndpZHRoOjIwMHB4XCIgLz5cbiAgICAgICAgICAgICAgPGNvbCAvPlxuICAgICAgICAgICAgICA8Y29sIHN0eWxlPVwid2lkdGg6MTQwcHhcIiAvPlxuICAgICAgICAgICAgICA8Y29sIHN0eWxlPVwid2lkdGg6MTQwcHhcIiAvPlxuICAgICAgICAgICAgICA8Y29sIHN0eWxlPVwid2lkdGg6OTBweFwiIC8+XG4gICAgICAgICAgICA8L2NvbGdyb3VwPlxuICAgICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgPHRoPlRhbmdnYWw8L3RoPjx0aD5BY2NvdW50PC90aD48dGg+RGVzY3JpcHRpb248L3RoPjx0aCBjbGFzcz1cIm51bVwiPkRlYml0PC90aD48dGggY2xhc3M9XCJudW1cIj5DcmVkaXQ8L3RoPjx0aD5TdGF0dXM8L3RoPlxuICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgJHtlLmxpbmVzLm1hcChsID0+IGBcbiAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICA8dGQ+JHtlc2MobC50cmFuc2FjdGlvbl9kYXRlIHx8IFwiLVwiKX08L3RkPlxuICAgICAgICAgICAgICAgICAgPHRkPiR7ZXNjKGwuYWNjb3VudF9uYW1lKX08L3RkPlxuICAgICAgICAgICAgICAgICAgPHRkPiR7ZXNjKGwuZGVzY3JpcHRpb24gfHwgXCJcIil9PC90ZD5cbiAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkobC5kZWJpdCl9PC90ZD5cbiAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkobC5jcmVkaXQpfTwvdGQ+XG4gICAgICAgICAgICAgICAgICA8dGQ+JHtlc2MobC5zdGF0dXMgfHwgXCItXCIpfTwvdGQ+XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgYCkuam9pbihcIlwiKX1cbiAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3RkPlxuICAgIDwvdHI+XG4gIGApLmpvaW4oXCJcIik7XG5cbiAgcmV0dXJuIGBcbiAgPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uXCIgaWQ9XCJhdWRpdFwiIGRhdGEtc2VjdGlvbj1cImF1ZGl0XCIgZGF0YS1yZXBvcnQ9XCJhdWRpdC10cmFpbFwiIGRhdGEtdGl0bGU9XCJBdWRpdCBUcmFpbFwiIGRhdGEtcGVyaW9kPVwiJHtlc2MocGVyaW9kKX1cIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgJHtzZWN0aW9uSGVhZGVySFRNTChcIkF1ZGl0IFRyYWlsXCIsIHBlcmlvZCwgXCJhdWRpdC10cmFpbFwiKX1cbiAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uLXRpdGxlXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPiR7dGFnKGBFbnRyaWVzOiAke2VudHJpZXMubGVuZ3RofWApfTwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiPkRldGFpbCBqb3VybmFsIHBlciBoZWFkZXIgSUQgKGRyaWxsLWRvd24gbGluZXMpLjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInRvb2xiYXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4gICAgICAgICAgPGlucHV0IGlkPVwiYXVkaXRGcm9tXCIgY2xhc3M9XCJpbnB1dFwiIHR5cGU9XCJkYXRlXCIgLz5cbiAgICAgICAgICA8aW5wdXQgaWQ9XCJhdWRpdFRvXCIgY2xhc3M9XCJpbnB1dFwiIHR5cGU9XCJkYXRlXCIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxpbnB1dCBpZD1cImF1ZGl0U2VhcmNoXCIgY2xhc3M9XCJpbnB1dFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoIGhlYWRlci9kZXNjcmlwdGlvbi4uLlwiIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDx0YWJsZT5cbiAgICAgICAgPHRoZWFkPjx0cj5cbiAgICAgICAgICA8dGg+VGFuZ2dhbDwvdGg+PHRoPkpvdXJuYWwgSGVhZGVyIElEPC90aD48dGg+RGVza3JpcHNpPC90aD5cbiAgICAgICAgICA8dGggY2xhc3M9XCJudW1cIj5EZWJpdDwvdGg+PHRoIGNsYXNzPVwibnVtXCI+Q3JlZGl0PC90aD48dGg+U3RhdHVzPC90aD5cbiAgICAgICAgPC90cj48L3RoZWFkPlxuICAgICAgICA8dGJvZHk+JHtyb3dzIHx8IFwiXCJ9PC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5gO1xufVxuXG5mdW5jdGlvbiBzZWN0aW9uQW5hbHl0aWNzKHJlcG9ydDogUmVwb3J0UmVzdWx0KTogc3RyaW5nIHtcbiAgY29uc3QgYSA9IHJlcG9ydC5tb2RlbHMuYWN0aXZpdHlTdW1tYXJ5O1xuICBjb25zdCBwZXJpb2QgPSBgUGVyaW9kOiAke3JlcG9ydC5wZXJpb2RGcm9tIHx8IFwiLVwifSDihpIgJHtyZXBvcnQucGVyaW9kVG8gfHwgXCItXCJ9YDtcblxuICBjb25zdCBieVR5cGUgPSBhLmJ5X3R5cGUubWFwKHggPT4gYFxuICAgIDx0cj48dGQ+JHtlc2MoeC50eXBlKX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoeC5kZWJpdCl9PC90ZD48dGQgY2xhc3M9XCJudW1cIj4ke21vbmV5KHguY3JlZGl0KX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7ZXNjKHgubGluZXMpfTwvdGQ+PC90cj5cbiAgYCkuam9pbihcIlwiKTtcblxuICBjb25zdCBieUNhdCA9IGEuYnlfY2F0ZWdvcnkuc2xpY2UoMCwgNTApLm1hcCh4ID0+IGBcbiAgICA8dHI+PHRkPiR7ZXNjKHguY2F0ZWdvcnkpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHttb25leSh4LmRlYml0KX08L3RkPjx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoeC5jcmVkaXQpfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHtlc2MoeC5saW5lcyl9PC90ZD48L3RyPlxuICBgKS5qb2luKFwiXCIpO1xuXG4gIGNvbnN0IHRvcDEwID0gYS50b3AxMF9saW5lcy5tYXAoeCA9PiBgXG4gICAgPHRyPjx0ZD4ke2VzYyh4LnRyYW5zYWN0aW9uX2RhdGUgfHwgXCItXCIpfTwvdGQ+PHRkPiR7ZXNjKHguYWNjb3VudF9uYW1lKX08L3RkPjx0ZCBjbGFzcz1cIm11dGVkXCI+JHtlc2MoeC5hY2NvdW50X3R5cGUpfTwvdGQ+PHRkPiR7ZXNjKHguZGVzY3JpcHRpb24pfTwvdGQ+PHRkIGNsYXNzPVwibnVtXCI+JHttb25leShNYXRoLm1heCh4LmRlYml0LCB4LmNyZWRpdCkpfTwvdGQ+PC90cj5cbiAgYCkuam9pbihcIlwiKTtcblxuICByZXR1cm4gYFxuICA8c2VjdGlvbiBjbGFzcz1cInNlY3Rpb25cIiBpZD1cImFuYWx5dGljc1wiIGRhdGEtc2VjdGlvbj1cImFuYWx5dGljc1wiIGRhdGEtcmVwb3J0PVwiYW5hbHl0aWNzXCIgZGF0YS10aXRsZT1cIkVudGVycHJpc2UgQW5hbHl0aWNzXCIgZGF0YS1wZXJpb2Q9XCIke2VzYyhwZXJpb2QpfVwiPlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICAke3NlY3Rpb25IZWFkZXJIVE1MKFwiRW50ZXJwcmlzZSBBbmFseXRpY3NcIiwgcGVyaW9kLCBcImFuYWx5dGljc1wiKX1cbiAgICAgIDxkaXYgY2xhc3M9XCJncmlkXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJrcGlcIj48ZGl2IGNsYXNzPVwibGFiZWxcIj5VbmlxdWUgQWNjb3VudHM8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHtlc2MoYS51bmlxdWVfYWNjb3VudHMpfTwvZGl2PjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwia3BpXCI+PGRpdiBjbGFzcz1cImxhYmVsXCI+VG9wIFRyYW5zYWN0aW9ucyBMaXN0ZWQ8L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+MTA8L2Rpdj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImtwaVwiPjxkaXYgY2xhc3M9XCJsYWJlbFwiPkNhdGVnb3J5IFJvd3MgU2hvd248L2Rpdj48ZGl2IGNsYXNzPVwidmFsXCI+JHtNYXRoLm1pbig1MCwgcmVwb3J0Lm1vZGVscy5hY3Rpdml0eVN1bW1hcnkuYnlfY2F0ZWdvcnkubGVuZ3RoKX08L2Rpdj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImtwaVwiPjxkaXYgY2xhc3M9XCJsYWJlbFwiPk5vdGVzPC9kaXY+PGRpdiBjbGFzcz1cInZhbFwiPkF1ZGl0LXJlYWR5PC9kaXY+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJjYXJkXCI+XG4gICAgICA8aDM+QnkgQWNjb3VudCBUeXBlPC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5UeXBlPC90aD48dGggY2xhc3M9XCJudW1cIj5EZWJpdDwvdGg+PHRoIGNsYXNzPVwibnVtXCI+Q3JlZGl0PC90aD48dGggY2xhc3M9XCJudW1cIj5MaW5lczwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT4ke2J5VHlwZX08L3Rib2R5PjwvdGFibGU+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgPGgzPkJ5IENhdGVnb3J5IChUb3AgNTApPC9oMz5cbiAgICAgIDx0YWJsZT48dGhlYWQ+PHRyPjx0aD5DYXRlZ29yeTwvdGg+PHRoIGNsYXNzPVwibnVtXCI+RGViaXQ8L3RoPjx0aCBjbGFzcz1cIm51bVwiPkNyZWRpdDwvdGg+PHRoIGNsYXNzPVwibnVtXCI+TGluZXM8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtieUNhdH08L3Rib2R5PjwvdGFibGU+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZFwiPlxuICAgICAgPGgzPlRvcCAxMCBMYXJnZXN0IEpvdXJuYWwgTGluZXM8L2gzPlxuICAgICAgPHRhYmxlPjx0aGVhZD48dHI+PHRoPkRhdGU8L3RoPjx0aD5BY2NvdW50PC90aD48dGg+VHlwZTwvdGg+PHRoPkRlc2NyaXB0aW9uPC90aD48dGggY2xhc3M9XCJudW1cIj5NYWduaXR1ZGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHt0b3AxMH08L3Rib2R5PjwvdGFibGU+XG4gICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5gO1xufVxuXG5mdW5jdGlvbiBzZWN0aW9uUmF3RGF0YShyZXBvcnQ6IFJlcG9ydFJlc3VsdCk6IHN0cmluZyB7XG4gIGNvbnN0IHBlcmlvZCA9IGBQZXJpb2Q6ICR7cmVwb3J0LnBlcmlvZEZyb20gfHwgXCItXCJ9IOKGkiAke3JlcG9ydC5wZXJpb2RUbyB8fCBcIi1cIn1gO1xuICBjb25zdCByb3dzID0gcmVwb3J0LmpvdXJuYWxzLm1hcCgociwgaWR4KSA9PiBgXG4gICAgPHRyIGRhdGEtcmF3LXJvdz1cIiR7aWR4fVwiPlxuICAgICAgPHRkPiR7ZXNjKHIudHJhbnNhY3Rpb25fZGF0ZSB8fCBcIi1cIil9PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz1cIm11dGVkXCI+JHtlc2Moci5qb3VybmFsX2hlYWRlcl9pZCl9PC90ZD5cbiAgICAgIDx0ZD4ke2VzYyhyLmFjY291bnRfbmFtZSl9PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci5kZWJpdCl9PC90ZD5cbiAgICAgIDx0ZCBjbGFzcz1cIm51bVwiPiR7bW9uZXkoci5jcmVkaXQpfTwvdGQ+XG4gICAgICA8dGQ+JHtlc2Moci5pc19jYXNoX2FjY291bnQgPyBcInRydWVcIiA6IFwiZmFsc2VcIil9PC90ZD5cbiAgICAgIDx0ZD4ke2VzYyhyLmNhc2hmbG93X2FjdGl2aXR5IHx8IFwiXCIpfTwvdGQ+XG4gICAgICA8dGQ+JHtlc2Moci5kZXNjcmlwdGlvbiB8fCBcIlwiKX08L3RkPlxuICAgIDwvdHI+XG4gIGApLmpvaW4oXCJcIik7XG5cbiAgcmV0dXJuIGBcbiAgPHNlY3Rpb24gY2xhc3M9XCJzZWN0aW9uXCIgaWQ9XCJkYXRhXCIgZGF0YS1zZWN0aW9uPVwiZGF0YVwiIGRhdGEtcmVwb3J0PVwicmF3LWRhdGFcIiBkYXRhLXRpdGxlPVwiUmF3IERhdGFcIiBkYXRhLXBlcmlvZD1cIiR7ZXNjKHBlcmlvZCl9XCI+XG4gICAgPGRpdiBjbGFzcz1cImNhcmRcIj5cbiAgICAgICR7c2VjdGlvbkhlYWRlckhUTUwoXCJSYXcgRGF0YVwiLCBwZXJpb2QsIFwicmF3LWRhdGFcIil9XG4gICAgICA8ZGl2IGNsYXNzPVwibm90ZVwiPkRhdGEgbWVudGFoIGp1cm5hbCB1bnR1ayBrZWJ1dHVoYW4gYXVkaXQgZGFuIHZlcmlmaWthc2kgaW50ZXJuYWwuIEd1bmFrYW4gcGFnaW5hdGlvbiB1bnR1ayBtZWxpaGF0IGRhdGEgc2VjYXJhIGJlcnRhaGFwLjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInRvb2xiYXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBhZ2VyXCI+XG4gICAgICAgICAgPGJ1dHRvbiBpZD1cInJhd1ByZXZcIiBjbGFzcz1cImJ0blwiIHR5cGU9XCJidXR0b25cIj5QcmV2PC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBpZD1cInJhd05leHRcIiBjbGFzcz1cImJ0blwiIHR5cGU9XCJidXR0b25cIj5OZXh0PC9idXR0b24+XG4gICAgICAgICAgPHNwYW4gaWQ9XCJyYXdQYWdlSW5mb1wiIGNsYXNzPVwiY291bnRcIj5QYWdlIDEgLyAxPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBpZD1cInJhd0NvdW50XCIgY2xhc3M9XCJjb3VudFwiPjAgcm93czwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8dGFibGU+XG4gICAgICAgIDx0aGVhZD48dHI+XG4gICAgICAgICAgPHRoPkRhdGU8L3RoPjx0aD5IZWFkZXI8L3RoPjx0aD5BY2NvdW50PC90aD5cbiAgICAgICAgICA8dGggY2xhc3M9XCJudW1cIj5EZWJpdDwvdGg+PHRoIGNsYXNzPVwibnVtXCI+Q3JlZGl0PC90aD5cbiAgICAgICAgICA8dGg+aXNfY2FzaDwvdGg+PHRoPmFjdGl2aXR5PC90aD48dGg+RGVzY3JpcHRpb248L3RoPlxuICAgICAgICA8L3RyPjwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT4ke3Jvd3MgfHwgXCJcIn08L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICA8L2Rpdj5cbiAgPC9zZWN0aW9uPmA7XG59XG4iXSwibmFtZXMiOlsiZm9ybWF0SURSIiwiQlJBTkQiLCJwcmltYXJ5IiwiYWNjZW50IiwidGV4dCIsIm11dGVkIiwibGluZSIsInNvZnQiLCJjYXJkIiwiZXNjIiwicyIsIlN0cmluZyIsInJlcGxhY2UiLCJjIiwibW9uZXkiLCJuIiwidGFnIiwibGFiZWwiLCJ0b25lIiwiYmciLCJmZyIsInNlY3Rpb25IZWFkZXJIVE1MIiwidGl0bGUiLCJwZXJpb2QiLCJyZXBvcnRJZCIsImF1ZGl0TGluayIsInRyYWNlIiwiaGVhZGVyX2lkcyIsImxlbmd0aCIsImhlYWRlcnMiLCJqb2luIiwiY291bnQiLCJyZW5kZXJUYWJiZWRIVE1MIiwicmVwb3J0IiwiY29tcGFueSIsImxvZ28iLCJhZGRyZXNzIiwiY29udGFjdCIsInBlcmlvZEZyb20iLCJwZXJpb2RUbyIsImNoZWNrcyIsIm1vZGVscyIsImdlbkF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidGFicyIsImlkIiwiaGVhZGVyIiwic2xpY2UiLCJ0YWJzSHRtbCIsIm1hcCIsInQiLCJib2R5Iiwic2VjdGlvbkRhc2hib2FyZCIsInNlY3Rpb25Kb3VybmFsUmVnaXN0ZXIiLCJzZWN0aW9uR2VuZXJhbExlZGdlciIsInNlY3Rpb25UcmlhbEJhbGFuY2UiLCJzZWN0aW9uUHJvZml0TG9zcyIsInNlY3Rpb25CYWxhbmNlU2hlZXQiLCJzZWN0aW9uQ2FzaGZsb3ciLCJzZWN0aW9uRXF1aXR5Q2hhbmdlcyIsInNlY3Rpb25Db21wYXJhdGl2ZVBMIiwic2VjdGlvbkNvbXBhcmF0aXZlQlMiLCJzZWN0aW9uQWNjb3VudE1vdmVtZW50Iiwic2VjdGlvbkF1ZGl0VHJhaWwiLCJzZWN0aW9uQW5hbHl0aWNzIiwic2VjdGlvblJhd0RhdGEiLCJ0YiIsInRyaWFsQmFsYW5jZSIsInBsIiwicHJvZml0TG9zcyIsImJzIiwiYmFsYW5jZVNoZWV0IiwiY2YiLCJjYXNoZmxvdyIsImJhbGFuY2VkVGFnIiwiaXNCYWxhbmNlZCIsInJvd0NvdW50IiwibWlzc2luZ0RhdGVzIiwidG90YWxEZWJpdCIsInRvdGFsQ3JlZGl0IiwidG90YWxzIiwibmV0X3Byb2ZpdCIsIm5ldF9jaGFuZ2UiLCJhc3NldHMiLCJsaWFiaWxpdGllcyIsImVxdWl0eSIsImJhbGFuY2VfZGlmZiIsInZhbGlkYXRpb25zIiwiaXNfYmFsYW5jZWQiLCJvcGVuaW5nX2JhbGFuY2UiLCJkZWJpdCIsImNyZWRpdCIsImNsb3NpbmdfZGViaXQiLCJjbG9zaW5nX2NyZWRpdCIsImVudHJpZXMiLCJqb3VybmFsUmVnaXN0ZXIiLCJncm91cGVkIiwicm93cyIsImUiLCJkYXRlIiwiam91cm5hbF9oZWFkZXJfaWQiLCJkZXNjcmlwdGlvbiIsInRvdGFsX2RlYml0IiwidG90YWxfY3JlZGl0IiwiYWNjb3VudHMiLCJnZW5lcmFsTGVkZ2VyIiwiZ2xDYXJkcyIsImFjYyIsImRheVJvd3MiLCJkYXlzIiwiZGF5IiwibGluZXMiLCJyIiwidHJhbnNhY3Rpb25fZGF0ZSIsImJhbGFuY2UiLCJkYXlfZGViaXQiLCJkYXlfY3JlZGl0IiwiYWNjb3VudCIsImFjY291bnRfbmFtZSIsImFjY291bnRfdHlwZSIsImFjY291bnRfY2F0ZWdvcnkiLCJrZWxvbXBva19uZXJhY2EiLCJjbG9zaW5nX2JhbGFuY2UiLCJqb3VybmFsX2xpbmVzIiwiZ3JvdXBCbG9jayIsImdyb3VwIiwiY2F0cyIsImNhdGVnb3JpZXMiLCJhIiwiYW1vdW50IiwiY2F0ZWdvcnkiLCJ0eXBlIiwidG90YWwiLCJpbmNvbWUiLCJleHBlbnNlIiwiTWF0aCIsInJvdW5kIiwicmVuZGVyIiwiYXJyIiwic29ydCIsImIiLCJsb2NhbGVDb21wYXJlIiwiYXNzZXRzX2N1cnJlbnQiLCJhc3NldHNfbm9uY3VycmVudCIsImFzc2V0c191bmNhdGVnb3JpemVkIiwibGlhYmlsaXRpZXNfc2hvcnQiLCJsaWFiaWxpdGllc19sb25nIiwibGlhYmlsaXRpZXNfdW5jYXRlZ29yaXplZCIsImFjdGl2aXR5IiwicmF3X3Jvd3MiLCJvcGVyYXRpbmciLCJpbnZlc3RpbmciLCJmaW5hbmNpbmciLCJ1bmNhdGVnb3JpemVkIiwiZXEiLCJlcXVpdHlDaGFuZ2VzIiwib3BlbmluZ19lcXVpdHkiLCJlcXVpdHlfaW5jcmVhc2UiLCJlcXVpdHlfZGVjcmVhc2UiLCJjbG9zaW5nX2VxdWl0eSIsImNtcCIsImNvbXBhcmF0aXZlUHJvZml0TG9zcyIsInJlbmRlclNlY3Rpb24iLCJzZWN0aW9uIiwiY3VycmVudCIsInByZXZpb3VzIiwidmFyaWFuY2UiLCJ2YXJpYW5jZV9wY3QiLCJjdXJyZW50X3BlcmlvZCIsImZyb20iLCJ0byIsInByZXZpb3VzX3BlcmlvZCIsImNvbXBhcmF0aXZlQmFsYW5jZVNoZWV0IiwiY3VycmVudF9hc19vZiIsInByZXZpb3VzX2FzX29mIiwibGlhYmlsaXRpZXNfcGx1c19lcXVpdHkiLCJtdiIsImFjY291bnRNb3ZlbWVudCIsIm5ldF9tb3ZlbWVudCIsImF1ZGl0VHJhaWwiLCJsIiwic3RhdHVzIiwiYWN0aXZpdHlTdW1tYXJ5IiwiYnlUeXBlIiwiYnlfdHlwZSIsIngiLCJieUNhdCIsImJ5X2NhdGVnb3J5IiwidG9wMTAiLCJ0b3AxMF9saW5lcyIsIm1heCIsInVuaXF1ZV9hY2NvdW50cyIsIm1pbiIsImpvdXJuYWxzIiwiaWR4IiwiaXNfY2FzaF9hY2NvdW50IiwiY2FzaGZsb3dfYWN0aXZpdHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/html.ts\n");

/***/ }),

/***/ "(api)/./lib/report/accountMovement.ts":
/*!***************************************!*\
  !*** ./lib/report/accountMovement.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcAccountMovementSummary: () => (/* binding */ calcAccountMovementSummary)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n/* harmony import */ var _accounting__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accounting */ \"(api)/./lib/report/accounting.ts\");\n/* harmony import */ var _accountingLogic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./accountingLogic */ \"(api)/./lib/report/accountingLogic.ts\");\n/* harmony import */ var _validations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validations */ \"(api)/./lib/report/validations.ts\");\n\n\n\n\nfunction calcAccountMovementSummary(journals, periodFrom, periodTo) {\n    const current = (0,_accounting__WEBPACK_IMPORTED_MODULE_1__.filterByPeriod)(journals, periodFrom, periodTo);\n    const openingRows = periodFrom ? (0,_accounting__WEBPACK_IMPORTED_MODULE_1__.filterAsOf)(journals, (0,_utils__WEBPACK_IMPORTED_MODULE_0__.addDays)(periodFrom, -1)) : [];\n    const map = new Map();\n    for (const r of journals){\n        const key = r.account_id || \"(unknown)\";\n        if (!map.has(key)) {\n            map.set(key, {\n                account: (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.accountFromRow)(r),\n                opening_balance: 0,\n                debit: 0,\n                credit: 0,\n                net_movement: 0,\n                closing_balance: 0,\n                journal_lines: 0,\n                trace: {\n                    row_ids: [],\n                    header_ids: []\n                }\n            });\n        }\n    }\n    const openingByAccount = indexRows(openingRows);\n    for (const [key, rows] of openingByAccount.entries()){\n        const acc = map.get(key);\n        if (!acc) continue;\n        acc.opening_balance = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.balanceFromRows)(rows, acc.account.account_type);\n    }\n    const currentByAccount = indexRows(current);\n    for (const [key, rows] of currentByAccount.entries()){\n        const acc = map.get(key);\n        if (!acc) continue;\n        for (const r of rows){\n            acc.debit += r.debit;\n            acc.credit += r.credit;\n            acc.journal_lines += 1;\n        }\n        const normal = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.normalSideForType)(acc.account.account_type);\n        acc.net_movement = normal === \"debit\" ? acc.debit - acc.credit : acc.credit - acc.debit;\n        acc.closing_balance = acc.opening_balance + acc.net_movement;\n        acc.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.mergeTraces)([\n            acc.trace,\n            (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.traceFromRows)(rows)\n        ]);\n    }\n    const rows = Array.from(map.values()).sort((a, b)=>a.account.account_name.localeCompare(b.account.account_name));\n    const totals = rows.reduce((s, r)=>{\n        s.opening_balance += r.opening_balance;\n        s.debit += r.debit;\n        s.credit += r.credit;\n        s.closing_balance += r.closing_balance;\n        return s;\n    }, {\n        opening_balance: 0,\n        debit: 0,\n        credit: 0,\n        closing_balance: 0\n    });\n    const balanced = (0,_validations__WEBPACK_IMPORTED_MODULE_3__.isBalanced)(totals.debit, totals.credit);\n    return {\n        raw_rows: current,\n        grouped: {\n            rows\n        },\n        totals,\n        validations: {\n            is_balanced: balanced\n        }\n    };\n}\nfunction indexRows(rows) {\n    const map = new Map();\n    for (const r of rows){\n        const key = r.account_id || \"(unknown)\";\n        if (!map.has(key)) map.set(key, []);\n        map.get(key).push(r);\n    }\n    return map;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTtJQUdoRSxNQUFNeUIsV0FBVzVDLHdEQUFVQSxDQUFDeUMsT0FBT3pCLEtBQUssRUFBRXlCLE9BQU94QixNQUFNO0lBRXZELE9BQU87UUFBRTRCLFVBQVV4QztRQUFTeUMsU0FBUztZQUFFcEI7UUFBSztRQUFHZTtRQUFRTSxhQUFhO1lBQUVDLGFBQWFKO1FBQVM7SUFBRTtBQUNoRztBQUVBLFNBQVNuQixVQUFVQyxJQUFrQjtJQUNuQyxNQUFNbkIsTUFBTSxJQUFJQztJQUNoQixLQUFLLE1BQU1DLEtBQUtpQixLQUFNO1FBQ3BCLE1BQU1oQixNQUFNRCxFQUFFRSxVQUFVLElBQUk7UUFDNUIsSUFBSSxDQUFDSixJQUFJSyxHQUFHLENBQUNGLE1BQU1ILElBQUlNLEdBQUcsQ0FBQ0gsS0FBSyxFQUFFO1FBQ2xDSCxJQUFJc0IsR0FBRyxDQUFDbkIsS0FBTXVDLElBQUksQ0FBQ3hDO0lBQ3JCO0lBQ0EsT0FBT0Y7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL29wdGl2dXotcmVwb3J0LWVuZ2luZS8uL2xpYi9yZXBvcnQvYWNjb3VudE1vdmVtZW50LnRzP2VhYTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBY2NvdW50TW92ZW1lbnRSZXBvcnQsIEFjY291bnRNb3ZlbWVudFJvdywgSm91cm5hbFJvdyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBhZGREYXlzIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IGZpbHRlckFzT2YsIGZpbHRlckJ5UGVyaW9kIH0gZnJvbSBcIi4vYWNjb3VudGluZ1wiO1xuaW1wb3J0IHsgYWNjb3VudEZyb21Sb3csIGJhbGFuY2VGcm9tUm93cywgbWVyZ2VUcmFjZXMsIG5vcm1hbFNpZGVGb3JUeXBlLCB0cmFjZUZyb21Sb3dzIH0gZnJvbSBcIi4vYWNjb3VudGluZ0xvZ2ljXCI7XG5pbXBvcnQgeyBpc0JhbGFuY2VkIH0gZnJvbSBcIi4vdmFsaWRhdGlvbnNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNBY2NvdW50TW92ZW1lbnRTdW1tYXJ5KGpvdXJuYWxzOiBKb3VybmFsUm93W10sIHBlcmlvZEZyb206IHN0cmluZyB8IG51bGwsIHBlcmlvZFRvOiBzdHJpbmcgfCBudWxsKTogQWNjb3VudE1vdmVtZW50UmVwb3J0IHtcbiAgY29uc3QgY3VycmVudCA9IGZpbHRlckJ5UGVyaW9kKGpvdXJuYWxzLCBwZXJpb2RGcm9tLCBwZXJpb2RUbyk7XG4gIGNvbnN0IG9wZW5pbmdSb3dzID0gcGVyaW9kRnJvbSA/IGZpbHRlckFzT2Yoam91cm5hbHMsIGFkZERheXMocGVyaW9kRnJvbSwgLTEpKSA6IFtdO1xuXG4gIGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBBY2NvdW50TW92ZW1lbnRSb3c+KCk7XG4gIGZvciAoY29uc3QgciBvZiBqb3VybmFscykge1xuICAgIGNvbnN0IGtleSA9IHIuYWNjb3VudF9pZCB8fCBcIih1bmtub3duKVwiO1xuICAgIGlmICghbWFwLmhhcyhrZXkpKSB7XG4gICAgICBtYXAuc2V0KGtleSwge1xuICAgICAgICBhY2NvdW50OiBhY2NvdW50RnJvbVJvdyhyKSxcbiAgICAgICAgb3BlbmluZ19iYWxhbmNlOiAwLFxuICAgICAgICBkZWJpdDogMCxcbiAgICAgICAgY3JlZGl0OiAwLFxuICAgICAgICBuZXRfbW92ZW1lbnQ6IDAsXG4gICAgICAgIGNsb3NpbmdfYmFsYW5jZTogMCxcbiAgICAgICAgam91cm5hbF9saW5lczogMCxcbiAgICAgICAgdHJhY2U6IHsgcm93X2lkczogW10sIGhlYWRlcl9pZHM6IFtdIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBvcGVuaW5nQnlBY2NvdW50ID0gaW5kZXhSb3dzKG9wZW5pbmdSb3dzKTtcbiAgZm9yIChjb25zdCBba2V5LCByb3dzXSBvZiBvcGVuaW5nQnlBY2NvdW50LmVudHJpZXMoKSkge1xuICAgIGNvbnN0IGFjYyA9IG1hcC5nZXQoa2V5KTtcbiAgICBpZiAoIWFjYykgY29udGludWU7XG4gICAgYWNjLm9wZW5pbmdfYmFsYW5jZSA9IGJhbGFuY2VGcm9tUm93cyhyb3dzLCBhY2MuYWNjb3VudC5hY2NvdW50X3R5cGUpO1xuICB9XG5cbiAgY29uc3QgY3VycmVudEJ5QWNjb3VudCA9IGluZGV4Um93cyhjdXJyZW50KTtcbiAgZm9yIChjb25zdCBba2V5LCByb3dzXSBvZiBjdXJyZW50QnlBY2NvdW50LmVudHJpZXMoKSkge1xuICAgIGNvbnN0IGFjYyA9IG1hcC5nZXQoa2V5KTtcbiAgICBpZiAoIWFjYykgY29udGludWU7XG4gICAgZm9yIChjb25zdCByIG9mIHJvd3MpIHtcbiAgICAgIGFjYy5kZWJpdCArPSByLmRlYml0O1xuICAgICAgYWNjLmNyZWRpdCArPSByLmNyZWRpdDtcbiAgICAgIGFjYy5qb3VybmFsX2xpbmVzICs9IDE7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbFNpZGVGb3JUeXBlKGFjYy5hY2NvdW50LmFjY291bnRfdHlwZSk7XG4gICAgYWNjLm5ldF9tb3ZlbWVudCA9IG5vcm1hbCA9PT0gXCJkZWJpdFwiID8gKGFjYy5kZWJpdCAtIGFjYy5jcmVkaXQpIDogKGFjYy5jcmVkaXQgLSBhY2MuZGViaXQpO1xuICAgIGFjYy5jbG9zaW5nX2JhbGFuY2UgPSBhY2Mub3BlbmluZ19iYWxhbmNlICsgYWNjLm5ldF9tb3ZlbWVudDtcbiAgICBhY2MudHJhY2UgPSBtZXJnZVRyYWNlcyhbYWNjLnRyYWNlLCB0cmFjZUZyb21Sb3dzKHJvd3MpXSk7XG4gIH1cblxuICBjb25zdCByb3dzID0gQXJyYXkuZnJvbShtYXAudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IGEuYWNjb3VudC5hY2NvdW50X25hbWUubG9jYWxlQ29tcGFyZShiLmFjY291bnQuYWNjb3VudF9uYW1lKSk7XG4gIGNvbnN0IHRvdGFscyA9IHJvd3MucmVkdWNlKFxuICAgIChzLCByKSA9PiB7XG4gICAgICBzLm9wZW5pbmdfYmFsYW5jZSArPSByLm9wZW5pbmdfYmFsYW5jZTtcbiAgICAgIHMuZGViaXQgKz0gci5kZWJpdDtcbiAgICAgIHMuY3JlZGl0ICs9IHIuY3JlZGl0O1xuICAgICAgcy5jbG9zaW5nX2JhbGFuY2UgKz0gci5jbG9zaW5nX2JhbGFuY2U7XG4gICAgICByZXR1cm4gcztcbiAgICB9LFxuICAgIHsgb3BlbmluZ19iYWxhbmNlOiAwLCBkZWJpdDogMCwgY3JlZGl0OiAwLCBjbG9zaW5nX2JhbGFuY2U6IDAgfVxuICApO1xuXG4gIGNvbnN0IGJhbGFuY2VkID0gaXNCYWxhbmNlZCh0b3RhbHMuZGViaXQsIHRvdGFscy5jcmVkaXQpO1xuXG4gIHJldHVybiB7IHJhd19yb3dzOiBjdXJyZW50LCBncm91cGVkOiB7IHJvd3MgfSwgdG90YWxzLCB2YWxpZGF0aW9uczogeyBpc19iYWxhbmNlZDogYmFsYW5jZWQgfSB9O1xufVxuXG5mdW5jdGlvbiBpbmRleFJvd3Mocm93czogSm91cm5hbFJvd1tdKTogTWFwPHN0cmluZywgSm91cm5hbFJvd1tdPiB7XG4gIGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBKb3VybmFsUm93W10+KCk7XG4gIGZvciAoY29uc3QgciBvZiByb3dzKSB7XG4gICAgY29uc3Qga2V5ID0gci5hY2NvdW50X2lkIHx8IFwiKHVua25vd24pXCI7XG4gICAgaWYgKCFtYXAuaGFzKGtleSkpIG1hcC5zZXQoa2V5LCBbXSk7XG4gICAgbWFwLmdldChrZXkpIS5wdXNoKHIpO1xuICB9XG4gIHJldHVybiBtYXA7XG59XG4iXSwibmFtZXMiOlsiYWRkRGF5cyIsImZpbHRlckFzT2YiLCJmaWx0ZXJCeVBlcmlvZCIsImFjY291bnRGcm9tUm93IiwiYmFsYW5jZUZyb21Sb3dzIiwibWVyZ2VUcmFjZXMiLCJub3JtYWxTaWRlRm9yVHlwZSIsInRyYWNlRnJvbVJvd3MiLCJpc0JhbGFuY2VkIiwiY2FsY0FjY291bnRNb3ZlbWVudFN1bW1hcnkiLCJqb3VybmFscyIsInBlcmlvZEZyb20iLCJwZXJpb2RUbyIsImN1cnJlbnQiLCJvcGVuaW5nUm93cyIsIm1hcCIsIk1hcCIsInIiLCJrZXkiLCJhY2NvdW50X2lkIiwiaGFzIiwic2V0IiwiYWNjb3VudCIsIm9wZW5pbmdfYmFsYW5jZSIsImRlYml0IiwiY3JlZGl0IiwibmV0X21vdmVtZW50IiwiY2xvc2luZ19iYWxhbmNlIiwiam91cm5hbF9saW5lcyIsInRyYWNlIiwicm93X2lkcyIsImhlYWRlcl9pZHMiLCJvcGVuaW5nQnlBY2NvdW50IiwiaW5kZXhSb3dzIiwicm93cyIsImVudHJpZXMiLCJhY2MiLCJnZXQiLCJhY2NvdW50X3R5cGUiLCJjdXJyZW50QnlBY2NvdW50Iiwibm9ybWFsIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwic29ydCIsImEiLCJiIiwiYWNjb3VudF9uYW1lIiwibG9jYWxlQ29tcGFyZSIsInRvdGFscyIsInJlZHVjZSIsInMiLCJiYWxhbmNlZCIsInJhd19yb3dzIiwiZ3JvdXBlZCIsInZhbGlkYXRpb25zIiwiaXNfYmFsYW5jZWQiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/accountMovement.ts\n");

/***/ }),

/***/ "(api)/./lib/report/accounting.ts":
/*!**********************************!*\
  !*** ./lib/report/accounting.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   filterAsOf: () => (/* binding */ filterAsOf),\n/* harmony export */   filterByPeriod: () => (/* binding */ filterByPeriod),\n/* harmony export */   sortJournalRows: () => (/* binding */ sortJournalRows)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n\nfunction filterByPeriod(journals, from, to) {\n    if (!from && !to) return journals.slice();\n    return journals.filter((r)=>(0,_utils__WEBPACK_IMPORTED_MODULE_0__.inRange)(r.transaction_date, from, to));\n}\nfunction filterAsOf(journals, asOfDate) {\n    if (!asOfDate) return [];\n    return journals.filter((r)=>(0,_utils__WEBPACK_IMPORTED_MODULE_0__.asOf)(r.transaction_date, asOfDate));\n}\nfunction sortJournalRows(rows) {\n    return rows.slice().sort((a, b)=>{\n        const dc = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.compareDate)(a.transaction_date, b.transaction_date);\n        if (dc !== 0) return dc;\n        if (a.journal_header_id !== b.journal_header_id) return a.journal_header_id.localeCompare(b.journal_header_id);\n        return (a.row_id || \"\").localeCompare(b.row_id || \"\");\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVwb3J0L2FjY291bnRpbmcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNxRDtBQUU5QyxTQUFTRyxlQUFlQyxRQUFzQixFQUFFQyxJQUFtQixFQUFFQyxFQUFpQjtJQUMzRixJQUFJLENBQUNELFFBQVEsQ0FBQ0MsSUFBSSxPQUFPRixTQUFTRyxLQUFLO0lBQ3ZDLE9BQU9ILFNBQVNJLE1BQU0sQ0FBQyxDQUFDQyxJQUFNUCwrQ0FBT0EsQ0FBQ08sRUFBRUMsZ0JBQWdCLEVBQUVMLE1BQU1DO0FBQ2xFO0FBRU8sU0FBU0ssV0FBV1AsUUFBc0IsRUFBRVEsUUFBdUI7SUFDeEUsSUFBSSxDQUFDQSxVQUFVLE9BQU8sRUFBRTtJQUN4QixPQUFPUixTQUFTSSxNQUFNLENBQUMsQ0FBQ0MsSUFBTVQsNENBQUlBLENBQUNTLEVBQUVDLGdCQUFnQixFQUFFRTtBQUN6RDtBQUVPLFNBQVNDLGdCQUFnQkMsSUFBa0I7SUFDaEQsT0FBT0EsS0FBS1AsS0FBSyxHQUFHUSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0M7UUFDM0IsTUFBTUMsS0FBS2pCLG1EQUFXQSxDQUFDZSxFQUFFTixnQkFBZ0IsRUFBRU8sRUFBRVAsZ0JBQWdCO1FBQzdELElBQUlRLE9BQU8sR0FBRyxPQUFPQTtRQUNyQixJQUFJRixFQUFFRyxpQkFBaUIsS0FBS0YsRUFBRUUsaUJBQWlCLEVBQUUsT0FBT0gsRUFBRUcsaUJBQWlCLENBQUNDLGFBQWEsQ0FBQ0gsRUFBRUUsaUJBQWlCO1FBQzdHLE9BQU8sQ0FBQ0gsRUFBRUssTUFBTSxJQUFJLEVBQUMsRUFBR0QsYUFBYSxDQUFDSCxFQUFFSSxNQUFNLElBQUk7SUFDcEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL29wdGl2dXotcmVwb3J0LWVuZ2luZS8uL2xpYi9yZXBvcnQvYWNjb3VudGluZy50cz80MjRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSm91cm5hbFJvdyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBhc09mLCBjb21wYXJlRGF0ZSwgaW5SYW5nZSB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJCeVBlcmlvZChqb3VybmFsczogSm91cm5hbFJvd1tdLCBmcm9tOiBzdHJpbmcgfCBudWxsLCB0bzogc3RyaW5nIHwgbnVsbCk6IEpvdXJuYWxSb3dbXSB7XG4gIGlmICghZnJvbSAmJiAhdG8pIHJldHVybiBqb3VybmFscy5zbGljZSgpO1xuICByZXR1cm4gam91cm5hbHMuZmlsdGVyKChyKSA9PiBpblJhbmdlKHIudHJhbnNhY3Rpb25fZGF0ZSwgZnJvbSwgdG8pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckFzT2Yoam91cm5hbHM6IEpvdXJuYWxSb3dbXSwgYXNPZkRhdGU6IHN0cmluZyB8IG51bGwpOiBKb3VybmFsUm93W10ge1xuICBpZiAoIWFzT2ZEYXRlKSByZXR1cm4gW107XG4gIHJldHVybiBqb3VybmFscy5maWx0ZXIoKHIpID0+IGFzT2Yoci50cmFuc2FjdGlvbl9kYXRlLCBhc09mRGF0ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc29ydEpvdXJuYWxSb3dzKHJvd3M6IEpvdXJuYWxSb3dbXSk6IEpvdXJuYWxSb3dbXSB7XG4gIHJldHVybiByb3dzLnNsaWNlKCkuc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IGRjID0gY29tcGFyZURhdGUoYS50cmFuc2FjdGlvbl9kYXRlLCBiLnRyYW5zYWN0aW9uX2RhdGUpO1xuICAgIGlmIChkYyAhPT0gMCkgcmV0dXJuIGRjO1xuICAgIGlmIChhLmpvdXJuYWxfaGVhZGVyX2lkICE9PSBiLmpvdXJuYWxfaGVhZGVyX2lkKSByZXR1cm4gYS5qb3VybmFsX2hlYWRlcl9pZC5sb2NhbGVDb21wYXJlKGIuam91cm5hbF9oZWFkZXJfaWQpO1xuICAgIHJldHVybiAoYS5yb3dfaWQgfHwgXCJcIikubG9jYWxlQ29tcGFyZShiLnJvd19pZCB8fCBcIlwiKTtcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiYXNPZiIsImNvbXBhcmVEYXRlIiwiaW5SYW5nZSIsImZpbHRlckJ5UGVyaW9kIiwiam91cm5hbHMiLCJmcm9tIiwidG8iLCJzbGljZSIsImZpbHRlciIsInIiLCJ0cmFuc2FjdGlvbl9kYXRlIiwiZmlsdGVyQXNPZiIsImFzT2ZEYXRlIiwic29ydEpvdXJuYWxSb3dzIiwicm93cyIsInNvcnQiLCJhIiwiYiIsImRjIiwiam91cm5hbF9oZWFkZXJfaWQiLCJsb2NhbGVDb21wYXJlIiwicm93X2lkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/accounting.ts\n");

/***/ }),

/***/ "(api)/./lib/report/accountingLogic.ts":
/*!***************************************!*\
  !*** ./lib/report/accountingLogic.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountFromRow: () => (/* binding */ accountFromRow),\n/* harmony export */   balanceFromRows: () => (/* binding */ balanceFromRows),\n/* harmony export */   mergeTraces: () => (/* binding */ mergeTraces),\n/* harmony export */   normalSideForType: () => (/* binding */ normalSideForType),\n/* harmony export */   signedAmount: () => (/* binding */ signedAmount),\n/* harmony export */   splitDebitCredit: () => (/* binding */ splitDebitCredit),\n/* harmony export */   traceFromRows: () => (/* binding */ traceFromRows)\n/* harmony export */ });\nfunction normalSideForType(accountType) {\n    const t = String(accountType || \"\").toLowerCase();\n    if (t === \"asset\" || t === \"expense\") return \"debit\";\n    if (t === \"liability\" || t === \"equity\" || t === \"income\") return \"credit\";\n    return \"debit\";\n}\nfunction signedAmount(row) {\n    const normal = normalSideForType(row.account_type);\n    return normal === \"debit\" ? row.debit - row.credit : row.credit - row.debit;\n}\nfunction balanceFromRows(rows, accountType) {\n    const normal = normalSideForType(accountType);\n    let balance = 0;\n    for (const r of rows){\n        balance += normal === \"debit\" ? r.debit - r.credit : r.credit - r.debit;\n    }\n    return balance;\n}\nfunction splitDebitCredit(balance, normal) {\n    if (normal === \"debit\") {\n        return balance >= 0 ? {\n            debit: balance,\n            credit: 0\n        } : {\n            debit: 0,\n            credit: Math.abs(balance)\n        };\n    }\n    return balance >= 0 ? {\n        debit: 0,\n        credit: balance\n    } : {\n        debit: Math.abs(balance),\n        credit: 0\n    };\n}\nfunction accountFromRow(row) {\n    return {\n        account_id: row.account_id,\n        account_name: row.account_name || \"(Unknown Account)\",\n        account_category: row.account_category || \"\",\n        account_type: row.account_type || \"\",\n        kelompok_neraca: row.kelompok_neraca\n    };\n}\nfunction traceFromRows(rows) {\n    const rowIds = new Set();\n    const headerIds = new Set();\n    for (const r of rows){\n        if (r.row_id) rowIds.add(r.row_id);\n        if (r.journal_header_id) headerIds.add(r.journal_header_id);\n    }\n    return {\n        row_ids: Array.from(rowIds),\n        header_ids: Array.from(headerIds)\n    };\n}\nfunction mergeTraces(traces) {\n    const rowIds = new Set();\n    const headerIds = new Set();\n    for (const t of traces){\n        for (const id of t.row_ids)rowIds.add(id);\n        for (const id of t.header_ids)headerIds.add(id);\n    }\n    return {\n        row_ids: Array.from(rowIds),\n        header_ids: Array.from(headerIds)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVwb3J0L2FjY291bnRpbmdMb2dpYy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBSU8sU0FBU0Esa0JBQWtCQyxXQUFtQjtJQUNuRCxNQUFNQyxJQUFJQyxPQUFPRixlQUFlLElBQUlHLFdBQVc7SUFDL0MsSUFBSUYsTUFBTSxXQUFXQSxNQUFNLFdBQVcsT0FBTztJQUM3QyxJQUFJQSxNQUFNLGVBQWVBLE1BQU0sWUFBWUEsTUFBTSxVQUFVLE9BQU87SUFDbEUsT0FBTztBQUNUO0FBRU8sU0FBU0csYUFBYUMsR0FBZTtJQUMxQyxNQUFNQyxTQUFTUCxrQkFBa0JNLElBQUlFLFlBQVk7SUFDakQsT0FBT0QsV0FBVyxVQUFXRCxJQUFJRyxLQUFLLEdBQUdILElBQUlJLE1BQU0sR0FBS0osSUFBSUksTUFBTSxHQUFHSixJQUFJRyxLQUFLO0FBQ2hGO0FBRU8sU0FBU0UsZ0JBQWdCQyxJQUFrQixFQUFFWCxXQUFtQjtJQUNyRSxNQUFNTSxTQUFTUCxrQkFBa0JDO0lBQ2pDLElBQUlZLFVBQVU7SUFDZCxLQUFLLE1BQU1DLEtBQUtGLEtBQU07UUFDcEJDLFdBQVdOLFdBQVcsVUFBV08sRUFBRUwsS0FBSyxHQUFHSyxFQUFFSixNQUFNLEdBQUtJLEVBQUVKLE1BQU0sR0FBR0ksRUFBRUwsS0FBSztJQUM1RTtJQUNBLE9BQU9JO0FBQ1Q7QUFFTyxTQUFTRSxpQkFBaUJGLE9BQWUsRUFBRU4sTUFBa0I7SUFDbEUsSUFBSUEsV0FBVyxTQUFTO1FBQ3RCLE9BQU9NLFdBQVcsSUFBSTtZQUFFSixPQUFPSTtZQUFTSCxRQUFRO1FBQUUsSUFBSTtZQUFFRCxPQUFPO1lBQUdDLFFBQVFNLEtBQUtDLEdBQUcsQ0FBQ0o7UUFBUztJQUM5RjtJQUNBLE9BQU9BLFdBQVcsSUFBSTtRQUFFSixPQUFPO1FBQUdDLFFBQVFHO0lBQVEsSUFBSTtRQUFFSixPQUFPTyxLQUFLQyxHQUFHLENBQUNKO1FBQVVILFFBQVE7SUFBRTtBQUM5RjtBQUVPLFNBQVNRLGVBQWVaLEdBQWU7SUFDNUMsT0FBTztRQUNMYSxZQUFZYixJQUFJYSxVQUFVO1FBQzFCQyxjQUFjZCxJQUFJYyxZQUFZLElBQUk7UUFDbENDLGtCQUFrQmYsSUFBSWUsZ0JBQWdCLElBQUk7UUFDMUNiLGNBQWNGLElBQUlFLFlBQVksSUFBSTtRQUNsQ2MsaUJBQWlCaEIsSUFBSWdCLGVBQWU7SUFDdEM7QUFDRjtBQUVPLFNBQVNDLGNBQWNYLElBQWtCO0lBQzlDLE1BQU1ZLFNBQVMsSUFBSUM7SUFDbkIsTUFBTUMsWUFBWSxJQUFJRDtJQUN0QixLQUFLLE1BQU1YLEtBQUtGLEtBQU07UUFDcEIsSUFBSUUsRUFBRWEsTUFBTSxFQUFFSCxPQUFPSSxHQUFHLENBQUNkLEVBQUVhLE1BQU07UUFDakMsSUFBSWIsRUFBRWUsaUJBQWlCLEVBQUVILFVBQVVFLEdBQUcsQ0FBQ2QsRUFBRWUsaUJBQWlCO0lBQzVEO0lBQ0EsT0FBTztRQUFFQyxTQUFTQyxNQUFNQyxJQUFJLENBQUNSO1FBQVNTLFlBQVlGLE1BQU1DLElBQUksQ0FBQ047SUFBVztBQUMxRTtBQUVPLFNBQVNRLFlBQVlDLE1BQWtCO0lBQzVDLE1BQU1YLFNBQVMsSUFBSUM7SUFDbkIsTUFBTUMsWUFBWSxJQUFJRDtJQUN0QixLQUFLLE1BQU12QixLQUFLaUMsT0FBUTtRQUN0QixLQUFLLE1BQU1DLE1BQU1sQyxFQUFFNEIsT0FBTyxDQUFFTixPQUFPSSxHQUFHLENBQUNRO1FBQ3ZDLEtBQUssTUFBTUEsTUFBTWxDLEVBQUUrQixVQUFVLENBQUVQLFVBQVVFLEdBQUcsQ0FBQ1E7SUFDL0M7SUFDQSxPQUFPO1FBQUVOLFNBQVNDLE1BQU1DLElBQUksQ0FBQ1I7UUFBU1MsWUFBWUYsTUFBTUMsSUFBSSxDQUFDTjtJQUFXO0FBQzFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3B0aXZ1ei1yZXBvcnQtZW5naW5lLy4vbGliL3JlcG9ydC9hY2NvdW50aW5nTG9naWMudHM/NmRhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFjY291bnQsIEpvdXJuYWxSb3csIFRyYWNlUmVmIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IHR5cGUgTm9ybWFsU2lkZSA9IFwiZGViaXRcIiB8IFwiY3JlZGl0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxTaWRlRm9yVHlwZShhY2NvdW50VHlwZTogc3RyaW5nKTogTm9ybWFsU2lkZSB7XG4gIGNvbnN0IHQgPSBTdHJpbmcoYWNjb3VudFR5cGUgfHwgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgaWYgKHQgPT09IFwiYXNzZXRcIiB8fCB0ID09PSBcImV4cGVuc2VcIikgcmV0dXJuIFwiZGViaXRcIjtcbiAgaWYgKHQgPT09IFwibGlhYmlsaXR5XCIgfHwgdCA9PT0gXCJlcXVpdHlcIiB8fCB0ID09PSBcImluY29tZVwiKSByZXR1cm4gXCJjcmVkaXRcIjtcbiAgcmV0dXJuIFwiZGViaXRcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25lZEFtb3VudChyb3c6IEpvdXJuYWxSb3cpOiBudW1iZXIge1xuICBjb25zdCBub3JtYWwgPSBub3JtYWxTaWRlRm9yVHlwZShyb3cuYWNjb3VudF90eXBlKTtcbiAgcmV0dXJuIG5vcm1hbCA9PT0gXCJkZWJpdFwiID8gKHJvdy5kZWJpdCAtIHJvdy5jcmVkaXQpIDogKHJvdy5jcmVkaXQgLSByb3cuZGViaXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmFsYW5jZUZyb21Sb3dzKHJvd3M6IEpvdXJuYWxSb3dbXSwgYWNjb3VudFR5cGU6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IG5vcm1hbCA9IG5vcm1hbFNpZGVGb3JUeXBlKGFjY291bnRUeXBlKTtcbiAgbGV0IGJhbGFuY2UgPSAwO1xuICBmb3IgKGNvbnN0IHIgb2Ygcm93cykge1xuICAgIGJhbGFuY2UgKz0gbm9ybWFsID09PSBcImRlYml0XCIgPyAoci5kZWJpdCAtIHIuY3JlZGl0KSA6IChyLmNyZWRpdCAtIHIuZGViaXQpO1xuICB9XG4gIHJldHVybiBiYWxhbmNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3BsaXREZWJpdENyZWRpdChiYWxhbmNlOiBudW1iZXIsIG5vcm1hbDogTm9ybWFsU2lkZSk6IHsgZGViaXQ6IG51bWJlcjsgY3JlZGl0OiBudW1iZXIgfSB7XG4gIGlmIChub3JtYWwgPT09IFwiZGViaXRcIikge1xuICAgIHJldHVybiBiYWxhbmNlID49IDAgPyB7IGRlYml0OiBiYWxhbmNlLCBjcmVkaXQ6IDAgfSA6IHsgZGViaXQ6IDAsIGNyZWRpdDogTWF0aC5hYnMoYmFsYW5jZSkgfTtcbiAgfVxuICByZXR1cm4gYmFsYW5jZSA+PSAwID8geyBkZWJpdDogMCwgY3JlZGl0OiBiYWxhbmNlIH0gOiB7IGRlYml0OiBNYXRoLmFicyhiYWxhbmNlKSwgY3JlZGl0OiAwIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhY2NvdW50RnJvbVJvdyhyb3c6IEpvdXJuYWxSb3cpOiBBY2NvdW50IHtcbiAgcmV0dXJuIHtcbiAgICBhY2NvdW50X2lkOiByb3cuYWNjb3VudF9pZCxcbiAgICBhY2NvdW50X25hbWU6IHJvdy5hY2NvdW50X25hbWUgfHwgXCIoVW5rbm93biBBY2NvdW50KVwiLFxuICAgIGFjY291bnRfY2F0ZWdvcnk6IHJvdy5hY2NvdW50X2NhdGVnb3J5IHx8IFwiXCIsXG4gICAgYWNjb3VudF90eXBlOiByb3cuYWNjb3VudF90eXBlIHx8IFwiXCIsXG4gICAga2Vsb21wb2tfbmVyYWNhOiByb3cua2Vsb21wb2tfbmVyYWNhLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhY2VGcm9tUm93cyhyb3dzOiBKb3VybmFsUm93W10pOiBUcmFjZVJlZiB7XG4gIGNvbnN0IHJvd0lkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCBoZWFkZXJJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgZm9yIChjb25zdCByIG9mIHJvd3MpIHtcbiAgICBpZiAoci5yb3dfaWQpIHJvd0lkcy5hZGQoci5yb3dfaWQpO1xuICAgIGlmIChyLmpvdXJuYWxfaGVhZGVyX2lkKSBoZWFkZXJJZHMuYWRkKHIuam91cm5hbF9oZWFkZXJfaWQpO1xuICB9XG4gIHJldHVybiB7IHJvd19pZHM6IEFycmF5LmZyb20ocm93SWRzKSwgaGVhZGVyX2lkczogQXJyYXkuZnJvbShoZWFkZXJJZHMpIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVRyYWNlcyh0cmFjZXM6IFRyYWNlUmVmW10pOiBUcmFjZVJlZiB7XG4gIGNvbnN0IHJvd0lkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCBoZWFkZXJJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgZm9yIChjb25zdCB0IG9mIHRyYWNlcykge1xuICAgIGZvciAoY29uc3QgaWQgb2YgdC5yb3dfaWRzKSByb3dJZHMuYWRkKGlkKTtcbiAgICBmb3IgKGNvbnN0IGlkIG9mIHQuaGVhZGVyX2lkcykgaGVhZGVySWRzLmFkZChpZCk7XG4gIH1cbiAgcmV0dXJuIHsgcm93X2lkczogQXJyYXkuZnJvbShyb3dJZHMpLCBoZWFkZXJfaWRzOiBBcnJheS5mcm9tKGhlYWRlcklkcykgfTtcbn1cbiJdLCJuYW1lcyI6WyJub3JtYWxTaWRlRm9yVHlwZSIsImFjY291bnRUeXBlIiwidCIsIlN0cmluZyIsInRvTG93ZXJDYXNlIiwic2lnbmVkQW1vdW50Iiwicm93Iiwibm9ybWFsIiwiYWNjb3VudF90eXBlIiwiZGViaXQiLCJjcmVkaXQiLCJiYWxhbmNlRnJvbVJvd3MiLCJyb3dzIiwiYmFsYW5jZSIsInIiLCJzcGxpdERlYml0Q3JlZGl0IiwiTWF0aCIsImFicyIsImFjY291bnRGcm9tUm93IiwiYWNjb3VudF9pZCIsImFjY291bnRfbmFtZSIsImFjY291bnRfY2F0ZWdvcnkiLCJrZWxvbXBva19uZXJhY2EiLCJ0cmFjZUZyb21Sb3dzIiwicm93SWRzIiwiU2V0IiwiaGVhZGVySWRzIiwicm93X2lkIiwiYWRkIiwiam91cm5hbF9oZWFkZXJfaWQiLCJyb3dfaWRzIiwiQXJyYXkiLCJmcm9tIiwiaGVhZGVyX2lkcyIsIm1lcmdlVHJhY2VzIiwidHJhY2VzIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/report/accountingLogic.ts\n");

/***/ }),

/***/ "(api)/./lib/report/activitySummary.ts":
/*!***************************************!*\
  !*** ./lib/report/activitySummary.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcAccountActivitySummary: () => (/* binding */ calcAccountActivitySummary)\n/* harmony export */ });\nfunction calcAccountActivitySummary(journals) {\n    const uniqueAccounts = new Set();\n    const byType = new Map();\n    const byCategory = new Map();\n    const topLines = [];\n    for (const r of journals){\n        uniqueAccounts.add(r.account_id || \"(unknown)\");\n        const t = r.account_type || \"(unknown)\";\n        if (!byType.has(t)) byType.set(t, {\n            type: t,\n            debit: 0,\n            credit: 0,\n            lines: 0\n        });\n        const bt = byType.get(t);\n        bt.debit += r.debit;\n        bt.credit += r.credit;\n        bt.lines += 1;\n        const c = r.account_category || \"(Uncategorized)\";\n        if (!byCategory.has(c)) byCategory.set(c, {\n            category: c,\n            debit: 0,\n            credit: 0,\n            lines: 0,\n            sample_type: t\n        });\n        const bc = byCategory.get(c);\n        bc.debit += r.debit;\n        bc.credit += r.credit;\n        bc.lines += 1;\n        const magnitude = Math.max(r.debit, r.credit);\n        topLines.push({\n            magnitude,\n            ...r\n        });\n    }\n    topLines.sort((a, b)=>b.magnitude - a.magnitude);\n    const top10 = topLines.slice(0, 10);\n    return {\n        unique_accounts: uniqueAccounts.size,\n        by_type: Array.from(byType.values()).sort((a, b)=>a.type.localeCompare(b.type)),\n        by_category: Array.from(byCategory.values()).sort((a, b)=>a.category.localeCompare(b.category)),\n        top10_lines: top10\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVwb3J0L2FjdGl2aXR5U3VtbWFyeS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0EsMkJBQTJCQyxRQUFzQjtJQUMvRCxNQUFNQyxpQkFBaUIsSUFBSUM7SUFDM0IsTUFBTUMsU0FBUyxJQUFJQztJQUNuQixNQUFNQyxhQUFhLElBQUlEO0lBQ3ZCLE1BQU1FLFdBQW1ELEVBQUU7SUFFM0QsS0FBSyxNQUFNQyxLQUFLUCxTQUFVO1FBQ3hCQyxlQUFlTyxHQUFHLENBQUNELEVBQUVFLFVBQVUsSUFBSTtRQUVuQyxNQUFNQyxJQUFJSCxFQUFFSSxZQUFZLElBQUk7UUFDNUIsSUFBSSxDQUFDUixPQUFPUyxHQUFHLENBQUNGLElBQUlQLE9BQU9VLEdBQUcsQ0FBQ0gsR0FBRztZQUFFSSxNQUFNSjtZQUFHSyxPQUFPO1lBQUdDLFFBQVE7WUFBR0MsT0FBTztRQUFFO1FBQzNFLE1BQU1DLEtBQUtmLE9BQU9nQixHQUFHLENBQUNUO1FBQ3RCUSxHQUFHSCxLQUFLLElBQUlSLEVBQUVRLEtBQUs7UUFDbkJHLEdBQUdGLE1BQU0sSUFBSVQsRUFBRVMsTUFBTTtRQUNyQkUsR0FBR0QsS0FBSyxJQUFJO1FBRVosTUFBTUcsSUFBSWIsRUFBRWMsZ0JBQWdCLElBQUk7UUFDaEMsSUFBSSxDQUFDaEIsV0FBV08sR0FBRyxDQUFDUSxJQUFJZixXQUFXUSxHQUFHLENBQUNPLEdBQUc7WUFBRUUsVUFBVUY7WUFBR0wsT0FBTztZQUFHQyxRQUFRO1lBQUdDLE9BQU87WUFBR00sYUFBYWI7UUFBRTtRQUN2RyxNQUFNYyxLQUFLbkIsV0FBV2MsR0FBRyxDQUFDQztRQUMxQkksR0FBR1QsS0FBSyxJQUFJUixFQUFFUSxLQUFLO1FBQ25CUyxHQUFHUixNQUFNLElBQUlULEVBQUVTLE1BQU07UUFDckJRLEdBQUdQLEtBQUssSUFBSTtRQUVaLE1BQU1RLFlBQVlDLEtBQUtDLEdBQUcsQ0FBQ3BCLEVBQUVRLEtBQUssRUFBRVIsRUFBRVMsTUFBTTtRQUM1Q1YsU0FBU3NCLElBQUksQ0FBQztZQUFFSDtZQUFXLEdBQUdsQixDQUFDO1FBQUM7SUFDbEM7SUFFQUQsU0FBU3VCLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFTixTQUFTLEdBQUdLLEVBQUVMLFNBQVM7SUFDakQsTUFBTU8sUUFBUTFCLFNBQVMyQixLQUFLLENBQUMsR0FBRztJQUVoQyxPQUFPO1FBQ0xDLGlCQUFpQmpDLGVBQWVrQyxJQUFJO1FBQ3BDQyxTQUFTQyxNQUFNQyxJQUFJLENBQUNuQyxPQUFPb0MsTUFBTSxJQUFJVixJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsRUFBRWhCLElBQUksQ0FBQzBCLGFBQWEsQ0FBQ1QsRUFBRWpCLElBQUk7UUFDL0UyQixhQUFhSixNQUFNQyxJQUFJLENBQUNqQyxXQUFXa0MsTUFBTSxJQUFJVixJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsRUFBRVIsUUFBUSxDQUFDa0IsYUFBYSxDQUFDVCxFQUFFVCxRQUFRO1FBQy9Gb0IsYUFBYVY7SUFDZjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3B0aXZ1ei1yZXBvcnQtZW5naW5lLy4vbGliL3JlcG9ydC9hY3Rpdml0eVN1bW1hcnkudHM/ZjBkNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFjdGl2aXR5U3VtbWFyeSwgSm91cm5hbFJvdyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjQWNjb3VudEFjdGl2aXR5U3VtbWFyeShqb3VybmFsczogSm91cm5hbFJvd1tdKTogQWN0aXZpdHlTdW1tYXJ5IHtcbiAgY29uc3QgdW5pcXVlQWNjb3VudHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgY29uc3QgYnlUeXBlID0gbmV3IE1hcDxzdHJpbmcsIHsgdHlwZTogc3RyaW5nOyBkZWJpdDogbnVtYmVyOyBjcmVkaXQ6IG51bWJlcjsgbGluZXM6IG51bWJlciB9PigpO1xuICBjb25zdCBieUNhdGVnb3J5ID0gbmV3IE1hcDxzdHJpbmcsIHsgY2F0ZWdvcnk6IHN0cmluZzsgZGViaXQ6IG51bWJlcjsgY3JlZGl0OiBudW1iZXI7IGxpbmVzOiBudW1iZXI7IHNhbXBsZV90eXBlOiBzdHJpbmcgfT4oKTtcbiAgY29uc3QgdG9wTGluZXM6IChKb3VybmFsUm93ICYgeyBtYWduaXR1ZGU6IG51bWJlciB9KVtdID0gW107XG5cbiAgZm9yIChjb25zdCByIG9mIGpvdXJuYWxzKSB7XG4gICAgdW5pcXVlQWNjb3VudHMuYWRkKHIuYWNjb3VudF9pZCB8fCBcIih1bmtub3duKVwiKTtcblxuICAgIGNvbnN0IHQgPSByLmFjY291bnRfdHlwZSB8fCBcIih1bmtub3duKVwiO1xuICAgIGlmICghYnlUeXBlLmhhcyh0KSkgYnlUeXBlLnNldCh0LCB7IHR5cGU6IHQsIGRlYml0OiAwLCBjcmVkaXQ6IDAsIGxpbmVzOiAwIH0pO1xuICAgIGNvbnN0IGJ0ID0gYnlUeXBlLmdldCh0KSE7XG4gICAgYnQuZGViaXQgKz0gci5kZWJpdDtcbiAgICBidC5jcmVkaXQgKz0gci5jcmVkaXQ7XG4gICAgYnQubGluZXMgKz0gMTtcblxuICAgIGNvbnN0IGMgPSByLmFjY291bnRfY2F0ZWdvcnkgfHwgXCIoVW5jYXRlZ29yaXplZClcIjtcbiAgICBpZiAoIWJ5Q2F0ZWdvcnkuaGFzKGMpKSBieUNhdGVnb3J5LnNldChjLCB7IGNhdGVnb3J5OiBjLCBkZWJpdDogMCwgY3JlZGl0OiAwLCBsaW5lczogMCwgc2FtcGxlX3R5cGU6IHQgfSk7XG4gICAgY29uc3QgYmMgPSBieUNhdGVnb3J5LmdldChjKSE7XG4gICAgYmMuZGViaXQgKz0gci5kZWJpdDtcbiAgICBiYy5jcmVkaXQgKz0gci5jcmVkaXQ7XG4gICAgYmMubGluZXMgKz0gMTtcblxuICAgIGNvbnN0IG1hZ25pdHVkZSA9IE1hdGgubWF4KHIuZGViaXQsIHIuY3JlZGl0KTtcbiAgICB0b3BMaW5lcy5wdXNoKHsgbWFnbml0dWRlLCAuLi5yIH0pO1xuICB9XG5cbiAgdG9wTGluZXMuc29ydCgoYSwgYikgPT4gYi5tYWduaXR1ZGUgLSBhLm1hZ25pdHVkZSk7XG4gIGNvbnN0IHRvcDEwID0gdG9wTGluZXMuc2xpY2UoMCwgMTApO1xuXG4gIHJldHVybiB7XG4gICAgdW5pcXVlX2FjY291bnRzOiB1bmlxdWVBY2NvdW50cy5zaXplLFxuICAgIGJ5X3R5cGU6IEFycmF5LmZyb20oYnlUeXBlLnZhbHVlcygpKS5zb3J0KChhLCBiKSA9PiBhLnR5cGUubG9jYWxlQ29tcGFyZShiLnR5cGUpKSxcbiAgICBieV9jYXRlZ29yeTogQXJyYXkuZnJvbShieUNhdGVnb3J5LnZhbHVlcygpKS5zb3J0KChhLCBiKSA9PiBhLmNhdGVnb3J5LmxvY2FsZUNvbXBhcmUoYi5jYXRlZ29yeSkpLFxuICAgIHRvcDEwX2xpbmVzOiB0b3AxMCxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJjYWxjQWNjb3VudEFjdGl2aXR5U3VtbWFyeSIsImpvdXJuYWxzIiwidW5pcXVlQWNjb3VudHMiLCJTZXQiLCJieVR5cGUiLCJNYXAiLCJieUNhdGVnb3J5IiwidG9wTGluZXMiLCJyIiwiYWRkIiwiYWNjb3VudF9pZCIsInQiLCJhY2NvdW50X3R5cGUiLCJoYXMiLCJzZXQiLCJ0eXBlIiwiZGViaXQiLCJjcmVkaXQiLCJsaW5lcyIsImJ0IiwiZ2V0IiwiYyIsImFjY291bnRfY2F0ZWdvcnkiLCJjYXRlZ29yeSIsInNhbXBsZV90eXBlIiwiYmMiLCJtYWduaXR1ZGUiLCJNYXRoIiwibWF4IiwicHVzaCIsInNvcnQiLCJhIiwiYiIsInRvcDEwIiwic2xpY2UiLCJ1bmlxdWVfYWNjb3VudHMiLCJzaXplIiwiYnlfdHlwZSIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImxvY2FsZUNvbXBhcmUiLCJieV9jYXRlZ29yeSIsInRvcDEwX2xpbmVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/activitySummary.ts\n");

/***/ }),

/***/ "(api)/./lib/report/balanceSheet.ts":
/*!************************************!*\
  !*** ./lib/report/balanceSheet.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcBalanceSheet: () => (/* binding */ calcBalanceSheet)\n/* harmony export */ });\n/* harmony import */ var _accounting__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./accounting */ \"(api)/./lib/report/accounting.ts\");\n/* harmony import */ var _accountingLogic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accountingLogic */ \"(api)/./lib/report/accountingLogic.ts\");\n/* harmony import */ var _validations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validations */ \"(api)/./lib/report/validations.ts\");\n\n\n\nfunction calcBalanceSheet(journals, asOfDate) {\n    const rows = (0,_accounting__WEBPACK_IMPORTED_MODULE_0__.filterAsOf)(journals, asOfDate);\n    const accMap = new Map();\n    for (const r of rows){\n        const id = r.account_id || \"(unknown)\";\n        if (!accMap.has(id)) {\n            accMap.set(id, {\n                row: {\n                    account: (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.accountFromRow)(r),\n                    group: \"\",\n                    balance: 0,\n                    source: \"account\",\n                    trace: {\n                        row_ids: [],\n                        header_ids: []\n                    }\n                },\n                raw: []\n            });\n        }\n        accMap.get(id).raw.push(r);\n    }\n    const assets = [];\n    const liabilities = [];\n    const equity = [];\n    for (const { row, raw } of accMap.values()){\n        row.balance = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.balanceFromRows)(raw, row.account.account_type);\n        row.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.traceFromRows)(raw);\n        const t = String(row.account.account_type || \"\").toLowerCase();\n        if (t === \"asset\") {\n            row.group = classifyAssetGroup(row.account.kelompok_neraca, row.account.account_category);\n            assets.push(row);\n        } else if (t === \"liability\") {\n            row.group = classifyLiabilityGroup(row.account.kelompok_neraca, row.account.account_category);\n            liabilities.push(row);\n        } else if (t === \"equity\") {\n            row.group = \"Equity\";\n            equity.push(row);\n        }\n    }\n    const retained = calcRetainedEarnings(rows);\n    const retainedRow = {\n        account: {\n            account_id: \"retained_earnings\",\n            account_name: \"Retained Earnings (Auto)\",\n            account_category: \"Equity\",\n            account_type: \"equity\",\n            kelompok_neraca: \"Retained Earnings\"\n        },\n        group: \"Equity\",\n        balance: retained.amount,\n        source: \"retained_earnings\",\n        trace: retained.trace\n    };\n    if (retained.amount !== 0) {\n        equity.push(retainedRow);\n    }\n    const sum = (arr)=>arr.reduce((s, x)=>s + (x.balance || 0), 0);\n    const assetsCurrent = assets.filter((r)=>r.group === \"Current Assets\");\n    const assetsNoncurrent = assets.filter((r)=>r.group === \"Non-Current Assets\");\n    const assetsUncat = assets.filter((r)=>r.group === \"Unclassified Assets\");\n    const liabShort = liabilities.filter((r)=>r.group === \"Short-Term Liabilities\");\n    const liabLong = liabilities.filter((r)=>r.group === \"Long-Term Liabilities\");\n    const liabUncat = liabilities.filter((r)=>r.group === \"Unclassified Liabilities\");\n    const totalsAssets = sum(assetsCurrent) + sum(assetsNoncurrent) + sum(assetsUncat);\n    const totalsLiabilities = sum(liabShort) + sum(liabLong) + sum(liabUncat);\n    const totalsEquity = sum(equity);\n    const liabilitiesPlusEquity = totalsLiabilities + totalsEquity;\n    const validation = (0,_validations__WEBPACK_IMPORTED_MODULE_2__.validateBalanceSheet)(totalsAssets, totalsLiabilities, totalsEquity);\n    return {\n        raw_rows: rows,\n        grouped: {\n            assets_current: assetsCurrent,\n            assets_noncurrent: assetsNoncurrent,\n            assets_uncategorized: assetsUncat,\n            liabilities_short: liabShort,\n            liabilities_long: liabLong,\n            liabilities_uncategorized: liabUncat,\n            equity\n        },\n        totals: {\n            assets: totalsAssets,\n            liabilities: totalsLiabilities,\n            equity: totalsEquity,\n            liabilities_plus_equity: liabilitiesPlusEquity,\n            balance_diff: validation.diff\n        },\n        validations: {\n            is_balanced: validation.is_balanced\n        },\n        retained_earnings: {\n            amount: retained.amount,\n            trace: retained.trace\n        }\n    };\n}\nfunction classifyAssetGroup(kelompok, category) {\n    const k = String(kelompok || \"\").toLowerCase();\n    const c = String(category || \"\").toLowerCase();\n    if (k.includes(\"lancar\") || c.includes(\"current\")) return \"Current Assets\";\n    if (k.includes(\"tidak\") || k.includes(\"tetap\") || c.includes(\"non-current\") || c.includes(\"fixed\")) return \"Non-Current Assets\";\n    return \"Unclassified Assets\";\n}\nfunction classifyLiabilityGroup(kelompok, category) {\n    const k = String(kelompok || \"\").toLowerCase();\n    const c = String(category || \"\").toLowerCase();\n    if (k.includes(\"pendek\") || k.includes(\"short\") || c.includes(\"short\")) return \"Short-Term Liabilities\";\n    if (k.includes(\"panjang\") || k.includes(\"long\") || c.includes(\"long\")) return \"Long-Term Liabilities\";\n    return \"Unclassified Liabilities\";\n}\nfunction calcRetainedEarnings(rows) {\n    let income = 0;\n    let expense = 0;\n    const incomeRows = [];\n    const expenseRows = [];\n    for (const r of rows){\n        const t = String(r.account_type || \"\").toLowerCase();\n        if (t === \"income\") {\n            income += r.credit - r.debit;\n            incomeRows.push(r);\n        }\n        if (t === \"expense\") {\n            expense += r.debit - r.credit;\n            expenseRows.push(r);\n        }\n    }\n    const amount = income - expense;\n    const trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.mergeTraces)([\n        (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.traceFromRows)(incomeRows),\n        (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.traceFromRows)(expenseRows)\n    ]);\n    return {\n        amount,\n        trace\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QywrREFBYUEsQ0FBQ2dGO1FBQWFoRiwrREFBYUEsQ0FBQ2lGO0tBQWE7SUFDakYsT0FBTztRQUFFekM7UUFBUXRCO0lBQU07QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L2JhbGFuY2VTaGVldC50cz9lMGZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQmFsYW5jZVNoZWV0UmVwb3J0LCBCYWxhbmNlU2hlZXRSb3csIEpvdXJuYWxSb3cgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgZmlsdGVyQXNPZiB9IGZyb20gXCIuL2FjY291bnRpbmdcIjtcbmltcG9ydCB7IGFjY291bnRGcm9tUm93LCBiYWxhbmNlRnJvbVJvd3MsIG1lcmdlVHJhY2VzLCB0cmFjZUZyb21Sb3dzIH0gZnJvbSBcIi4vYWNjb3VudGluZ0xvZ2ljXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUJhbGFuY2VTaGVldCB9IGZyb20gXCIuL3ZhbGlkYXRpb25zXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjQmFsYW5jZVNoZWV0KGpvdXJuYWxzOiBKb3VybmFsUm93W10sIGFzT2ZEYXRlOiBzdHJpbmcgfCBudWxsKTogQmFsYW5jZVNoZWV0UmVwb3J0IHtcbiAgY29uc3Qgcm93cyA9IGZpbHRlckFzT2Yoam91cm5hbHMsIGFzT2ZEYXRlKTtcblxuICBjb25zdCBhY2NNYXAgPSBuZXcgTWFwPHN0cmluZywgeyByb3c6IEJhbGFuY2VTaGVldFJvdzsgcmF3OiBKb3VybmFsUm93W10gfT4oKTtcblxuICBmb3IgKGNvbnN0IHIgb2Ygcm93cykge1xuICAgIGNvbnN0IGlkID0gci5hY2NvdW50X2lkIHx8IFwiKHVua25vd24pXCI7XG4gICAgaWYgKCFhY2NNYXAuaGFzKGlkKSkge1xuICAgICAgYWNjTWFwLnNldChpZCwge1xuICAgICAgICByb3c6IHtcbiAgICAgICAgICBhY2NvdW50OiBhY2NvdW50RnJvbVJvdyhyKSxcbiAgICAgICAgICBncm91cDogXCJcIixcbiAgICAgICAgICBiYWxhbmNlOiAwLFxuICAgICAgICAgIHNvdXJjZTogXCJhY2NvdW50XCIsXG4gICAgICAgICAgdHJhY2U6IHsgcm93X2lkczogW10sIGhlYWRlcl9pZHM6IFtdIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJhdzogW10sXG4gICAgICB9KTtcbiAgICB9XG4gICAgYWNjTWFwLmdldChpZCkhLnJhdy5wdXNoKHIpO1xuICB9XG5cbiAgY29uc3QgYXNzZXRzOiBCYWxhbmNlU2hlZXRSb3dbXSA9IFtdO1xuICBjb25zdCBsaWFiaWxpdGllczogQmFsYW5jZVNoZWV0Um93W10gPSBbXTtcbiAgY29uc3QgZXF1aXR5OiBCYWxhbmNlU2hlZXRSb3dbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgeyByb3csIHJhdyB9IG9mIGFjY01hcC52YWx1ZXMoKSkge1xuICAgIHJvdy5iYWxhbmNlID0gYmFsYW5jZUZyb21Sb3dzKHJhdywgcm93LmFjY291bnQuYWNjb3VudF90eXBlKTtcbiAgICByb3cudHJhY2UgPSB0cmFjZUZyb21Sb3dzKHJhdyk7XG5cbiAgICBjb25zdCB0ID0gU3RyaW5nKHJvdy5hY2NvdW50LmFjY291bnRfdHlwZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0ID09PSBcImFzc2V0XCIpIHtcbiAgICAgIHJvdy5ncm91cCA9IGNsYXNzaWZ5QXNzZXRHcm91cChyb3cuYWNjb3VudC5rZWxvbXBva19uZXJhY2EsIHJvdy5hY2NvdW50LmFjY291bnRfY2F0ZWdvcnkpO1xuICAgICAgYXNzZXRzLnB1c2gocm93KTtcbiAgICB9IGVsc2UgaWYgKHQgPT09IFwibGlhYmlsaXR5XCIpIHtcbiAgICAgIHJvdy5ncm91cCA9IGNsYXNzaWZ5TGlhYmlsaXR5R3JvdXAocm93LmFjY291bnQua2Vsb21wb2tfbmVyYWNhLCByb3cuYWNjb3VudC5hY2NvdW50X2NhdGVnb3J5KTtcbiAgICAgIGxpYWJpbGl0aWVzLnB1c2gocm93KTtcbiAgICB9IGVsc2UgaWYgKHQgPT09IFwiZXF1aXR5XCIpIHtcbiAgICAgIHJvdy5ncm91cCA9IFwiRXF1aXR5XCI7XG4gICAgICBlcXVpdHkucHVzaChyb3cpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHJldGFpbmVkID0gY2FsY1JldGFpbmVkRWFybmluZ3Mocm93cyk7XG4gIGNvbnN0IHJldGFpbmVkUm93OiBCYWxhbmNlU2hlZXRSb3cgPSB7XG4gICAgYWNjb3VudDoge1xuICAgICAgYWNjb3VudF9pZDogXCJyZXRhaW5lZF9lYXJuaW5nc1wiLFxuICAgICAgYWNjb3VudF9uYW1lOiBcIlJldGFpbmVkIEVhcm5pbmdzIChBdXRvKVwiLFxuICAgICAgYWNjb3VudF9jYXRlZ29yeTogXCJFcXVpdHlcIixcbiAgICAgIGFjY291bnRfdHlwZTogXCJlcXVpdHlcIixcbiAgICAgIGtlbG9tcG9rX25lcmFjYTogXCJSZXRhaW5lZCBFYXJuaW5nc1wiLFxuICAgIH0sXG4gICAgZ3JvdXA6IFwiRXF1aXR5XCIsXG4gICAgYmFsYW5jZTogcmV0YWluZWQuYW1vdW50LFxuICAgIHNvdXJjZTogXCJyZXRhaW5lZF9lYXJuaW5nc1wiLFxuICAgIHRyYWNlOiByZXRhaW5lZC50cmFjZSxcbiAgfTtcblxuICBpZiAocmV0YWluZWQuYW1vdW50ICE9PSAwKSB7XG4gICAgZXF1aXR5LnB1c2gocmV0YWluZWRSb3cpO1xuICB9XG5cbiAgY29uc3Qgc3VtID0gKGFycjogQmFsYW5jZVNoZWV0Um93W10pID0+IGFyci5yZWR1Y2UoKHMsIHgpID0+IHMgKyAoeC5iYWxhbmNlIHx8IDApLCAwKTtcblxuICBjb25zdCBhc3NldHNDdXJyZW50ID0gYXNzZXRzLmZpbHRlcigocikgPT4gci5ncm91cCA9PT0gXCJDdXJyZW50IEFzc2V0c1wiKTtcbiAgY29uc3QgYXNzZXRzTm9uY3VycmVudCA9IGFzc2V0cy5maWx0ZXIoKHIpID0+IHIuZ3JvdXAgPT09IFwiTm9uLUN1cnJlbnQgQXNzZXRzXCIpO1xuICBjb25zdCBhc3NldHNVbmNhdCA9IGFzc2V0cy5maWx0ZXIoKHIpID0+IHIuZ3JvdXAgPT09IFwiVW5jbGFzc2lmaWVkIEFzc2V0c1wiKTtcblxuICBjb25zdCBsaWFiU2hvcnQgPSBsaWFiaWxpdGllcy5maWx0ZXIoKHIpID0+IHIuZ3JvdXAgPT09IFwiU2hvcnQtVGVybSBMaWFiaWxpdGllc1wiKTtcbiAgY29uc3QgbGlhYkxvbmcgPSBsaWFiaWxpdGllcy5maWx0ZXIoKHIpID0+IHIuZ3JvdXAgPT09IFwiTG9uZy1UZXJtIExpYWJpbGl0aWVzXCIpO1xuICBjb25zdCBsaWFiVW5jYXQgPSBsaWFiaWxpdGllcy5maWx0ZXIoKHIpID0+IHIuZ3JvdXAgPT09IFwiVW5jbGFzc2lmaWVkIExpYWJpbGl0aWVzXCIpO1xuXG4gIGNvbnN0IHRvdGFsc0Fzc2V0cyA9IHN1bShhc3NldHNDdXJyZW50KSArIHN1bShhc3NldHNOb25jdXJyZW50KSArIHN1bShhc3NldHNVbmNhdCk7XG4gIGNvbnN0IHRvdGFsc0xpYWJpbGl0aWVzID0gc3VtKGxpYWJTaG9ydCkgKyBzdW0obGlhYkxvbmcpICsgc3VtKGxpYWJVbmNhdCk7XG4gIGNvbnN0IHRvdGFsc0VxdWl0eSA9IHN1bShlcXVpdHkpO1xuICBjb25zdCBsaWFiaWxpdGllc1BsdXNFcXVpdHkgPSB0b3RhbHNMaWFiaWxpdGllcyArIHRvdGFsc0VxdWl0eTtcbiAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlQmFsYW5jZVNoZWV0KHRvdGFsc0Fzc2V0cywgdG90YWxzTGlhYmlsaXRpZXMsIHRvdGFsc0VxdWl0eSk7XG5cbiAgcmV0dXJuIHtcbiAgICByYXdfcm93czogcm93cyxcbiAgICBncm91cGVkOiB7XG4gICAgICBhc3NldHNfY3VycmVudDogYXNzZXRzQ3VycmVudCxcbiAgICAgIGFzc2V0c19ub25jdXJyZW50OiBhc3NldHNOb25jdXJyZW50LFxuICAgICAgYXNzZXRzX3VuY2F0ZWdvcml6ZWQ6IGFzc2V0c1VuY2F0LFxuICAgICAgbGlhYmlsaXRpZXNfc2hvcnQ6IGxpYWJTaG9ydCxcbiAgICAgIGxpYWJpbGl0aWVzX2xvbmc6IGxpYWJMb25nLFxuICAgICAgbGlhYmlsaXRpZXNfdW5jYXRlZ29yaXplZDogbGlhYlVuY2F0LFxuICAgICAgZXF1aXR5LFxuICAgIH0sXG4gICAgdG90YWxzOiB7XG4gICAgICBhc3NldHM6IHRvdGFsc0Fzc2V0cyxcbiAgICAgIGxpYWJpbGl0aWVzOiB0b3RhbHNMaWFiaWxpdGllcyxcbiAgICAgIGVxdWl0eTogdG90YWxzRXF1aXR5LFxuICAgICAgbGlhYmlsaXRpZXNfcGx1c19lcXVpdHk6IGxpYWJpbGl0aWVzUGx1c0VxdWl0eSxcbiAgICAgIGJhbGFuY2VfZGlmZjogdmFsaWRhdGlvbi5kaWZmLFxuICAgIH0sXG4gICAgdmFsaWRhdGlvbnM6IHsgaXNfYmFsYW5jZWQ6IHZhbGlkYXRpb24uaXNfYmFsYW5jZWQgfSxcbiAgICByZXRhaW5lZF9lYXJuaW5nczogeyBhbW91bnQ6IHJldGFpbmVkLmFtb3VudCwgdHJhY2U6IHJldGFpbmVkLnRyYWNlIH0sXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsYXNzaWZ5QXNzZXRHcm91cChrZWxvbXBvazogc3RyaW5nIHwgbnVsbCwgY2F0ZWdvcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGsgPSBTdHJpbmcoa2Vsb21wb2sgfHwgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgYyA9IFN0cmluZyhjYXRlZ29yeSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuXG4gIGlmIChrLmluY2x1ZGVzKFwibGFuY2FyXCIpIHx8IGMuaW5jbHVkZXMoXCJjdXJyZW50XCIpKSByZXR1cm4gXCJDdXJyZW50IEFzc2V0c1wiO1xuICBpZiAoay5pbmNsdWRlcyhcInRpZGFrXCIpIHx8IGsuaW5jbHVkZXMoXCJ0ZXRhcFwiKSB8fCBjLmluY2x1ZGVzKFwibm9uLWN1cnJlbnRcIikgfHwgYy5pbmNsdWRlcyhcImZpeGVkXCIpKSByZXR1cm4gXCJOb24tQ3VycmVudCBBc3NldHNcIjtcbiAgcmV0dXJuIFwiVW5jbGFzc2lmaWVkIEFzc2V0c1wiO1xufVxuXG5mdW5jdGlvbiBjbGFzc2lmeUxpYWJpbGl0eUdyb3VwKGtlbG9tcG9rOiBzdHJpbmcgfCBudWxsLCBjYXRlZ29yeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgayA9IFN0cmluZyhrZWxvbXBvayB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBjID0gU3RyaW5nKGNhdGVnb3J5IHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG5cbiAgaWYgKGsuaW5jbHVkZXMoXCJwZW5kZWtcIikgfHwgay5pbmNsdWRlcyhcInNob3J0XCIpIHx8IGMuaW5jbHVkZXMoXCJzaG9ydFwiKSkgcmV0dXJuIFwiU2hvcnQtVGVybSBMaWFiaWxpdGllc1wiO1xuICBpZiAoay5pbmNsdWRlcyhcInBhbmphbmdcIikgfHwgay5pbmNsdWRlcyhcImxvbmdcIikgfHwgYy5pbmNsdWRlcyhcImxvbmdcIikpIHJldHVybiBcIkxvbmctVGVybSBMaWFiaWxpdGllc1wiO1xuICByZXR1cm4gXCJVbmNsYXNzaWZpZWQgTGlhYmlsaXRpZXNcIjtcbn1cblxuZnVuY3Rpb24gY2FsY1JldGFpbmVkRWFybmluZ3Mocm93czogSm91cm5hbFJvd1tdKTogeyBhbW91bnQ6IG51bWJlcjsgdHJhY2U6IFJldHVyblR5cGU8dHlwZW9mIHRyYWNlRnJvbVJvd3M+IH0ge1xuICBsZXQgaW5jb21lID0gMDtcbiAgbGV0IGV4cGVuc2UgPSAwO1xuICBjb25zdCBpbmNvbWVSb3dzOiBKb3VybmFsUm93W10gPSBbXTtcbiAgY29uc3QgZXhwZW5zZVJvd3M6IEpvdXJuYWxSb3dbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgciBvZiByb3dzKSB7XG4gICAgY29uc3QgdCA9IFN0cmluZyhyLmFjY291bnRfdHlwZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0ID09PSBcImluY29tZVwiKSB7XG4gICAgICBpbmNvbWUgKz0gci5jcmVkaXQgLSByLmRlYml0O1xuICAgICAgaW5jb21lUm93cy5wdXNoKHIpO1xuICAgIH1cbiAgICBpZiAodCA9PT0gXCJleHBlbnNlXCIpIHtcbiAgICAgIGV4cGVuc2UgKz0gci5kZWJpdCAtIHIuY3JlZGl0O1xuICAgICAgZXhwZW5zZVJvd3MucHVzaChyKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBhbW91bnQgPSBpbmNvbWUgLSBleHBlbnNlO1xuICBjb25zdCB0cmFjZSA9IG1lcmdlVHJhY2VzKFt0cmFjZUZyb21Sb3dzKGluY29tZVJvd3MpLCB0cmFjZUZyb21Sb3dzKGV4cGVuc2VSb3dzKV0pO1xuICByZXR1cm4geyBhbW91bnQsIHRyYWNlIH07XG59XG4iXSwibmFtZXMiOlsiZmlsdGVyQXNPZiIsImFjY291bnRGcm9tUm93IiwiYmFsYW5jZUZyb21Sb3dzIiwibWVyZ2VUcmFjZXMiLCJ0cmFjZUZyb21Sb3dzIiwidmFsaWRhdGVCYWxhbmNlU2hlZXQiLCJjYWxjQmFsYW5jZVNoZWV0Iiwiam91cm5hbHMiLCJhc09mRGF0ZSIsInJvd3MiLCJhY2NNYXAiLCJNYXAiLCJyIiwiaWQiLCJhY2NvdW50X2lkIiwiaGFzIiwic2V0Iiwicm93IiwiYWNjb3VudCIsImdyb3VwIiwiYmFsYW5jZSIsInNvdXJjZSIsInRyYWNlIiwicm93X2lkcyIsImhlYWRlcl9pZHMiLCJyYXciLCJnZXQiLCJwdXNoIiwiYXNzZXRzIiwibGlhYmlsaXRpZXMiLCJlcXVpdHkiLCJ2YWx1ZXMiLCJhY2NvdW50X3R5cGUiLCJ0IiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJjbGFzc2lmeUFzc2V0R3JvdXAiLCJrZWxvbXBva19uZXJhY2EiLCJhY2NvdW50X2NhdGVnb3J5IiwiY2xhc3NpZnlMaWFiaWxpdHlHcm91cCIsInJldGFpbmVkIiwiY2FsY1JldGFpbmVkRWFybmluZ3MiLCJyZXRhaW5lZFJvdyIsImFjY291bnRfbmFtZSIsImFtb3VudCIsInN1bSIsImFyciIsInJlZHVjZSIsInMiLCJ4IiwiYXNzZXRzQ3VycmVudCIsImZpbHRlciIsImFzc2V0c05vbmN1cnJlbnQiLCJhc3NldHNVbmNhdCIsImxpYWJTaG9ydCIsImxpYWJMb25nIiwibGlhYlVuY2F0IiwidG90YWxzQXNzZXRzIiwidG90YWxzTGlhYmlsaXRpZXMiLCJ0b3RhbHNFcXVpdHkiLCJsaWFiaWxpdGllc1BsdXNFcXVpdHkiLCJ2YWxpZGF0aW9uIiwicmF3X3Jvd3MiLCJncm91cGVkIiwiYXNzZXRzX2N1cnJlbnQiLCJhc3NldHNfbm9uY3VycmVudCIsImFzc2V0c191bmNhdGVnb3JpemVkIiwibGlhYmlsaXRpZXNfc2hvcnQiLCJsaWFiaWxpdGllc19sb25nIiwibGlhYmlsaXRpZXNfdW5jYXRlZ29yaXplZCIsInRvdGFscyIsImxpYWJpbGl0aWVzX3BsdXNfZXF1aXR5IiwiYmFsYW5jZV9kaWZmIiwiZGlmZiIsInZhbGlkYXRpb25zIiwiaXNfYmFsYW5jZWQiLCJyZXRhaW5lZF9lYXJuaW5ncyIsImtlbG9tcG9rIiwiY2F0ZWdvcnkiLCJrIiwiYyIsImluY2x1ZGVzIiwiaW5jb21lIiwiZXhwZW5zZSIsImluY29tZVJvd3MiLCJleHBlbnNlUm93cyIsImNyZWRpdCIsImRlYml0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/balanceSheet.ts\n");

/***/ }),

/***/ "(api)/./lib/report/cashflow.ts":
/*!********************************!*\
  !*** ./lib/report/cashflow.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcCashflowDirect: () => (/* binding */ calcCashflowDirect)\n/* harmony export */ });\n/* harmony import */ var _accountingLogic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./accountingLogic */ \"(api)/./lib/report/accountingLogic.ts\");\n/* harmony import */ var _validations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validations */ \"(api)/./lib/report/validations.ts\");\n\n\nfunction calcCashflowDirect(journals) {\n    const cashRows = journals.filter((r)=>r.is_cash_account);\n    const operating = new Map();\n    const investing = new Map();\n    const financing = new Map();\n    const uncategorized = new Map();\n    let netChange = 0;\n    for (const r of cashRows){\n        const delta = r.debit - r.credit;\n        netChange += delta;\n        const activity = normalizeActivity(r.cashflow_activity);\n        const target = pickBucket(activity, {\n            operating,\n            investing,\n            financing,\n            uncategorized\n        });\n        if (!target.has(activity)) target.set(activity, {\n            activity,\n            amount: 0,\n            trace: {\n                row_ids: [],\n                header_ids: []\n            }\n        });\n        const row = target.get(activity);\n        row.amount += delta;\n        row.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_0__.mergeTraces)([\n            row.trace,\n            (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_0__.traceFromRows)([\n                r\n            ])\n        ]);\n    }\n    const toList = (m)=>Array.from(m.values()).sort((a, b)=>a.activity.localeCompare(b.activity));\n    const operatingList = toList(operating);\n    const investingList = toList(investing);\n    const financingList = toList(financing);\n    const uncategorizedList = toList(uncategorized);\n    const sum = (arr)=>arr.reduce((s, x)=>s + (x.amount || 0), 0);\n    const totals = {\n        net_change: netChange,\n        operating: sum(operatingList),\n        investing: sum(investingList),\n        financing: sum(financingList),\n        uncategorized: sum(uncategorizedList)\n    };\n    const validation = (0,_validations__WEBPACK_IMPORTED_MODULE_1__.validateCashflow)(totals.net_change, totals.operating + totals.investing + totals.financing + totals.uncategorized);\n    return {\n        raw_rows: cashRows,\n        grouped: {\n            operating: operatingList,\n            investing: investingList,\n            financing: financingList,\n            uncategorized: uncategorizedList\n        },\n        totals,\n        validations: {\n            net_matches: validation.net_matches\n        }\n    };\n}\nfunction normalizeActivity(activity) {\n    const a = String(activity || \"\").trim();\n    if (!a) return \"Uncategorized\";\n    return a;\n}\nfunction pickBucket(activity, buckets) {\n    const a = activity.toLowerCase();\n    if (a.includes(\"operat\")) return buckets.operating;\n    if (a.includes(\"invest\")) return buckets.investing;\n    if (a.includes(\"financ\") || a.includes(\"fund\")) return buckets.financing;\n    if (a === \"uncategorized\" || a === \"unknown\") return buckets.uncategorized;\n    return buckets.uncategorized;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFhdkIsRUFBRXVCLFFBQVEsQ0FBQyxTQUFTLE9BQU9GLFFBQVE5QyxTQUFTO0lBQ3hFLElBQUl5QixNQUFNLG1CQUFtQkEsTUFBTSxXQUFXLE9BQU9xQixRQUFRN0MsYUFBYTtJQUMxRSxPQUFPNkMsUUFBUTdDLGFBQWE7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L2Nhc2hmbG93LnRzPzU4ZDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDYXNoZmxvd0FjdGl2aXR5Um93LCBDYXNoZmxvd1JlcG9ydCwgSm91cm5hbFJvdyB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBtZXJnZVRyYWNlcywgdHJhY2VGcm9tUm93cyB9IGZyb20gXCIuL2FjY291bnRpbmdMb2dpY1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVDYXNoZmxvdyB9IGZyb20gXCIuL3ZhbGlkYXRpb25zXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjQ2FzaGZsb3dEaXJlY3Qoam91cm5hbHM6IEpvdXJuYWxSb3dbXSk6IENhc2hmbG93UmVwb3J0IHtcbiAgY29uc3QgY2FzaFJvd3MgPSBqb3VybmFscy5maWx0ZXIoKHIpID0+IHIuaXNfY2FzaF9hY2NvdW50KTtcblxuICBjb25zdCBvcGVyYXRpbmcgPSBuZXcgTWFwPHN0cmluZywgQ2FzaGZsb3dBY3Rpdml0eVJvdz4oKTtcbiAgY29uc3QgaW52ZXN0aW5nID0gbmV3IE1hcDxzdHJpbmcsIENhc2hmbG93QWN0aXZpdHlSb3c+KCk7XG4gIGNvbnN0IGZpbmFuY2luZyA9IG5ldyBNYXA8c3RyaW5nLCBDYXNoZmxvd0FjdGl2aXR5Um93PigpO1xuICBjb25zdCB1bmNhdGVnb3JpemVkID0gbmV3IE1hcDxzdHJpbmcsIENhc2hmbG93QWN0aXZpdHlSb3c+KCk7XG5cbiAgbGV0IG5ldENoYW5nZSA9IDA7XG5cbiAgZm9yIChjb25zdCByIG9mIGNhc2hSb3dzKSB7XG4gICAgY29uc3QgZGVsdGEgPSByLmRlYml0IC0gci5jcmVkaXQ7XG4gICAgbmV0Q2hhbmdlICs9IGRlbHRhO1xuXG4gICAgY29uc3QgYWN0aXZpdHkgPSBub3JtYWxpemVBY3Rpdml0eShyLmNhc2hmbG93X2FjdGl2aXR5KTtcbiAgICBjb25zdCB0YXJnZXQgPSBwaWNrQnVja2V0KGFjdGl2aXR5LCB7IG9wZXJhdGluZywgaW52ZXN0aW5nLCBmaW5hbmNpbmcsIHVuY2F0ZWdvcml6ZWQgfSk7XG4gICAgaWYgKCF0YXJnZXQuaGFzKGFjdGl2aXR5KSkgdGFyZ2V0LnNldChhY3Rpdml0eSwgeyBhY3Rpdml0eSwgYW1vdW50OiAwLCB0cmFjZTogeyByb3dfaWRzOiBbXSwgaGVhZGVyX2lkczogW10gfSB9KTtcbiAgICBjb25zdCByb3cgPSB0YXJnZXQuZ2V0KGFjdGl2aXR5KSE7XG4gICAgcm93LmFtb3VudCArPSBkZWx0YTtcbiAgICByb3cudHJhY2UgPSBtZXJnZVRyYWNlcyhbcm93LnRyYWNlLCB0cmFjZUZyb21Sb3dzKFtyXSldKTtcbiAgfVxuXG4gIGNvbnN0IHRvTGlzdCA9IChtOiBNYXA8c3RyaW5nLCBDYXNoZmxvd0FjdGl2aXR5Um93PikgPT5cbiAgICBBcnJheS5mcm9tKG0udmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IGEuYWN0aXZpdHkubG9jYWxlQ29tcGFyZShiLmFjdGl2aXR5KSk7XG5cbiAgY29uc3Qgb3BlcmF0aW5nTGlzdCA9IHRvTGlzdChvcGVyYXRpbmcpO1xuICBjb25zdCBpbnZlc3RpbmdMaXN0ID0gdG9MaXN0KGludmVzdGluZyk7XG4gIGNvbnN0IGZpbmFuY2luZ0xpc3QgPSB0b0xpc3QoZmluYW5jaW5nKTtcbiAgY29uc3QgdW5jYXRlZ29yaXplZExpc3QgPSB0b0xpc3QodW5jYXRlZ29yaXplZCk7XG5cbiAgY29uc3Qgc3VtID0gKGFycjogQ2FzaGZsb3dBY3Rpdml0eVJvd1tdKSA9PiBhcnIucmVkdWNlKChzLCB4KSA9PiBzICsgKHguYW1vdW50IHx8IDApLCAwKTtcbiAgY29uc3QgdG90YWxzID0ge1xuICAgIG5ldF9jaGFuZ2U6IG5ldENoYW5nZSxcbiAgICBvcGVyYXRpbmc6IHN1bShvcGVyYXRpbmdMaXN0KSxcbiAgICBpbnZlc3Rpbmc6IHN1bShpbnZlc3RpbmdMaXN0KSxcbiAgICBmaW5hbmNpbmc6IHN1bShmaW5hbmNpbmdMaXN0KSxcbiAgICB1bmNhdGVnb3JpemVkOiBzdW0odW5jYXRlZ29yaXplZExpc3QpLFxuICB9O1xuXG4gIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZUNhc2hmbG93KHRvdGFscy5uZXRfY2hhbmdlLCB0b3RhbHMub3BlcmF0aW5nICsgdG90YWxzLmludmVzdGluZyArIHRvdGFscy5maW5hbmNpbmcgKyB0b3RhbHMudW5jYXRlZ29yaXplZCk7XG5cbiAgcmV0dXJuIHtcbiAgICByYXdfcm93czogY2FzaFJvd3MsXG4gICAgZ3JvdXBlZDoge1xuICAgICAgb3BlcmF0aW5nOiBvcGVyYXRpbmdMaXN0LFxuICAgICAgaW52ZXN0aW5nOiBpbnZlc3RpbmdMaXN0LFxuICAgICAgZmluYW5jaW5nOiBmaW5hbmNpbmdMaXN0LFxuICAgICAgdW5jYXRlZ29yaXplZDogdW5jYXRlZ29yaXplZExpc3QsXG4gICAgfSxcbiAgICB0b3RhbHMsXG4gICAgdmFsaWRhdGlvbnM6IHsgbmV0X21hdGNoZXM6IHZhbGlkYXRpb24ubmV0X21hdGNoZXMgfSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQWN0aXZpdHkoYWN0aXZpdHk6IHN0cmluZyB8IG51bGwpOiBzdHJpbmcge1xuICBjb25zdCBhID0gU3RyaW5nKGFjdGl2aXR5IHx8IFwiXCIpLnRyaW0oKTtcbiAgaWYgKCFhKSByZXR1cm4gXCJVbmNhdGVnb3JpemVkXCI7XG4gIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiBwaWNrQnVja2V0KFxuICBhY3Rpdml0eTogc3RyaW5nLFxuICBidWNrZXRzOiB7XG4gICAgb3BlcmF0aW5nOiBNYXA8c3RyaW5nLCBDYXNoZmxvd0FjdGl2aXR5Um93PjtcbiAgICBpbnZlc3Rpbmc6IE1hcDxzdHJpbmcsIENhc2hmbG93QWN0aXZpdHlSb3c+O1xuICAgIGZpbmFuY2luZzogTWFwPHN0cmluZywgQ2FzaGZsb3dBY3Rpdml0eVJvdz47XG4gICAgdW5jYXRlZ29yaXplZDogTWFwPHN0cmluZywgQ2FzaGZsb3dBY3Rpdml0eVJvdz47XG4gIH1cbik6IE1hcDxzdHJpbmcsIENhc2hmbG93QWN0aXZpdHlSb3c+IHtcbiAgY29uc3QgYSA9IGFjdGl2aXR5LnRvTG93ZXJDYXNlKCk7XG4gIGlmIChhLmluY2x1ZGVzKFwib3BlcmF0XCIpKSByZXR1cm4gYnVja2V0cy5vcGVyYXRpbmc7XG4gIGlmIChhLmluY2x1ZGVzKFwiaW52ZXN0XCIpKSByZXR1cm4gYnVja2V0cy5pbnZlc3Rpbmc7XG4gIGlmIChhLmluY2x1ZGVzKFwiZmluYW5jXCIpIHx8IGEuaW5jbHVkZXMoXCJmdW5kXCIpKSByZXR1cm4gYnVja2V0cy5maW5hbmNpbmc7XG4gIGlmIChhID09PSBcInVuY2F0ZWdvcml6ZWRcIiB8fCBhID09PSBcInVua25vd25cIikgcmV0dXJuIGJ1Y2tldHMudW5jYXRlZ29yaXplZDtcbiAgcmV0dXJuIGJ1Y2tldHMudW5jYXRlZ29yaXplZDtcbn1cbiJdLCJuYW1lcyI6WyJtZXJnZVRyYWNlcyIsInRyYWNlRnJvbVJvd3MiLCJ2YWxpZGF0ZUNhc2hmbG93IiwiY2FsY0Nhc2hmbG93RGlyZWN0Iiwiam91cm5hbHMiLCJjYXNoUm93cyIsImZpbHRlciIsInIiLCJpc19jYXNoX2FjY291bnQiLCJvcGVyYXRpbmciLCJNYXAiLCJpbnZlc3RpbmciLCJmaW5hbmNpbmciLCJ1bmNhdGVnb3JpemVkIiwibmV0Q2hhbmdlIiwiZGVsdGEiLCJkZWJpdCIsImNyZWRpdCIsImFjdGl2aXR5Iiwibm9ybWFsaXplQWN0aXZpdHkiLCJjYXNoZmxvd19hY3Rpdml0eSIsInRhcmdldCIsInBpY2tCdWNrZXQiLCJoYXMiLCJzZXQiLCJhbW91bnQiLCJ0cmFjZSIsInJvd19pZHMiLCJoZWFkZXJfaWRzIiwicm93IiwiZ2V0IiwidG9MaXN0IiwibSIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsInNvcnQiLCJhIiwiYiIsImxvY2FsZUNvbXBhcmUiLCJvcGVyYXRpbmdMaXN0IiwiaW52ZXN0aW5nTGlzdCIsImZpbmFuY2luZ0xpc3QiLCJ1bmNhdGVnb3JpemVkTGlzdCIsInN1bSIsImFyciIsInJlZHVjZSIsInMiLCJ4IiwidG90YWxzIiwibmV0X2NoYW5nZSIsInZhbGlkYXRpb24iLCJyYXdfcm93cyIsImdyb3VwZWQiLCJ2YWxpZGF0aW9ucyIsIm5ldF9tYXRjaGVzIiwiU3RyaW5nIiwidHJpbSIsImJ1Y2tldHMiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/cashflow.ts\n");

/***/ }),

/***/ "(api)/./lib/report/checks.ts":
/*!******************************!*\
  !*** ./lib/report/checks.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   basicChecks: () => (/* binding */ basicChecks)\n/* harmony export */ });\nfunction basicChecks(journals) {\n    let totalDebit = 0;\n    let totalCredit = 0;\n    let missingDates = 0;\n    for (const r of journals){\n        totalDebit += r.debit;\n        totalCredit += r.credit;\n        if (!r.transaction_date) missingDates += 1;\n    }\n    const isBalanced = Math.abs(totalDebit - totalCredit) < 0.0001;\n    return {\n        totalDebit,\n        totalCredit,\n        isBalanced,\n        missingDates,\n        rowCount: journals.length\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVwb3J0L2NoZWNrcy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0EsWUFBWUMsUUFBc0I7SUFDaEQsSUFBSUMsYUFBYTtJQUNqQixJQUFJQyxjQUFjO0lBQ2xCLElBQUlDLGVBQWU7SUFFbkIsS0FBSyxNQUFNQyxLQUFLSixTQUFVO1FBQ3hCQyxjQUFjRyxFQUFFQyxLQUFLO1FBQ3JCSCxlQUFlRSxFQUFFRSxNQUFNO1FBQ3ZCLElBQUksQ0FBQ0YsRUFBRUcsZ0JBQWdCLEVBQUVKLGdCQUFnQjtJQUMzQztJQUVBLE1BQU1LLGFBQWFDLEtBQUtDLEdBQUcsQ0FBQ1QsYUFBYUMsZUFBZTtJQUV4RCxPQUFPO1FBQUVEO1FBQVlDO1FBQWFNO1FBQVlMO1FBQWNRLFVBQVVYLFNBQVNZLE1BQU07SUFBQztBQUN4RiIsInNvdXJjZXMiOlsid2VicGFjazovL29wdGl2dXotcmVwb3J0LWVuZ2luZS8uL2xpYi9yZXBvcnQvY2hlY2tzLnRzP2E4NGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBCYXNpY0NoZWNrcywgSm91cm5hbFJvdyB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBiYXNpY0NoZWNrcyhqb3VybmFsczogSm91cm5hbFJvd1tdKTogQmFzaWNDaGVja3Mge1xuICBsZXQgdG90YWxEZWJpdCA9IDA7XG4gIGxldCB0b3RhbENyZWRpdCA9IDA7XG4gIGxldCBtaXNzaW5nRGF0ZXMgPSAwO1xuXG4gIGZvciAoY29uc3QgciBvZiBqb3VybmFscykge1xuICAgIHRvdGFsRGViaXQgKz0gci5kZWJpdDtcbiAgICB0b3RhbENyZWRpdCArPSByLmNyZWRpdDtcbiAgICBpZiAoIXIudHJhbnNhY3Rpb25fZGF0ZSkgbWlzc2luZ0RhdGVzICs9IDE7XG4gIH1cblxuICBjb25zdCBpc0JhbGFuY2VkID0gTWF0aC5hYnModG90YWxEZWJpdCAtIHRvdGFsQ3JlZGl0KSA8IDAuMDAwMTtcblxuICByZXR1cm4geyB0b3RhbERlYml0LCB0b3RhbENyZWRpdCwgaXNCYWxhbmNlZCwgbWlzc2luZ0RhdGVzLCByb3dDb3VudDogam91cm5hbHMubGVuZ3RoIH07XG59XG4iXSwibmFtZXMiOlsiYmFzaWNDaGVja3MiLCJqb3VybmFscyIsInRvdGFsRGViaXQiLCJ0b3RhbENyZWRpdCIsIm1pc3NpbmdEYXRlcyIsInIiLCJkZWJpdCIsImNyZWRpdCIsInRyYW5zYWN0aW9uX2RhdGUiLCJpc0JhbGFuY2VkIiwiTWF0aCIsImFicyIsInJvd0NvdW50IiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/checks.ts\n");

/***/ }),

/***/ "(api)/./lib/report/comparative.ts":
/*!***********************************!*\
  !*** ./lib/report/comparative.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcComparativeBalanceSheet: () => (/* binding */ calcComparativeBalanceSheet),\n/* harmony export */   calcComparativeProfitLoss: () => (/* binding */ calcComparativeProfitLoss)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n/* harmony import */ var _profitLoss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./profitLoss */ \"(api)/./lib/report/profitLoss.ts\");\n/* harmony import */ var _balanceSheet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./balanceSheet */ \"(api)/./lib/report/balanceSheet.ts\");\n\n\n\nfunction calcComparativeProfitLoss(currentJournals, previousJournals, currentPeriod, previousPeriod) {\n    const current = (0,_profitLoss__WEBPACK_IMPORTED_MODULE_1__.calcProfitLoss)(currentJournals);\n    const previous = (0,_profitLoss__WEBPACK_IMPORTED_MODULE_1__.calcProfitLoss)(previousJournals);\n    const incomeSection = buildPLSection(\"Income\", current, previous, \"income\");\n    const expenseSection = buildPLSection(\"Expense\", current, previous, \"expense\");\n    const netProfitRow = {\n        key: \"net_profit\",\n        label: \"Net Profit\",\n        current: current.totals.net_profit,\n        previous: previous.totals.net_profit,\n        variance: current.totals.net_profit - previous.totals.net_profit,\n        variance_pct: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.variancePct)(current.totals.net_profit, previous.totals.net_profit)\n    };\n    return {\n        income: incomeSection,\n        expense: expenseSection,\n        net_profit: netProfitRow,\n        current_period: currentPeriod,\n        previous_period: previousPeriod\n    };\n}\nfunction buildPLSection(label, current, previous, type) {\n    const currentGroup = current.grouped[type];\n    const previousGroup = previous.grouped[type];\n    const catMap = new Map();\n    for (const c of currentGroup.categories || []){\n        catMap.set(c.category, {\n            current: c.amount,\n            previous: 0\n        });\n    }\n    for (const c of previousGroup.categories || []){\n        if (!catMap.has(c.category)) catMap.set(c.category, {\n            current: 0,\n            previous: c.amount\n        });\n        else catMap.get(c.category).previous = c.amount;\n    }\n    const rows = [];\n    for (const [key, v] of catMap.entries()){\n        rows.push({\n            key,\n            label: key,\n            current: v.current,\n            previous: v.previous,\n            variance: v.current - v.previous,\n            variance_pct: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.variancePct)(v.current, v.previous)\n        });\n    }\n    rows.sort((a, b)=>a.label.localeCompare(b.label));\n    const totalCurrent = currentGroup.total || 0;\n    const totalPrevious = previousGroup.total || 0;\n    return {\n        label,\n        rows,\n        total: {\n            key: `${type}_total`,\n            label: `Total ${label}`,\n            current: totalCurrent,\n            previous: totalPrevious,\n            variance: totalCurrent - totalPrevious,\n            variance_pct: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.variancePct)(totalCurrent, totalPrevious)\n        }\n    };\n}\nfunction calcComparativeBalanceSheet(journals, currentAsOf, previousAsOf) {\n    const current = (0,_balanceSheet__WEBPACK_IMPORTED_MODULE_2__.calcBalanceSheet)(journals, currentAsOf);\n    const previous = (0,_balanceSheet__WEBPACK_IMPORTED_MODULE_2__.calcBalanceSheet)(journals, previousAsOf);\n    const assets = buildBSSection(\"Assets\", current, previous, \"assets\");\n    const liabilities = buildBSSection(\"Liabilities\", current, previous, \"liabilities\");\n    const equity = buildBSSection(\"Equity\", current, previous, \"equity\");\n    return {\n        assets,\n        liabilities,\n        equity,\n        totals: {\n            assets: buildTotalRow(\"Total Assets\", current.totals.assets, previous.totals.assets),\n            liabilities: buildTotalRow(\"Total Liabilities\", current.totals.liabilities, previous.totals.liabilities),\n            equity: buildTotalRow(\"Total Equity\", current.totals.equity, previous.totals.equity),\n            liabilities_plus_equity: buildTotalRow(\"Liabilities + Equity\", current.totals.liabilities_plus_equity, previous.totals.liabilities_plus_equity)\n        },\n        current_as_of: currentAsOf,\n        previous_as_of: previousAsOf\n    };\n}\nfunction buildBSSection(label, current, previous, type) {\n    const currentRows = getBSRows(current, type);\n    const previousRows = getBSRows(previous, type);\n    const map = new Map();\n    for (const r of currentRows){\n        map.set(r.account.account_name, {\n            current: r.balance,\n            previous: 0\n        });\n    }\n    for (const r of previousRows){\n        if (!map.has(r.account.account_name)) map.set(r.account.account_name, {\n            current: 0,\n            previous: r.balance\n        });\n        else map.get(r.account.account_name).previous = r.balance;\n    }\n    const rows = [];\n    for (const [key, v] of map.entries()){\n        rows.push({\n            key,\n            label: key,\n            current: v.current,\n            previous: v.previous,\n            variance: v.current - v.previous,\n            variance_pct: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.variancePct)(v.current, v.previous)\n        });\n    }\n    rows.sort((a, b)=>a.label.localeCompare(b.label));\n    const totalCurrent = sumBS(current, type);\n    const totalPrevious = sumBS(previous, type);\n    return {\n        label,\n        rows,\n        total: {\n            key: `${type}_total`,\n            label: `Total ${label}`,\n            current: totalCurrent,\n            previous: totalPrevious,\n            variance: totalCurrent - totalPrevious,\n            variance_pct: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.variancePct)(totalCurrent, totalPrevious)\n        }\n    };\n}\nfunction getBSRows(bs, type) {\n    if (type === \"assets\") return [\n        ...bs.grouped.assets_current,\n        ...bs.grouped.assets_noncurrent,\n        ...bs.grouped.assets_uncategorized\n    ];\n    if (type === \"liabilities\") return [\n        ...bs.grouped.liabilities_short,\n        ...bs.grouped.liabilities_long,\n        ...bs.grouped.liabilities_uncategorized\n    ];\n    return bs.grouped.equity;\n}\nfunction sumBS(bs, type) {\n    const rows = getBSRows(bs, type);\n    return rows.reduce((s, x)=>s + (x.balance || 0), 0);\n}\nfunction buildTotalRow(label, current, previous) {\n    return {\n        key: label,\n        label,\n        current,\n        previous,\n        variance: current - previous,\n        variance_pct: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.variancePct)(current, previous)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVBLE1BQU0sQ0FBQztZQUN2QlAsU0FBU3FDO1lBQ1RwQyxVQUFVc0M7WUFDVjdCLFVBQVUyQixlQUFlRTtZQUN6QjVCLGNBQWNuQixtREFBV0EsQ0FBQzZDLGNBQWNFO1FBQzFDO0lBQ0Y7QUFDRjtBQUVBLFNBQVNjLFVBQVVRLEVBQXVDLEVBQUU3QyxJQUF5QztJQUNuRyxJQUFJQSxTQUFTLFVBQVUsT0FBTztXQUFJNkMsR0FBRzNDLE9BQU8sQ0FBQzRDLGNBQWM7V0FBS0QsR0FBRzNDLE9BQU8sQ0FBQzZDLGlCQUFpQjtXQUFLRixHQUFHM0MsT0FBTyxDQUFDOEMsb0JBQW9CO0tBQUM7SUFDakksSUFBSWhELFNBQVMsZUFBZSxPQUFPO1dBQUk2QyxHQUFHM0MsT0FBTyxDQUFDK0MsaUJBQWlCO1dBQUtKLEdBQUczQyxPQUFPLENBQUNnRCxnQkFBZ0I7V0FBS0wsR0FBRzNDLE9BQU8sQ0FBQ2lELHlCQUF5QjtLQUFDO0lBQzdJLE9BQU9OLEdBQUczQyxPQUFPLENBQUM2QixNQUFNO0FBQzFCO0FBRUEsU0FBU2EsTUFBTUMsRUFBdUMsRUFBRTdDLElBQXlDO0lBQy9GLE1BQU1hLE9BQU93QixVQUFVUSxJQUFJN0M7SUFDM0IsT0FBT2EsS0FBS3VDLE1BQU0sQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxJQUFLQyxDQUFBQSxFQUFFWCxPQUFPLElBQUksSUFBSTtBQUNyRDtBQUVBLFNBQVNYLGNBQWN6QyxLQUFhLEVBQUVQLE9BQWUsRUFBRUMsUUFBZ0I7SUFDckUsT0FBTztRQUNMSyxLQUFLQztRQUNMQTtRQUNBUDtRQUNBQztRQUNBUyxVQUFVVixVQUFVQztRQUNwQlUsY0FBY25CLG1EQUFXQSxDQUFDUSxTQUFTQztJQUNyQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3B0aXZ1ei1yZXBvcnQtZW5naW5lLy4vbGliL3JlcG9ydC9jb21wYXJhdGl2ZS50cz83ZThhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHtcbiAgQ29tcGFyYXRpdmVCYWxhbmNlU2hlZXRSZXBvcnQsXG4gIENvbXBhcmF0aXZlUHJvZml0TG9zc1JlcG9ydCxcbiAgQ29tcGFyYXRpdmVSb3csXG4gIENvbXBhcmF0aXZlU2VjdGlvbixcbiAgSm91cm5hbFJvdyxcbn0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHZhcmlhbmNlUGN0IH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IGNhbGNQcm9maXRMb3NzIH0gZnJvbSBcIi4vcHJvZml0TG9zc1wiO1xuaW1wb3J0IHsgY2FsY0JhbGFuY2VTaGVldCB9IGZyb20gXCIuL2JhbGFuY2VTaGVldFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY0NvbXBhcmF0aXZlUHJvZml0TG9zcyhcbiAgY3VycmVudEpvdXJuYWxzOiBKb3VybmFsUm93W10sXG4gIHByZXZpb3VzSm91cm5hbHM6IEpvdXJuYWxSb3dbXSxcbiAgY3VycmVudFBlcmlvZDogeyBmcm9tOiBzdHJpbmcgfCBudWxsOyB0bzogc3RyaW5nIHwgbnVsbCB9LFxuICBwcmV2aW91c1BlcmlvZDogeyBmcm9tOiBzdHJpbmcgfCBudWxsOyB0bzogc3RyaW5nIHwgbnVsbCB9XG4pOiBDb21wYXJhdGl2ZVByb2ZpdExvc3NSZXBvcnQge1xuICBjb25zdCBjdXJyZW50ID0gY2FsY1Byb2ZpdExvc3MoY3VycmVudEpvdXJuYWxzKTtcbiAgY29uc3QgcHJldmlvdXMgPSBjYWxjUHJvZml0TG9zcyhwcmV2aW91c0pvdXJuYWxzKTtcblxuICBjb25zdCBpbmNvbWVTZWN0aW9uID0gYnVpbGRQTFNlY3Rpb24oXCJJbmNvbWVcIiwgY3VycmVudCwgcHJldmlvdXMsIFwiaW5jb21lXCIpO1xuICBjb25zdCBleHBlbnNlU2VjdGlvbiA9IGJ1aWxkUExTZWN0aW9uKFwiRXhwZW5zZVwiLCBjdXJyZW50LCBwcmV2aW91cywgXCJleHBlbnNlXCIpO1xuXG4gIGNvbnN0IG5ldFByb2ZpdFJvdzogQ29tcGFyYXRpdmVSb3cgPSB7XG4gICAga2V5OiBcIm5ldF9wcm9maXRcIixcbiAgICBsYWJlbDogXCJOZXQgUHJvZml0XCIsXG4gICAgY3VycmVudDogY3VycmVudC50b3RhbHMubmV0X3Byb2ZpdCxcbiAgICBwcmV2aW91czogcHJldmlvdXMudG90YWxzLm5ldF9wcm9maXQsXG4gICAgdmFyaWFuY2U6IGN1cnJlbnQudG90YWxzLm5ldF9wcm9maXQgLSBwcmV2aW91cy50b3RhbHMubmV0X3Byb2ZpdCxcbiAgICB2YXJpYW5jZV9wY3Q6IHZhcmlhbmNlUGN0KGN1cnJlbnQudG90YWxzLm5ldF9wcm9maXQsIHByZXZpb3VzLnRvdGFscy5uZXRfcHJvZml0KSxcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluY29tZTogaW5jb21lU2VjdGlvbixcbiAgICBleHBlbnNlOiBleHBlbnNlU2VjdGlvbixcbiAgICBuZXRfcHJvZml0OiBuZXRQcm9maXRSb3csXG4gICAgY3VycmVudF9wZXJpb2Q6IGN1cnJlbnRQZXJpb2QsXG4gICAgcHJldmlvdXNfcGVyaW9kOiBwcmV2aW91c1BlcmlvZCxcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRQTFNlY3Rpb24obGFiZWw6IHN0cmluZywgY3VycmVudDogUmV0dXJuVHlwZTx0eXBlb2YgY2FsY1Byb2ZpdExvc3M+LCBwcmV2aW91czogUmV0dXJuVHlwZTx0eXBlb2YgY2FsY1Byb2ZpdExvc3M+LCB0eXBlOiBcImluY29tZVwiIHwgXCJleHBlbnNlXCIpOiBDb21wYXJhdGl2ZVNlY3Rpb24ge1xuICBjb25zdCBjdXJyZW50R3JvdXAgPSBjdXJyZW50Lmdyb3VwZWRbdHlwZV07XG4gIGNvbnN0IHByZXZpb3VzR3JvdXAgPSBwcmV2aW91cy5ncm91cGVkW3R5cGVdO1xuXG4gIGNvbnN0IGNhdE1hcCA9IG5ldyBNYXA8c3RyaW5nLCB7IGN1cnJlbnQ6IG51bWJlcjsgcHJldmlvdXM6IG51bWJlciB9PigpO1xuXG4gIGZvciAoY29uc3QgYyBvZiBjdXJyZW50R3JvdXAuY2F0ZWdvcmllcyB8fCBbXSkge1xuICAgIGNhdE1hcC5zZXQoYy5jYXRlZ29yeSwgeyBjdXJyZW50OiBjLmFtb3VudCwgcHJldmlvdXM6IDAgfSk7XG4gIH1cbiAgZm9yIChjb25zdCBjIG9mIHByZXZpb3VzR3JvdXAuY2F0ZWdvcmllcyB8fCBbXSkge1xuICAgIGlmICghY2F0TWFwLmhhcyhjLmNhdGVnb3J5KSkgY2F0TWFwLnNldChjLmNhdGVnb3J5LCB7IGN1cnJlbnQ6IDAsIHByZXZpb3VzOiBjLmFtb3VudCB9KTtcbiAgICBlbHNlIGNhdE1hcC5nZXQoYy5jYXRlZ29yeSkhLnByZXZpb3VzID0gYy5hbW91bnQ7XG4gIH1cblxuICBjb25zdCByb3dzOiBDb21wYXJhdGl2ZVJvd1tdID0gW107XG4gIGZvciAoY29uc3QgW2tleSwgdl0gb2YgY2F0TWFwLmVudHJpZXMoKSkge1xuICAgIHJvd3MucHVzaCh7XG4gICAgICBrZXksXG4gICAgICBsYWJlbDoga2V5LFxuICAgICAgY3VycmVudDogdi5jdXJyZW50LFxuICAgICAgcHJldmlvdXM6IHYucHJldmlvdXMsXG4gICAgICB2YXJpYW5jZTogdi5jdXJyZW50IC0gdi5wcmV2aW91cyxcbiAgICAgIHZhcmlhbmNlX3BjdDogdmFyaWFuY2VQY3Qodi5jdXJyZW50LCB2LnByZXZpb3VzKSxcbiAgICB9KTtcbiAgfVxuXG4gIHJvd3Muc29ydCgoYSwgYikgPT4gYS5sYWJlbC5sb2NhbGVDb21wYXJlKGIubGFiZWwpKTtcblxuICBjb25zdCB0b3RhbEN1cnJlbnQgPSBjdXJyZW50R3JvdXAudG90YWwgfHwgMDtcbiAgY29uc3QgdG90YWxQcmV2aW91cyA9IHByZXZpb3VzR3JvdXAudG90YWwgfHwgMDtcblxuICByZXR1cm4ge1xuICAgIGxhYmVsLFxuICAgIHJvd3MsXG4gICAgdG90YWw6IHtcbiAgICAgIGtleTogYCR7dHlwZX1fdG90YWxgLFxuICAgICAgbGFiZWw6IGBUb3RhbCAke2xhYmVsfWAsXG4gICAgICBjdXJyZW50OiB0b3RhbEN1cnJlbnQsXG4gICAgICBwcmV2aW91czogdG90YWxQcmV2aW91cyxcbiAgICAgIHZhcmlhbmNlOiB0b3RhbEN1cnJlbnQgLSB0b3RhbFByZXZpb3VzLFxuICAgICAgdmFyaWFuY2VfcGN0OiB2YXJpYW5jZVBjdCh0b3RhbEN1cnJlbnQsIHRvdGFsUHJldmlvdXMpLFxuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjQ29tcGFyYXRpdmVCYWxhbmNlU2hlZXQoXG4gIGpvdXJuYWxzOiBKb3VybmFsUm93W10sXG4gIGN1cnJlbnRBc09mOiBzdHJpbmcgfCBudWxsLFxuICBwcmV2aW91c0FzT2Y6IHN0cmluZyB8IG51bGxcbik6IENvbXBhcmF0aXZlQmFsYW5jZVNoZWV0UmVwb3J0IHtcbiAgY29uc3QgY3VycmVudCA9IGNhbGNCYWxhbmNlU2hlZXQoam91cm5hbHMsIGN1cnJlbnRBc09mKTtcbiAgY29uc3QgcHJldmlvdXMgPSBjYWxjQmFsYW5jZVNoZWV0KGpvdXJuYWxzLCBwcmV2aW91c0FzT2YpO1xuXG4gIGNvbnN0IGFzc2V0cyA9IGJ1aWxkQlNTZWN0aW9uKFwiQXNzZXRzXCIsIGN1cnJlbnQsIHByZXZpb3VzLCBcImFzc2V0c1wiKTtcbiAgY29uc3QgbGlhYmlsaXRpZXMgPSBidWlsZEJTU2VjdGlvbihcIkxpYWJpbGl0aWVzXCIsIGN1cnJlbnQsIHByZXZpb3VzLCBcImxpYWJpbGl0aWVzXCIpO1xuICBjb25zdCBlcXVpdHkgPSBidWlsZEJTU2VjdGlvbihcIkVxdWl0eVwiLCBjdXJyZW50LCBwcmV2aW91cywgXCJlcXVpdHlcIik7XG5cbiAgcmV0dXJuIHtcbiAgICBhc3NldHMsXG4gICAgbGlhYmlsaXRpZXMsXG4gICAgZXF1aXR5LFxuICAgIHRvdGFsczoge1xuICAgICAgYXNzZXRzOiBidWlsZFRvdGFsUm93KFwiVG90YWwgQXNzZXRzXCIsIGN1cnJlbnQudG90YWxzLmFzc2V0cywgcHJldmlvdXMudG90YWxzLmFzc2V0cyksXG4gICAgICBsaWFiaWxpdGllczogYnVpbGRUb3RhbFJvdyhcIlRvdGFsIExpYWJpbGl0aWVzXCIsIGN1cnJlbnQudG90YWxzLmxpYWJpbGl0aWVzLCBwcmV2aW91cy50b3RhbHMubGlhYmlsaXRpZXMpLFxuICAgICAgZXF1aXR5OiBidWlsZFRvdGFsUm93KFwiVG90YWwgRXF1aXR5XCIsIGN1cnJlbnQudG90YWxzLmVxdWl0eSwgcHJldmlvdXMudG90YWxzLmVxdWl0eSksXG4gICAgICBsaWFiaWxpdGllc19wbHVzX2VxdWl0eTogYnVpbGRUb3RhbFJvdyhcbiAgICAgICAgXCJMaWFiaWxpdGllcyArIEVxdWl0eVwiLFxuICAgICAgICBjdXJyZW50LnRvdGFscy5saWFiaWxpdGllc19wbHVzX2VxdWl0eSxcbiAgICAgICAgcHJldmlvdXMudG90YWxzLmxpYWJpbGl0aWVzX3BsdXNfZXF1aXR5XG4gICAgICApLFxuICAgIH0sXG4gICAgY3VycmVudF9hc19vZjogY3VycmVudEFzT2YsXG4gICAgcHJldmlvdXNfYXNfb2Y6IHByZXZpb3VzQXNPZixcbiAgfTtcbn1cblxuZnVuY3Rpb24gYnVpbGRCU1NlY3Rpb24oXG4gIGxhYmVsOiBzdHJpbmcsXG4gIGN1cnJlbnQ6IFJldHVyblR5cGU8dHlwZW9mIGNhbGNCYWxhbmNlU2hlZXQ+LFxuICBwcmV2aW91czogUmV0dXJuVHlwZTx0eXBlb2YgY2FsY0JhbGFuY2VTaGVldD4sXG4gIHR5cGU6IFwiYXNzZXRzXCIgfCBcImxpYWJpbGl0aWVzXCIgfCBcImVxdWl0eVwiXG4pOiBDb21wYXJhdGl2ZVNlY3Rpb24ge1xuICBjb25zdCBjdXJyZW50Um93cyA9IGdldEJTUm93cyhjdXJyZW50LCB0eXBlKTtcbiAgY29uc3QgcHJldmlvdXNSb3dzID0gZ2V0QlNSb3dzKHByZXZpb3VzLCB0eXBlKTtcblxuICBjb25zdCBtYXAgPSBuZXcgTWFwPHN0cmluZywgeyBjdXJyZW50OiBudW1iZXI7IHByZXZpb3VzOiBudW1iZXIgfT4oKTtcblxuICBmb3IgKGNvbnN0IHIgb2YgY3VycmVudFJvd3MpIHtcbiAgICBtYXAuc2V0KHIuYWNjb3VudC5hY2NvdW50X25hbWUsIHsgY3VycmVudDogci5iYWxhbmNlLCBwcmV2aW91czogMCB9KTtcbiAgfVxuICBmb3IgKGNvbnN0IHIgb2YgcHJldmlvdXNSb3dzKSB7XG4gICAgaWYgKCFtYXAuaGFzKHIuYWNjb3VudC5hY2NvdW50X25hbWUpKSBtYXAuc2V0KHIuYWNjb3VudC5hY2NvdW50X25hbWUsIHsgY3VycmVudDogMCwgcHJldmlvdXM6IHIuYmFsYW5jZSB9KTtcbiAgICBlbHNlIG1hcC5nZXQoci5hY2NvdW50LmFjY291bnRfbmFtZSkhLnByZXZpb3VzID0gci5iYWxhbmNlO1xuICB9XG5cbiAgY29uc3Qgcm93czogQ29tcGFyYXRpdmVSb3dbXSA9IFtdO1xuICBmb3IgKGNvbnN0IFtrZXksIHZdIG9mIG1hcC5lbnRyaWVzKCkpIHtcbiAgICByb3dzLnB1c2goe1xuICAgICAga2V5LFxuICAgICAgbGFiZWw6IGtleSxcbiAgICAgIGN1cnJlbnQ6IHYuY3VycmVudCxcbiAgICAgIHByZXZpb3VzOiB2LnByZXZpb3VzLFxuICAgICAgdmFyaWFuY2U6IHYuY3VycmVudCAtIHYucHJldmlvdXMsXG4gICAgICB2YXJpYW5jZV9wY3Q6IHZhcmlhbmNlUGN0KHYuY3VycmVudCwgdi5wcmV2aW91cyksXG4gICAgfSk7XG4gIH1cbiAgcm93cy5zb3J0KChhLCBiKSA9PiBhLmxhYmVsLmxvY2FsZUNvbXBhcmUoYi5sYWJlbCkpO1xuXG4gIGNvbnN0IHRvdGFsQ3VycmVudCA9IHN1bUJTKGN1cnJlbnQsIHR5cGUpO1xuICBjb25zdCB0b3RhbFByZXZpb3VzID0gc3VtQlMocHJldmlvdXMsIHR5cGUpO1xuXG4gIHJldHVybiB7XG4gICAgbGFiZWwsXG4gICAgcm93cyxcbiAgICB0b3RhbDoge1xuICAgICAga2V5OiBgJHt0eXBlfV90b3RhbGAsXG4gICAgICBsYWJlbDogYFRvdGFsICR7bGFiZWx9YCxcbiAgICAgIGN1cnJlbnQ6IHRvdGFsQ3VycmVudCxcbiAgICAgIHByZXZpb3VzOiB0b3RhbFByZXZpb3VzLFxuICAgICAgdmFyaWFuY2U6IHRvdGFsQ3VycmVudCAtIHRvdGFsUHJldmlvdXMsXG4gICAgICB2YXJpYW5jZV9wY3Q6IHZhcmlhbmNlUGN0KHRvdGFsQ3VycmVudCwgdG90YWxQcmV2aW91cyksXG4gICAgfSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0QlNSb3dzKGJzOiBSZXR1cm5UeXBlPHR5cGVvZiBjYWxjQmFsYW5jZVNoZWV0PiwgdHlwZTogXCJhc3NldHNcIiB8IFwibGlhYmlsaXRpZXNcIiB8IFwiZXF1aXR5XCIpIHtcbiAgaWYgKHR5cGUgPT09IFwiYXNzZXRzXCIpIHJldHVybiBbLi4uYnMuZ3JvdXBlZC5hc3NldHNfY3VycmVudCwgLi4uYnMuZ3JvdXBlZC5hc3NldHNfbm9uY3VycmVudCwgLi4uYnMuZ3JvdXBlZC5hc3NldHNfdW5jYXRlZ29yaXplZF07XG4gIGlmICh0eXBlID09PSBcImxpYWJpbGl0aWVzXCIpIHJldHVybiBbLi4uYnMuZ3JvdXBlZC5saWFiaWxpdGllc19zaG9ydCwgLi4uYnMuZ3JvdXBlZC5saWFiaWxpdGllc19sb25nLCAuLi5icy5ncm91cGVkLmxpYWJpbGl0aWVzX3VuY2F0ZWdvcml6ZWRdO1xuICByZXR1cm4gYnMuZ3JvdXBlZC5lcXVpdHk7XG59XG5cbmZ1bmN0aW9uIHN1bUJTKGJzOiBSZXR1cm5UeXBlPHR5cGVvZiBjYWxjQmFsYW5jZVNoZWV0PiwgdHlwZTogXCJhc3NldHNcIiB8IFwibGlhYmlsaXRpZXNcIiB8IFwiZXF1aXR5XCIpIHtcbiAgY29uc3Qgcm93cyA9IGdldEJTUm93cyhicywgdHlwZSk7XG4gIHJldHVybiByb3dzLnJlZHVjZSgocywgeCkgPT4gcyArICh4LmJhbGFuY2UgfHwgMCksIDApO1xufVxuXG5mdW5jdGlvbiBidWlsZFRvdGFsUm93KGxhYmVsOiBzdHJpbmcsIGN1cnJlbnQ6IG51bWJlciwgcHJldmlvdXM6IG51bWJlcik6IENvbXBhcmF0aXZlUm93IHtcbiAgcmV0dXJuIHtcbiAgICBrZXk6IGxhYmVsLFxuICAgIGxhYmVsLFxuICAgIGN1cnJlbnQsXG4gICAgcHJldmlvdXMsXG4gICAgdmFyaWFuY2U6IGN1cnJlbnQgLSBwcmV2aW91cyxcbiAgICB2YXJpYW5jZV9wY3Q6IHZhcmlhbmNlUGN0KGN1cnJlbnQsIHByZXZpb3VzKSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJ2YXJpYW5jZVBjdCIsImNhbGNQcm9maXRMb3NzIiwiY2FsY0JhbGFuY2VTaGVldCIsImNhbGNDb21wYXJhdGl2ZVByb2ZpdExvc3MiLCJjdXJyZW50Sm91cm5hbHMiLCJwcmV2aW91c0pvdXJuYWxzIiwiY3VycmVudFBlcmlvZCIsInByZXZpb3VzUGVyaW9kIiwiY3VycmVudCIsInByZXZpb3VzIiwiaW5jb21lU2VjdGlvbiIsImJ1aWxkUExTZWN0aW9uIiwiZXhwZW5zZVNlY3Rpb24iLCJuZXRQcm9maXRSb3ciLCJrZXkiLCJsYWJlbCIsInRvdGFscyIsIm5ldF9wcm9maXQiLCJ2YXJpYW5jZSIsInZhcmlhbmNlX3BjdCIsImluY29tZSIsImV4cGVuc2UiLCJjdXJyZW50X3BlcmlvZCIsInByZXZpb3VzX3BlcmlvZCIsInR5cGUiLCJjdXJyZW50R3JvdXAiLCJncm91cGVkIiwicHJldmlvdXNHcm91cCIsImNhdE1hcCIsIk1hcCIsImMiLCJjYXRlZ29yaWVzIiwic2V0IiwiY2F0ZWdvcnkiLCJhbW91bnQiLCJoYXMiLCJnZXQiLCJyb3dzIiwidiIsImVudHJpZXMiLCJwdXNoIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsInRvdGFsQ3VycmVudCIsInRvdGFsIiwidG90YWxQcmV2aW91cyIsImNhbGNDb21wYXJhdGl2ZUJhbGFuY2VTaGVldCIsImpvdXJuYWxzIiwiY3VycmVudEFzT2YiLCJwcmV2aW91c0FzT2YiLCJhc3NldHMiLCJidWlsZEJTU2VjdGlvbiIsImxpYWJpbGl0aWVzIiwiZXF1aXR5IiwiYnVpbGRUb3RhbFJvdyIsImxpYWJpbGl0aWVzX3BsdXNfZXF1aXR5IiwiY3VycmVudF9hc19vZiIsInByZXZpb3VzX2FzX29mIiwiY3VycmVudFJvd3MiLCJnZXRCU1Jvd3MiLCJwcmV2aW91c1Jvd3MiLCJtYXAiLCJyIiwiYWNjb3VudCIsImFjY291bnRfbmFtZSIsImJhbGFuY2UiLCJzdW1CUyIsImJzIiwiYXNzZXRzX2N1cnJlbnQiLCJhc3NldHNfbm9uY3VycmVudCIsImFzc2V0c191bmNhdGVnb3JpemVkIiwibGlhYmlsaXRpZXNfc2hvcnQiLCJsaWFiaWxpdGllc19sb25nIiwibGlhYmlsaXRpZXNfdW5jYXRlZ29yaXplZCIsInJlZHVjZSIsInMiLCJ4Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/comparative.ts\n");

/***/ }),

/***/ "(api)/./lib/report/equity.ts":
/*!******************************!*\
  !*** ./lib/report/equity.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcEquityChanges: () => (/* binding */ calcEquityChanges)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n/* harmony import */ var _accounting__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accounting */ \"(api)/./lib/report/accounting.ts\");\n/* harmony import */ var _accountingLogic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./accountingLogic */ \"(api)/./lib/report/accountingLogic.ts\");\n\n\n\nfunction calcEquityChanges(journals, periodFrom, periodTo, netProfit) {\n    const openingRows = periodFrom ? (0,_accounting__WEBPACK_IMPORTED_MODULE_1__.filterAsOf)(journals, (0,_utils__WEBPACK_IMPORTED_MODULE_0__.addDays)(periodFrom, -1)) : [];\n    const currentRows = (0,_accounting__WEBPACK_IMPORTED_MODULE_1__.filterByPeriod)(journals, periodFrom, periodTo);\n    const openingByAcc = indexEquityRows(openingRows);\n    const currentByAcc = indexEquityRows(currentRows);\n    const allKeys = new Set([\n        ...openingByAcc.keys(),\n        ...currentByAcc.keys()\n    ]);\n    const rows = [];\n    let openingEquity = 0;\n    let netIncrease = 0;\n    let netDecrease = 0;\n    for (const key of allKeys){\n        const openingRowsAcc = openingByAcc.get(key) || [];\n        const currentRowsAcc = currentByAcc.get(key) || [];\n        const opening = computeEquityBalance(openingRowsAcc);\n        const movement = computeEquityMovement(currentRowsAcc);\n        const closing = opening + movement;\n        openingEquity += opening;\n        if (movement >= 0) netIncrease += movement;\n        else netDecrease += movement;\n        const seed = currentRowsAcc[0] || openingRowsAcc[0];\n        if (!seed) continue;\n        const account = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.accountFromRow)(seed);\n        rows.push({\n            account,\n            opening_balance: opening,\n            net_change: movement,\n            closing_balance: closing,\n            trace: (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.mergeTraces)([\n                (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.traceFromRows)(openingRowsAcc),\n                (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.traceFromRows)(currentRowsAcc)\n            ])\n        });\n    }\n    const closingEquity = openingEquity + netProfit + netIncrease + netDecrease;\n    rows.sort((a, b)=>a.account.account_name.localeCompare(b.account.account_name));\n    return {\n        raw_rows: currentRows,\n        grouped: {\n            rows\n        },\n        totals: {\n            opening_equity: openingEquity,\n            net_profit: netProfit,\n            equity_increase: netIncrease,\n            equity_decrease: netDecrease,\n            closing_equity: closingEquity\n        },\n        validations: {\n            closing_matches: Math.abs(openingEquity + netProfit + netIncrease + netDecrease - closingEquity) < 0.0001\n        }\n    };\n}\nfunction indexEquityRows(rows) {\n    const map = new Map();\n    for (const r of rows){\n        if (String(r.account_type || \"\").toLowerCase() !== \"equity\") continue;\n        const key = r.account_id || \"(unknown)\";\n        if (!map.has(key)) map.set(key, []);\n        map.get(key).push(r);\n    }\n    return map;\n}\nfunction computeEquityBalance(rows) {\n    let balance = 0;\n    for (const r of rows)balance += r.credit - r.debit;\n    return balance;\n}\nfunction computeEquityMovement(rows) {\n    let movement = 0;\n    for (const r of rows)movement += r.credit - r.debit;\n    return movement;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxTQUFTcEMsc0JBQXNCWCxJQUFrQjtJQUMvQyxJQUFJVSxXQUFXO0lBQ2YsS0FBSyxNQUFNOEIsS0FBS3hDLEtBQU1VLFlBQVk4QixFQUFFUSxNQUFNLEdBQUdSLEVBQUVTLEtBQUs7SUFDcEQsT0FBT3ZDO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L2VxdWl0eS50cz80MTFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRXF1aXR5Q2hhbmdlc1JlcG9ydCwgRXF1aXR5Q2hhbmdlUm93LCBKb3VybmFsUm93IH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGFkZERheXMgfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHsgZmlsdGVyQXNPZiwgZmlsdGVyQnlQZXJpb2QgfSBmcm9tIFwiLi9hY2NvdW50aW5nXCI7XG5pbXBvcnQgeyBhY2NvdW50RnJvbVJvdywgbWVyZ2VUcmFjZXMsIHRyYWNlRnJvbVJvd3MgfSBmcm9tIFwiLi9hY2NvdW50aW5nTG9naWNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNFcXVpdHlDaGFuZ2VzKGpvdXJuYWxzOiBKb3VybmFsUm93W10sIHBlcmlvZEZyb206IHN0cmluZyB8IG51bGwsIHBlcmlvZFRvOiBzdHJpbmcgfCBudWxsLCBuZXRQcm9maXQ6IG51bWJlcik6IEVxdWl0eUNoYW5nZXNSZXBvcnQge1xuICBjb25zdCBvcGVuaW5nUm93cyA9IHBlcmlvZEZyb20gPyBmaWx0ZXJBc09mKGpvdXJuYWxzLCBhZGREYXlzKHBlcmlvZEZyb20sIC0xKSkgOiBbXTtcbiAgY29uc3QgY3VycmVudFJvd3MgPSBmaWx0ZXJCeVBlcmlvZChqb3VybmFscywgcGVyaW9kRnJvbSwgcGVyaW9kVG8pO1xuXG4gIGNvbnN0IG9wZW5pbmdCeUFjYyA9IGluZGV4RXF1aXR5Um93cyhvcGVuaW5nUm93cyk7XG4gIGNvbnN0IGN1cnJlbnRCeUFjYyA9IGluZGV4RXF1aXR5Um93cyhjdXJyZW50Um93cyk7XG5cbiAgY29uc3QgYWxsS2V5cyA9IG5ldyBTZXQ8c3RyaW5nPihbLi4ub3BlbmluZ0J5QWNjLmtleXMoKSwgLi4uY3VycmVudEJ5QWNjLmtleXMoKV0pO1xuICBjb25zdCByb3dzOiBFcXVpdHlDaGFuZ2VSb3dbXSA9IFtdO1xuXG4gIGxldCBvcGVuaW5nRXF1aXR5ID0gMDtcbiAgbGV0IG5ldEluY3JlYXNlID0gMDtcbiAgbGV0IG5ldERlY3JlYXNlID0gMDtcblxuICBmb3IgKGNvbnN0IGtleSBvZiBhbGxLZXlzKSB7XG4gICAgY29uc3Qgb3BlbmluZ1Jvd3NBY2MgPSBvcGVuaW5nQnlBY2MuZ2V0KGtleSkgfHwgW107XG4gICAgY29uc3QgY3VycmVudFJvd3NBY2MgPSBjdXJyZW50QnlBY2MuZ2V0KGtleSkgfHwgW107XG5cbiAgICBjb25zdCBvcGVuaW5nID0gY29tcHV0ZUVxdWl0eUJhbGFuY2Uob3BlbmluZ1Jvd3NBY2MpO1xuICAgIGNvbnN0IG1vdmVtZW50ID0gY29tcHV0ZUVxdWl0eU1vdmVtZW50KGN1cnJlbnRSb3dzQWNjKTtcbiAgICBjb25zdCBjbG9zaW5nID0gb3BlbmluZyArIG1vdmVtZW50O1xuXG4gICAgb3BlbmluZ0VxdWl0eSArPSBvcGVuaW5nO1xuICAgIGlmIChtb3ZlbWVudCA+PSAwKSBuZXRJbmNyZWFzZSArPSBtb3ZlbWVudDtcbiAgICBlbHNlIG5ldERlY3JlYXNlICs9IG1vdmVtZW50O1xuXG4gICAgY29uc3Qgc2VlZCA9IGN1cnJlbnRSb3dzQWNjWzBdIHx8IG9wZW5pbmdSb3dzQWNjWzBdO1xuICAgIGlmICghc2VlZCkgY29udGludWU7XG4gICAgY29uc3QgYWNjb3VudCA9IGFjY291bnRGcm9tUm93KHNlZWQpO1xuXG4gICAgcm93cy5wdXNoKHtcbiAgICAgIGFjY291bnQsXG4gICAgICBvcGVuaW5nX2JhbGFuY2U6IG9wZW5pbmcsXG4gICAgICBuZXRfY2hhbmdlOiBtb3ZlbWVudCxcbiAgICAgIGNsb3NpbmdfYmFsYW5jZTogY2xvc2luZyxcbiAgICAgIHRyYWNlOiBtZXJnZVRyYWNlcyhbdHJhY2VGcm9tUm93cyhvcGVuaW5nUm93c0FjYyksIHRyYWNlRnJvbVJvd3MoY3VycmVudFJvd3NBY2MpXSksXG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBjbG9zaW5nRXF1aXR5ID0gb3BlbmluZ0VxdWl0eSArIG5ldFByb2ZpdCArIG5ldEluY3JlYXNlICsgbmV0RGVjcmVhc2U7XG5cbiAgcm93cy5zb3J0KChhLCBiKSA9PiBhLmFjY291bnQuYWNjb3VudF9uYW1lLmxvY2FsZUNvbXBhcmUoYi5hY2NvdW50LmFjY291bnRfbmFtZSkpO1xuXG4gIHJldHVybiB7XG4gICAgcmF3X3Jvd3M6IGN1cnJlbnRSb3dzLFxuICAgIGdyb3VwZWQ6IHsgcm93cyB9LFxuICAgIHRvdGFsczoge1xuICAgICAgb3BlbmluZ19lcXVpdHk6IG9wZW5pbmdFcXVpdHksXG4gICAgICBuZXRfcHJvZml0OiBuZXRQcm9maXQsXG4gICAgICBlcXVpdHlfaW5jcmVhc2U6IG5ldEluY3JlYXNlLFxuICAgICAgZXF1aXR5X2RlY3JlYXNlOiBuZXREZWNyZWFzZSxcbiAgICAgIGNsb3NpbmdfZXF1aXR5OiBjbG9zaW5nRXF1aXR5LFxuICAgIH0sXG4gICAgdmFsaWRhdGlvbnM6IHsgY2xvc2luZ19tYXRjaGVzOiBNYXRoLmFicygob3BlbmluZ0VxdWl0eSArIG5ldFByb2ZpdCArIG5ldEluY3JlYXNlICsgbmV0RGVjcmVhc2UpIC0gY2xvc2luZ0VxdWl0eSkgPCAwLjAwMDEgfSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gaW5kZXhFcXVpdHlSb3dzKHJvd3M6IEpvdXJuYWxSb3dbXSk6IE1hcDxzdHJpbmcsIEpvdXJuYWxSb3dbXT4ge1xuICBjb25zdCBtYXAgPSBuZXcgTWFwPHN0cmluZywgSm91cm5hbFJvd1tdPigpO1xuICBmb3IgKGNvbnN0IHIgb2Ygcm93cykge1xuICAgIGlmIChTdHJpbmcoci5hY2NvdW50X3R5cGUgfHwgXCJcIikudG9Mb3dlckNhc2UoKSAhPT0gXCJlcXVpdHlcIikgY29udGludWU7XG4gICAgY29uc3Qga2V5ID0gci5hY2NvdW50X2lkIHx8IFwiKHVua25vd24pXCI7XG4gICAgaWYgKCFtYXAuaGFzKGtleSkpIG1hcC5zZXQoa2V5LCBbXSk7XG4gICAgbWFwLmdldChrZXkpIS5wdXNoKHIpO1xuICB9XG4gIHJldHVybiBtYXA7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVFcXVpdHlCYWxhbmNlKHJvd3M6IEpvdXJuYWxSb3dbXSk6IG51bWJlciB7XG4gIGxldCBiYWxhbmNlID0gMDtcbiAgZm9yIChjb25zdCByIG9mIHJvd3MpIGJhbGFuY2UgKz0gci5jcmVkaXQgLSByLmRlYml0O1xuICByZXR1cm4gYmFsYW5jZTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZUVxdWl0eU1vdmVtZW50KHJvd3M6IEpvdXJuYWxSb3dbXSk6IG51bWJlciB7XG4gIGxldCBtb3ZlbWVudCA9IDA7XG4gIGZvciAoY29uc3QgciBvZiByb3dzKSBtb3ZlbWVudCArPSByLmNyZWRpdCAtIHIuZGViaXQ7XG4gIHJldHVybiBtb3ZlbWVudDtcbn1cbiJdLCJuYW1lcyI6WyJhZGREYXlzIiwiZmlsdGVyQXNPZiIsImZpbHRlckJ5UGVyaW9kIiwiYWNjb3VudEZyb21Sb3ciLCJtZXJnZVRyYWNlcyIsInRyYWNlRnJvbVJvd3MiLCJjYWxjRXF1aXR5Q2hhbmdlcyIsImpvdXJuYWxzIiwicGVyaW9kRnJvbSIsInBlcmlvZFRvIiwibmV0UHJvZml0Iiwib3BlbmluZ1Jvd3MiLCJjdXJyZW50Um93cyIsIm9wZW5pbmdCeUFjYyIsImluZGV4RXF1aXR5Um93cyIsImN1cnJlbnRCeUFjYyIsImFsbEtleXMiLCJTZXQiLCJrZXlzIiwicm93cyIsIm9wZW5pbmdFcXVpdHkiLCJuZXRJbmNyZWFzZSIsIm5ldERlY3JlYXNlIiwia2V5Iiwib3BlbmluZ1Jvd3NBY2MiLCJnZXQiLCJjdXJyZW50Um93c0FjYyIsIm9wZW5pbmciLCJjb21wdXRlRXF1aXR5QmFsYW5jZSIsIm1vdmVtZW50IiwiY29tcHV0ZUVxdWl0eU1vdmVtZW50IiwiY2xvc2luZyIsInNlZWQiLCJhY2NvdW50IiwicHVzaCIsIm9wZW5pbmdfYmFsYW5jZSIsIm5ldF9jaGFuZ2UiLCJjbG9zaW5nX2JhbGFuY2UiLCJ0cmFjZSIsImNsb3NpbmdFcXVpdHkiLCJzb3J0IiwiYSIsImIiLCJhY2NvdW50X25hbWUiLCJsb2NhbGVDb21wYXJlIiwicmF3X3Jvd3MiLCJncm91cGVkIiwidG90YWxzIiwib3BlbmluZ19lcXVpdHkiLCJuZXRfcHJvZml0IiwiZXF1aXR5X2luY3JlYXNlIiwiZXF1aXR5X2RlY3JlYXNlIiwiY2xvc2luZ19lcXVpdHkiLCJ2YWxpZGF0aW9ucyIsImNsb3NpbmdfbWF0Y2hlcyIsIk1hdGgiLCJhYnMiLCJtYXAiLCJNYXAiLCJyIiwiU3RyaW5nIiwiYWNjb3VudF90eXBlIiwidG9Mb3dlckNhc2UiLCJhY2NvdW50X2lkIiwiaGFzIiwic2V0IiwiYmFsYW5jZSIsImNyZWRpdCIsImRlYml0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/equity.ts\n");

/***/ }),

/***/ "(api)/./lib/report/index.ts":
/*!*****************************!*\
  !*** ./lib/report/index.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildAllReportModels: () => (/* binding */ buildAllReportModels)\n/* harmony export */ });\n/* harmony import */ var _normalize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./normalize */ \"(api)/./lib/report/normalize.ts\");\n/* harmony import */ var _checks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./checks */ \"(api)/./lib/report/checks.ts\");\n/* harmony import */ var _accounting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./accounting */ \"(api)/./lib/report/accounting.ts\");\n/* harmony import */ var _journal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./journal */ \"(api)/./lib/report/journal.ts\");\n/* harmony import */ var _ledger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ledger */ \"(api)/./lib/report/ledger.ts\");\n/* harmony import */ var _trialBalance__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./trialBalance */ \"(api)/./lib/report/trialBalance.ts\");\n/* harmony import */ var _profitLoss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./profitLoss */ \"(api)/./lib/report/profitLoss.ts\");\n/* harmony import */ var _balanceSheet__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./balanceSheet */ \"(api)/./lib/report/balanceSheet.ts\");\n/* harmony import */ var _cashflow__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./cashflow */ \"(api)/./lib/report/cashflow.ts\");\n/* harmony import */ var _accountMovement__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./accountMovement */ \"(api)/./lib/report/accountMovement.ts\");\n/* harmony import */ var _equity__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./equity */ \"(api)/./lib/report/equity.ts\");\n/* harmony import */ var _comparative__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./comparative */ \"(api)/./lib/report/comparative.ts\");\n/* harmony import */ var _activitySummary__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./activitySummary */ \"(api)/./lib/report/activitySummary.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n/* harmony import */ var _periods__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./periods */ \"(api)/./lib/report/periods.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction buildAllReportModels(payload) {\n    const normalized = (0,_normalize__WEBPACK_IMPORTED_MODULE_0__.normalizePayload)(payload);\n    const checks = (0,_checks__WEBPACK_IMPORTED_MODULE_1__.basicChecks)(normalized.journals);\n    const periodFrom = normalized.periodFrom;\n    const periodTo = normalized.periodTo;\n    const previousPeriod = (0,_periods__WEBPACK_IMPORTED_MODULE_14__.derivePreviousPeriod)(periodFrom, periodTo);\n    const currentJournals = (0,_accounting__WEBPACK_IMPORTED_MODULE_2__.filterByPeriod)(normalized.journals, periodFrom, periodTo);\n    const previousJournals = previousPeriod ? (0,_accounting__WEBPACK_IMPORTED_MODULE_2__.filterByPeriod)(normalized.journals, previousPeriod.from, previousPeriod.to) : [];\n    const journalRegister = (0,_journal__WEBPACK_IMPORTED_MODULE_3__.calcJournalRegister)(currentJournals);\n    const generalLedger = (0,_ledger__WEBPACK_IMPORTED_MODULE_4__.calcGeneralLedger)(normalized.journals, periodFrom, periodTo);\n    const trialBalance = (0,_trialBalance__WEBPACK_IMPORTED_MODULE_5__.calcTrialBalance)(normalized.journals, periodFrom, periodTo);\n    const profitLoss = (0,_profitLoss__WEBPACK_IMPORTED_MODULE_6__.calcProfitLoss)(currentJournals);\n    const balanceSheet = (0,_balanceSheet__WEBPACK_IMPORTED_MODULE_7__.calcBalanceSheet)(normalized.journals, periodTo);\n    const cashflow = (0,_cashflow__WEBPACK_IMPORTED_MODULE_8__.calcCashflowDirect)(currentJournals);\n    const accountMovement = (0,_accountMovement__WEBPACK_IMPORTED_MODULE_9__.calcAccountMovementSummary)(normalized.journals, periodFrom, periodTo);\n    const equityChanges = (0,_equity__WEBPACK_IMPORTED_MODULE_10__.calcEquityChanges)(normalized.journals, periodFrom, periodTo, profitLoss.totals.net_profit);\n    const comparativeProfitLoss = previousPeriod ? (0,_comparative__WEBPACK_IMPORTED_MODULE_11__.calcComparativeProfitLoss)(currentJournals, previousJournals, {\n        from: periodFrom,\n        to: periodTo\n    }, previousPeriod) : null;\n    const previousAsOf = periodFrom ? (0,_utils__WEBPACK_IMPORTED_MODULE_13__.addDays)(periodFrom, -1) : null;\n    const comparativeBalanceSheet = previousAsOf ? (0,_comparative__WEBPACK_IMPORTED_MODULE_11__.calcComparativeBalanceSheet)(normalized.journals, periodTo, previousAsOf) : null;\n    const auditTrail = (0,_journal__WEBPACK_IMPORTED_MODULE_3__.calcAuditTrail)(currentJournals);\n    const activitySummary = (0,_activitySummary__WEBPACK_IMPORTED_MODULE_12__.calcAccountActivitySummary)(currentJournals);\n    return {\n        ...normalized,\n        checks,\n        models: {\n            journalRegister,\n            generalLedger,\n            trialBalance,\n            profitLoss,\n            balanceSheet,\n            cashflow,\n            accountMovement,\n            equityChanges,\n            comparativeProfitLoss,\n            comparativeBalanceSheet,\n            auditTrail,\n            activitySummary\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVwb3J0L2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDK0M7QUFDUjtBQUNPO0FBQ2tCO0FBQ25CO0FBQ0s7QUFDSjtBQUNJO0FBQ0Y7QUFDZTtBQUNsQjtBQUMwQztBQUN4QjtBQUM3QjtBQUNlO0FBRTFDLFNBQVNpQixxQkFBcUJDLE9BQVk7SUFDL0MsTUFBTUMsYUFBYW5CLDREQUFnQkEsQ0FBQ2tCO0lBQ3BDLE1BQU1FLFNBQVNuQixvREFBV0EsQ0FBQ2tCLFdBQVdFLFFBQVE7SUFFOUMsTUFBTUMsYUFBYUgsV0FBV0csVUFBVTtJQUN4QyxNQUFNQyxXQUFXSixXQUFXSSxRQUFRO0lBQ3BDLE1BQU1DLGlCQUFpQlIsK0RBQW9CQSxDQUFDTSxZQUFZQztJQUV4RCxNQUFNRSxrQkFBa0J2QiwyREFBY0EsQ0FBQ2lCLFdBQVdFLFFBQVEsRUFBRUMsWUFBWUM7SUFDeEUsTUFBTUcsbUJBQW1CRixpQkFBaUJ0QiwyREFBY0EsQ0FBQ2lCLFdBQVdFLFFBQVEsRUFBRUcsZUFBZUcsSUFBSSxFQUFFSCxlQUFlSSxFQUFFLElBQUksRUFBRTtJQUUxSCxNQUFNQyxrQkFBa0IxQiw2REFBbUJBLENBQUNzQjtJQUM1QyxNQUFNSyxnQkFBZ0J6QiwwREFBaUJBLENBQUNjLFdBQVdFLFFBQVEsRUFBRUMsWUFBWUM7SUFDekUsTUFBTVEsZUFBZXpCLCtEQUFnQkEsQ0FBQ2EsV0FBV0UsUUFBUSxFQUFFQyxZQUFZQztJQUN2RSxNQUFNUyxhQUFhekIsMkRBQWNBLENBQUNrQjtJQUVsQyxNQUFNUSxlQUFlekIsK0RBQWdCQSxDQUFDVyxXQUFXRSxRQUFRLEVBQUVFO0lBQzNELE1BQU1XLFdBQVd6Qiw2REFBa0JBLENBQUNnQjtJQUVwQyxNQUFNVSxrQkFBa0J6Qiw0RUFBMEJBLENBQUNTLFdBQVdFLFFBQVEsRUFBRUMsWUFBWUM7SUFDcEYsTUFBTWEsZ0JBQWdCekIsMkRBQWlCQSxDQUFDUSxXQUFXRSxRQUFRLEVBQUVDLFlBQVlDLFVBQVVTLFdBQVdLLE1BQU0sQ0FBQ0MsVUFBVTtJQUUvRyxNQUFNQyx3QkFBd0JmLGlCQUMxQlosd0VBQXlCQSxDQUFDYSxpQkFBaUJDLGtCQUFrQjtRQUFFQyxNQUFNTDtRQUFZTSxJQUFJTDtJQUFTLEdBQUdDLGtCQUNqRztJQUVKLE1BQU1nQixlQUFlbEIsYUFBYVAsZ0RBQU9BLENBQUNPLFlBQVksQ0FBQyxLQUFLO0lBQzVELE1BQU1tQiwwQkFBMEJELGVBQzVCM0IsMEVBQTJCQSxDQUFDTSxXQUFXRSxRQUFRLEVBQUVFLFVBQVVpQixnQkFDM0Q7SUFFSixNQUFNRSxhQUFhdEMsd0RBQWNBLENBQUNxQjtJQUNsQyxNQUFNa0Isa0JBQWtCN0IsNkVBQTBCQSxDQUFDVztJQUVuRCxPQUFPO1FBQ0wsR0FBR04sVUFBVTtRQUNiQztRQUNBd0IsUUFBUTtZQUNOZjtZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBRztZQUNBRTtZQUNBQztZQUNBQztRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL29wdGl2dXotcmVwb3J0LWVuZ2luZS8uL2xpYi9yZXBvcnQvaW5kZXgudHM/ZmI5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFJlcG9ydFJlc3VsdCB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBub3JtYWxpemVQYXlsb2FkIH0gZnJvbSBcIi4vbm9ybWFsaXplXCI7XG5pbXBvcnQgeyBiYXNpY0NoZWNrcyB9IGZyb20gXCIuL2NoZWNrc1wiO1xuaW1wb3J0IHsgZmlsdGVyQnlQZXJpb2QgfSBmcm9tIFwiLi9hY2NvdW50aW5nXCI7XG5pbXBvcnQgeyBjYWxjSm91cm5hbFJlZ2lzdGVyLCBjYWxjQXVkaXRUcmFpbCB9IGZyb20gXCIuL2pvdXJuYWxcIjtcbmltcG9ydCB7IGNhbGNHZW5lcmFsTGVkZ2VyIH0gZnJvbSBcIi4vbGVkZ2VyXCI7XG5pbXBvcnQgeyBjYWxjVHJpYWxCYWxhbmNlIH0gZnJvbSBcIi4vdHJpYWxCYWxhbmNlXCI7XG5pbXBvcnQgeyBjYWxjUHJvZml0TG9zcyB9IGZyb20gXCIuL3Byb2ZpdExvc3NcIjtcbmltcG9ydCB7IGNhbGNCYWxhbmNlU2hlZXQgfSBmcm9tIFwiLi9iYWxhbmNlU2hlZXRcIjtcbmltcG9ydCB7IGNhbGNDYXNoZmxvd0RpcmVjdCB9IGZyb20gXCIuL2Nhc2hmbG93XCI7XG5pbXBvcnQgeyBjYWxjQWNjb3VudE1vdmVtZW50U3VtbWFyeSB9IGZyb20gXCIuL2FjY291bnRNb3ZlbWVudFwiO1xuaW1wb3J0IHsgY2FsY0VxdWl0eUNoYW5nZXMgfSBmcm9tIFwiLi9lcXVpdHlcIjtcbmltcG9ydCB7IGNhbGNDb21wYXJhdGl2ZVByb2ZpdExvc3MsIGNhbGNDb21wYXJhdGl2ZUJhbGFuY2VTaGVldCB9IGZyb20gXCIuL2NvbXBhcmF0aXZlXCI7XG5pbXBvcnQgeyBjYWxjQWNjb3VudEFjdGl2aXR5U3VtbWFyeSB9IGZyb20gXCIuL2FjdGl2aXR5U3VtbWFyeVwiO1xuaW1wb3J0IHsgYWRkRGF5cyB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBkZXJpdmVQcmV2aW91c1BlcmlvZCB9IGZyb20gXCIuL3BlcmlvZHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQWxsUmVwb3J0TW9kZWxzKHBheWxvYWQ6IGFueSk6IFJlcG9ydFJlc3VsdCB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVQYXlsb2FkKHBheWxvYWQpO1xuICBjb25zdCBjaGVja3MgPSBiYXNpY0NoZWNrcyhub3JtYWxpemVkLmpvdXJuYWxzKTtcblxuICBjb25zdCBwZXJpb2RGcm9tID0gbm9ybWFsaXplZC5wZXJpb2RGcm9tO1xuICBjb25zdCBwZXJpb2RUbyA9IG5vcm1hbGl6ZWQucGVyaW9kVG87XG4gIGNvbnN0IHByZXZpb3VzUGVyaW9kID0gZGVyaXZlUHJldmlvdXNQZXJpb2QocGVyaW9kRnJvbSwgcGVyaW9kVG8pO1xuXG4gIGNvbnN0IGN1cnJlbnRKb3VybmFscyA9IGZpbHRlckJ5UGVyaW9kKG5vcm1hbGl6ZWQuam91cm5hbHMsIHBlcmlvZEZyb20sIHBlcmlvZFRvKTtcbiAgY29uc3QgcHJldmlvdXNKb3VybmFscyA9IHByZXZpb3VzUGVyaW9kID8gZmlsdGVyQnlQZXJpb2Qobm9ybWFsaXplZC5qb3VybmFscywgcHJldmlvdXNQZXJpb2QuZnJvbSwgcHJldmlvdXNQZXJpb2QudG8pIDogW107XG5cbiAgY29uc3Qgam91cm5hbFJlZ2lzdGVyID0gY2FsY0pvdXJuYWxSZWdpc3RlcihjdXJyZW50Sm91cm5hbHMpO1xuICBjb25zdCBnZW5lcmFsTGVkZ2VyID0gY2FsY0dlbmVyYWxMZWRnZXIobm9ybWFsaXplZC5qb3VybmFscywgcGVyaW9kRnJvbSwgcGVyaW9kVG8pO1xuICBjb25zdCB0cmlhbEJhbGFuY2UgPSBjYWxjVHJpYWxCYWxhbmNlKG5vcm1hbGl6ZWQuam91cm5hbHMsIHBlcmlvZEZyb20sIHBlcmlvZFRvKTtcbiAgY29uc3QgcHJvZml0TG9zcyA9IGNhbGNQcm9maXRMb3NzKGN1cnJlbnRKb3VybmFscyk7XG5cbiAgY29uc3QgYmFsYW5jZVNoZWV0ID0gY2FsY0JhbGFuY2VTaGVldChub3JtYWxpemVkLmpvdXJuYWxzLCBwZXJpb2RUbyk7XG4gIGNvbnN0IGNhc2hmbG93ID0gY2FsY0Nhc2hmbG93RGlyZWN0KGN1cnJlbnRKb3VybmFscyk7XG5cbiAgY29uc3QgYWNjb3VudE1vdmVtZW50ID0gY2FsY0FjY291bnRNb3ZlbWVudFN1bW1hcnkobm9ybWFsaXplZC5qb3VybmFscywgcGVyaW9kRnJvbSwgcGVyaW9kVG8pO1xuICBjb25zdCBlcXVpdHlDaGFuZ2VzID0gY2FsY0VxdWl0eUNoYW5nZXMobm9ybWFsaXplZC5qb3VybmFscywgcGVyaW9kRnJvbSwgcGVyaW9kVG8sIHByb2ZpdExvc3MudG90YWxzLm5ldF9wcm9maXQpO1xuXG4gIGNvbnN0IGNvbXBhcmF0aXZlUHJvZml0TG9zcyA9IHByZXZpb3VzUGVyaW9kXG4gICAgPyBjYWxjQ29tcGFyYXRpdmVQcm9maXRMb3NzKGN1cnJlbnRKb3VybmFscywgcHJldmlvdXNKb3VybmFscywgeyBmcm9tOiBwZXJpb2RGcm9tLCB0bzogcGVyaW9kVG8gfSwgcHJldmlvdXNQZXJpb2QpXG4gICAgOiBudWxsO1xuXG4gIGNvbnN0IHByZXZpb3VzQXNPZiA9IHBlcmlvZEZyb20gPyBhZGREYXlzKHBlcmlvZEZyb20sIC0xKSA6IG51bGw7XG4gIGNvbnN0IGNvbXBhcmF0aXZlQmFsYW5jZVNoZWV0ID0gcHJldmlvdXNBc09mXG4gICAgPyBjYWxjQ29tcGFyYXRpdmVCYWxhbmNlU2hlZXQobm9ybWFsaXplZC5qb3VybmFscywgcGVyaW9kVG8sIHByZXZpb3VzQXNPZilcbiAgICA6IG51bGw7XG5cbiAgY29uc3QgYXVkaXRUcmFpbCA9IGNhbGNBdWRpdFRyYWlsKGN1cnJlbnRKb3VybmFscyk7XG4gIGNvbnN0IGFjdGl2aXR5U3VtbWFyeSA9IGNhbGNBY2NvdW50QWN0aXZpdHlTdW1tYXJ5KGN1cnJlbnRKb3VybmFscyk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5ub3JtYWxpemVkLFxuICAgIGNoZWNrcyxcbiAgICBtb2RlbHM6IHtcbiAgICAgIGpvdXJuYWxSZWdpc3RlcixcbiAgICAgIGdlbmVyYWxMZWRnZXIsXG4gICAgICB0cmlhbEJhbGFuY2UsXG4gICAgICBwcm9maXRMb3NzLFxuICAgICAgYmFsYW5jZVNoZWV0LFxuICAgICAgY2FzaGZsb3csXG4gICAgICBhY2NvdW50TW92ZW1lbnQsXG4gICAgICBlcXVpdHlDaGFuZ2VzLFxuICAgICAgY29tcGFyYXRpdmVQcm9maXRMb3NzLFxuICAgICAgY29tcGFyYXRpdmVCYWxhbmNlU2hlZXQsXG4gICAgICBhdWRpdFRyYWlsLFxuICAgICAgYWN0aXZpdHlTdW1tYXJ5LFxuICAgIH0sXG4gIH07XG59XG4iXSwibmFtZXMiOlsibm9ybWFsaXplUGF5bG9hZCIsImJhc2ljQ2hlY2tzIiwiZmlsdGVyQnlQZXJpb2QiLCJjYWxjSm91cm5hbFJlZ2lzdGVyIiwiY2FsY0F1ZGl0VHJhaWwiLCJjYWxjR2VuZXJhbExlZGdlciIsImNhbGNUcmlhbEJhbGFuY2UiLCJjYWxjUHJvZml0TG9zcyIsImNhbGNCYWxhbmNlU2hlZXQiLCJjYWxjQ2FzaGZsb3dEaXJlY3QiLCJjYWxjQWNjb3VudE1vdmVtZW50U3VtbWFyeSIsImNhbGNFcXVpdHlDaGFuZ2VzIiwiY2FsY0NvbXBhcmF0aXZlUHJvZml0TG9zcyIsImNhbGNDb21wYXJhdGl2ZUJhbGFuY2VTaGVldCIsImNhbGNBY2NvdW50QWN0aXZpdHlTdW1tYXJ5IiwiYWRkRGF5cyIsImRlcml2ZVByZXZpb3VzUGVyaW9kIiwiYnVpbGRBbGxSZXBvcnRNb2RlbHMiLCJwYXlsb2FkIiwibm9ybWFsaXplZCIsImNoZWNrcyIsImpvdXJuYWxzIiwicGVyaW9kRnJvbSIsInBlcmlvZFRvIiwicHJldmlvdXNQZXJpb2QiLCJjdXJyZW50Sm91cm5hbHMiLCJwcmV2aW91c0pvdXJuYWxzIiwiZnJvbSIsInRvIiwiam91cm5hbFJlZ2lzdGVyIiwiZ2VuZXJhbExlZGdlciIsInRyaWFsQmFsYW5jZSIsInByb2ZpdExvc3MiLCJiYWxhbmNlU2hlZXQiLCJjYXNoZmxvdyIsImFjY291bnRNb3ZlbWVudCIsImVxdWl0eUNoYW5nZXMiLCJ0b3RhbHMiLCJuZXRfcHJvZml0IiwiY29tcGFyYXRpdmVQcm9maXRMb3NzIiwicHJldmlvdXNBc09mIiwiY29tcGFyYXRpdmVCYWxhbmNlU2hlZXQiLCJhdWRpdFRyYWlsIiwiYWN0aXZpdHlTdW1tYXJ5IiwibW9kZWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/index.ts\n");

/***/ }),

/***/ "(api)/./lib/report/journal.ts":
/*!*******************************!*\
  !*** ./lib/report/journal.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcAuditTrail: () => (/* binding */ calcAuditTrail),\n/* harmony export */   calcJournalRegister: () => (/* binding */ calcJournalRegister)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n/* harmony import */ var _accountingLogic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accountingLogic */ \"(api)/./lib/report/accountingLogic.ts\");\n/* harmony import */ var _validations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validations */ \"(api)/./lib/report/validations.ts\");\n\n\n\nfunction calcJournalRegister(journals) {\n    const map = new Map();\n    for (const r of journals){\n        const key = r.journal_header_id || \"(no-header)\";\n        if (!map.has(key)) {\n            map.set(key, {\n                journal_header_id: key,\n                date: r.transaction_date,\n                description: r.description || \"\",\n                lines: [],\n                total_debit: 0,\n                total_credit: 0,\n                is_balanced: true,\n                trace: {\n                    row_ids: [],\n                    header_ids: [\n                        key\n                    ]\n                }\n            });\n        }\n        const entry = map.get(key);\n        entry.lines.push(r);\n        if (!entry.date && r.transaction_date) entry.date = r.transaction_date;\n        entry.total_debit += r.debit;\n        entry.total_credit += r.credit;\n    }\n    const entries = Array.from(map.values());\n    for (const e of entries){\n        e.is_balanced = (0,_validations__WEBPACK_IMPORTED_MODULE_2__.isBalanced)(e.total_debit, e.total_credit);\n        e.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.traceFromRows)(e.lines);\n    }\n    entries.sort((a, b)=>{\n        const dc = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.compareDate)(a.date, b.date);\n        if (dc !== 0) return dc;\n        return a.journal_header_id.localeCompare(b.journal_header_id);\n    });\n    const totals = entries.reduce((s, e)=>{\n        s.total_debit += e.total_debit;\n        s.total_credit += e.total_credit;\n        return s;\n    }, {\n        total_debit: 0,\n        total_credit: 0\n    });\n    const balanced = (0,_validations__WEBPACK_IMPORTED_MODULE_2__.isBalanced)(totals.total_debit, totals.total_credit);\n    return {\n        raw_rows: journals,\n        grouped: {\n            entries\n        },\n        totals: {\n            ...totals,\n            entry_count: entries.length\n        },\n        validations: {\n            is_balanced: balanced\n        }\n    };\n}\nfunction calcAuditTrail(journals) {\n    const register = calcJournalRegister(journals);\n    return {\n        raw_rows: register.raw_rows,\n        grouped: {\n            entries: register.grouped.entries\n        },\n        totals: register.totals,\n        validations: register.validations\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVwb3J0L2pvdXJuYWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDc0M7QUFDWTtBQUNQO0FBRXBDLFNBQVNHLG9CQUFvQkMsUUFBc0I7SUFDeEQsTUFBTUMsTUFBTSxJQUFJQztJQUNoQixLQUFLLE1BQU1DLEtBQUtILFNBQVU7UUFDeEIsTUFBTUksTUFBTUQsRUFBRUUsaUJBQWlCLElBQUk7UUFDbkMsSUFBSSxDQUFDSixJQUFJSyxHQUFHLENBQUNGLE1BQU07WUFDakJILElBQUlNLEdBQUcsQ0FBQ0gsS0FBSztnQkFDWEMsbUJBQW1CRDtnQkFDbkJJLE1BQU1MLEVBQUVNLGdCQUFnQjtnQkFDeEJDLGFBQWFQLEVBQUVPLFdBQVcsSUFBSTtnQkFDOUJDLE9BQU8sRUFBRTtnQkFDVEMsYUFBYTtnQkFDYkMsY0FBYztnQkFDZEMsYUFBYTtnQkFDYkMsT0FBTztvQkFBRUMsU0FBUyxFQUFFO29CQUFFQyxZQUFZO3dCQUFDYjtxQkFBSTtnQkFBQztZQUMxQztRQUNGO1FBQ0EsTUFBTWMsUUFBUWpCLElBQUlrQixHQUFHLENBQUNmO1FBQ3RCYyxNQUFNUCxLQUFLLENBQUNTLElBQUksQ0FBQ2pCO1FBQ2pCLElBQUksQ0FBQ2UsTUFBTVYsSUFBSSxJQUFJTCxFQUFFTSxnQkFBZ0IsRUFBRVMsTUFBTVYsSUFBSSxHQUFHTCxFQUFFTSxnQkFBZ0I7UUFDdEVTLE1BQU1OLFdBQVcsSUFBSVQsRUFBRWtCLEtBQUs7UUFDNUJILE1BQU1MLFlBQVksSUFBSVYsRUFBRW1CLE1BQU07SUFDaEM7SUFFQSxNQUFNQyxVQUFVQyxNQUFNQyxJQUFJLENBQUN4QixJQUFJeUIsTUFBTTtJQUNyQyxLQUFLLE1BQU1DLEtBQUtKLFFBQVM7UUFDdkJJLEVBQUViLFdBQVcsR0FBR2hCLHdEQUFVQSxDQUFDNkIsRUFBRWYsV0FBVyxFQUFFZSxFQUFFZCxZQUFZO1FBQ3hEYyxFQUFFWixLQUFLLEdBQUdsQiwrREFBYUEsQ0FBQzhCLEVBQUVoQixLQUFLO0lBQ2pDO0lBRUFZLFFBQVFLLElBQUksQ0FBQyxDQUFDQyxHQUFHQztRQUNmLE1BQU1DLEtBQUtuQyxtREFBV0EsQ0FBQ2lDLEVBQUVyQixJQUFJLEVBQUVzQixFQUFFdEIsSUFBSTtRQUNyQyxJQUFJdUIsT0FBTyxHQUFHLE9BQU9BO1FBQ3JCLE9BQU9GLEVBQUV4QixpQkFBaUIsQ0FBQzJCLGFBQWEsQ0FBQ0YsRUFBRXpCLGlCQUFpQjtJQUM5RDtJQUVBLE1BQU00QixTQUFTVixRQUFRVyxNQUFNLENBQzNCLENBQUNDLEdBQUdSO1FBQ0ZRLEVBQUV2QixXQUFXLElBQUllLEVBQUVmLFdBQVc7UUFDOUJ1QixFQUFFdEIsWUFBWSxJQUFJYyxFQUFFZCxZQUFZO1FBQ2hDLE9BQU9zQjtJQUNULEdBQ0E7UUFBRXZCLGFBQWE7UUFBR0MsY0FBYztJQUFFO0lBR3BDLE1BQU11QixXQUFXdEMsd0RBQVVBLENBQUNtQyxPQUFPckIsV0FBVyxFQUFFcUIsT0FBT3BCLFlBQVk7SUFFbkUsT0FBTztRQUNMd0IsVUFBVXJDO1FBQ1ZzQyxTQUFTO1lBQUVmO1FBQVE7UUFDbkJVLFFBQVE7WUFBRSxHQUFHQSxNQUFNO1lBQUVNLGFBQWFoQixRQUFRaUIsTUFBTTtRQUFDO1FBQ2pEQyxhQUFhO1lBQUUzQixhQUFhc0I7UUFBUztJQUN2QztBQUNGO0FBRU8sU0FBU00sZUFBZTFDLFFBQXNCO0lBQ25ELE1BQU0yQyxXQUFXNUMsb0JBQW9CQztJQUNyQyxPQUFPO1FBQ0xxQyxVQUFVTSxTQUFTTixRQUFRO1FBQzNCQyxTQUFTO1lBQUVmLFNBQVNvQixTQUFTTCxPQUFPLENBQUNmLE9BQU87UUFBQztRQUM3Q1UsUUFBUVUsU0FBU1YsTUFBTTtRQUN2QlEsYUFBYUUsU0FBU0YsV0FBVztJQUNuQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3B0aXZ1ei1yZXBvcnQtZW5naW5lLy4vbGliL3JlcG9ydC9qb3VybmFsLnRzP2Y0YWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBKb3VybmFsUmVnaXN0ZXJFbnRyeSwgSm91cm5hbFJlZ2lzdGVyUmVwb3J0LCBBdWRpdFRyYWlsUmVwb3J0LCBKb3VybmFsUm93IH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IGNvbXBhcmVEYXRlIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IHRyYWNlRnJvbVJvd3MgfSBmcm9tIFwiLi9hY2NvdW50aW5nTG9naWNcIjtcbmltcG9ydCB7IGlzQmFsYW5jZWQgfSBmcm9tIFwiLi92YWxpZGF0aW9uc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY0pvdXJuYWxSZWdpc3Rlcihqb3VybmFsczogSm91cm5hbFJvd1tdKTogSm91cm5hbFJlZ2lzdGVyUmVwb3J0IHtcbiAgY29uc3QgbWFwID0gbmV3IE1hcDxzdHJpbmcsIEpvdXJuYWxSZWdpc3RlckVudHJ5PigpO1xuICBmb3IgKGNvbnN0IHIgb2Ygam91cm5hbHMpIHtcbiAgICBjb25zdCBrZXkgPSByLmpvdXJuYWxfaGVhZGVyX2lkIHx8IFwiKG5vLWhlYWRlcilcIjtcbiAgICBpZiAoIW1hcC5oYXMoa2V5KSkge1xuICAgICAgbWFwLnNldChrZXksIHtcbiAgICAgICAgam91cm5hbF9oZWFkZXJfaWQ6IGtleSxcbiAgICAgICAgZGF0ZTogci50cmFuc2FjdGlvbl9kYXRlLFxuICAgICAgICBkZXNjcmlwdGlvbjogci5kZXNjcmlwdGlvbiB8fCBcIlwiLFxuICAgICAgICBsaW5lczogW10sXG4gICAgICAgIHRvdGFsX2RlYml0OiAwLFxuICAgICAgICB0b3RhbF9jcmVkaXQ6IDAsXG4gICAgICAgIGlzX2JhbGFuY2VkOiB0cnVlLFxuICAgICAgICB0cmFjZTogeyByb3dfaWRzOiBbXSwgaGVhZGVyX2lkczogW2tleV0gfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBlbnRyeSA9IG1hcC5nZXQoa2V5KSE7XG4gICAgZW50cnkubGluZXMucHVzaChyKTtcbiAgICBpZiAoIWVudHJ5LmRhdGUgJiYgci50cmFuc2FjdGlvbl9kYXRlKSBlbnRyeS5kYXRlID0gci50cmFuc2FjdGlvbl9kYXRlO1xuICAgIGVudHJ5LnRvdGFsX2RlYml0ICs9IHIuZGViaXQ7XG4gICAgZW50cnkudG90YWxfY3JlZGl0ICs9IHIuY3JlZGl0O1xuICB9XG5cbiAgY29uc3QgZW50cmllcyA9IEFycmF5LmZyb20obWFwLnZhbHVlcygpKTtcbiAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICBlLmlzX2JhbGFuY2VkID0gaXNCYWxhbmNlZChlLnRvdGFsX2RlYml0LCBlLnRvdGFsX2NyZWRpdCk7XG4gICAgZS50cmFjZSA9IHRyYWNlRnJvbVJvd3MoZS5saW5lcyk7XG4gIH1cblxuICBlbnRyaWVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBkYyA9IGNvbXBhcmVEYXRlKGEuZGF0ZSwgYi5kYXRlKTtcbiAgICBpZiAoZGMgIT09IDApIHJldHVybiBkYztcbiAgICByZXR1cm4gYS5qb3VybmFsX2hlYWRlcl9pZC5sb2NhbGVDb21wYXJlKGIuam91cm5hbF9oZWFkZXJfaWQpO1xuICB9KTtcblxuICBjb25zdCB0b3RhbHMgPSBlbnRyaWVzLnJlZHVjZShcbiAgICAocywgZSkgPT4ge1xuICAgICAgcy50b3RhbF9kZWJpdCArPSBlLnRvdGFsX2RlYml0O1xuICAgICAgcy50b3RhbF9jcmVkaXQgKz0gZS50b3RhbF9jcmVkaXQ7XG4gICAgICByZXR1cm4gcztcbiAgICB9LFxuICAgIHsgdG90YWxfZGViaXQ6IDAsIHRvdGFsX2NyZWRpdDogMCB9XG4gICk7XG5cbiAgY29uc3QgYmFsYW5jZWQgPSBpc0JhbGFuY2VkKHRvdGFscy50b3RhbF9kZWJpdCwgdG90YWxzLnRvdGFsX2NyZWRpdCk7XG5cbiAgcmV0dXJuIHtcbiAgICByYXdfcm93czogam91cm5hbHMsXG4gICAgZ3JvdXBlZDogeyBlbnRyaWVzIH0sXG4gICAgdG90YWxzOiB7IC4uLnRvdGFscywgZW50cnlfY291bnQ6IGVudHJpZXMubGVuZ3RoIH0sXG4gICAgdmFsaWRhdGlvbnM6IHsgaXNfYmFsYW5jZWQ6IGJhbGFuY2VkIH0sXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjQXVkaXRUcmFpbChqb3VybmFsczogSm91cm5hbFJvd1tdKTogQXVkaXRUcmFpbFJlcG9ydCB7XG4gIGNvbnN0IHJlZ2lzdGVyID0gY2FsY0pvdXJuYWxSZWdpc3Rlcihqb3VybmFscyk7XG4gIHJldHVybiB7XG4gICAgcmF3X3Jvd3M6IHJlZ2lzdGVyLnJhd19yb3dzLFxuICAgIGdyb3VwZWQ6IHsgZW50cmllczogcmVnaXN0ZXIuZ3JvdXBlZC5lbnRyaWVzIH0sXG4gICAgdG90YWxzOiByZWdpc3Rlci50b3RhbHMsXG4gICAgdmFsaWRhdGlvbnM6IHJlZ2lzdGVyLnZhbGlkYXRpb25zLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbImNvbXBhcmVEYXRlIiwidHJhY2VGcm9tUm93cyIsImlzQmFsYW5jZWQiLCJjYWxjSm91cm5hbFJlZ2lzdGVyIiwiam91cm5hbHMiLCJtYXAiLCJNYXAiLCJyIiwia2V5Iiwiam91cm5hbF9oZWFkZXJfaWQiLCJoYXMiLCJzZXQiLCJkYXRlIiwidHJhbnNhY3Rpb25fZGF0ZSIsImRlc2NyaXB0aW9uIiwibGluZXMiLCJ0b3RhbF9kZWJpdCIsInRvdGFsX2NyZWRpdCIsImlzX2JhbGFuY2VkIiwidHJhY2UiLCJyb3dfaWRzIiwiaGVhZGVyX2lkcyIsImVudHJ5IiwiZ2V0IiwicHVzaCIsImRlYml0IiwiY3JlZGl0IiwiZW50cmllcyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImUiLCJzb3J0IiwiYSIsImIiLCJkYyIsImxvY2FsZUNvbXBhcmUiLCJ0b3RhbHMiLCJyZWR1Y2UiLCJzIiwiYmFsYW5jZWQiLCJyYXdfcm93cyIsImdyb3VwZWQiLCJlbnRyeV9jb3VudCIsImxlbmd0aCIsInZhbGlkYXRpb25zIiwiY2FsY0F1ZGl0VHJhaWwiLCJyZWdpc3RlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/report/journal.ts\n");

/***/ }),

/***/ "(api)/./lib/report/ledger.ts":
/*!******************************!*\
  !*** ./lib/report/ledger.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcGeneralLedger: () => (/* binding */ calcGeneralLedger)\n/* harmony export */ });\n/* harmony import */ var _accounting__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./accounting */ \"(api)/./lib/report/accounting.ts\");\n/* harmony import */ var _accountingLogic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accountingLogic */ \"(api)/./lib/report/accountingLogic.ts\");\n/* harmony import */ var _validations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validations */ \"(api)/./lib/report/validations.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n\n\n\n\nfunction calcGeneralLedger(journals, periodFrom, periodTo) {\n    const current = (0,_accounting__WEBPACK_IMPORTED_MODULE_0__.filterByPeriod)(journals, periodFrom, periodTo);\n    const openingRows = periodFrom ? (0,_accounting__WEBPACK_IMPORTED_MODULE_0__.filterAsOf)(journals, (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addDays)(periodFrom, -1)) : [];\n    const map = new Map();\n    for (const r of journals){\n        const key = r.account_id || \"(unknown)\";\n        if (!map.has(key)) {\n            map.set(key, {\n                account: (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.accountFromRow)(r),\n                opening_balance: 0,\n                closing_balance: 0,\n                total_debit: 0,\n                total_credit: 0,\n                days: [],\n                trace: {\n                    row_ids: [],\n                    header_ids: []\n                }\n            });\n        }\n    }\n    const openingByAccount = indexRows(openingRows);\n    for (const [key, rows] of openingByAccount.entries()){\n        const acc = map.get(key);\n        if (!acc) continue;\n        acc.opening_balance = rows.reduce((s, r)=>s + (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.signedAmount)(r), 0);\n    }\n    const currentByAccount = indexRows(current);\n    for (const [key, rows] of currentByAccount.entries()){\n        const acc = map.get(key);\n        if (!acc) continue;\n        const normal = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.normalSideForType)(acc.account.account_type);\n        let running = acc.opening_balance;\n        const sorted = (0,_accounting__WEBPACK_IMPORTED_MODULE_0__.sortJournalRows)(rows);\n        const dayMap = new Map();\n        for (const r of sorted){\n            const delta = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.signedAmount)(r);\n            running += delta;\n            acc.total_debit += r.debit;\n            acc.total_credit += r.credit;\n            const entry = {\n                transaction_date: r.transaction_date,\n                journal_header_id: r.journal_header_id,\n                row_id: r.row_id,\n                description: r.description,\n                debit: r.debit,\n                credit: r.credit,\n                balance: running,\n                trace: (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.traceFromRows)([\n                    r\n                ])\n            };\n            const dayKey = r.transaction_date || null;\n            if (!dayMap.has(dayKey)) {\n                dayMap.set(dayKey, {\n                    date: dayKey,\n                    entries: [],\n                    day_debit: 0,\n                    day_credit: 0,\n                    day_net: 0,\n                    trace: {\n                        row_ids: [],\n                        header_ids: []\n                    }\n                });\n            }\n            const day = dayMap.get(dayKey);\n            day.entries.push(entry);\n            day.day_debit += r.debit;\n            day.day_credit += r.credit;\n            day.day_net += normal === \"debit\" ? r.debit - r.credit : r.credit - r.debit;\n            day.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.mergeTraces)([\n                day.trace,\n                entry.trace\n            ]);\n        }\n        acc.days = Array.from(dayMap.values()).sort((a, b)=>{\n            const da = a.date || \"\";\n            const db = b.date || \"\";\n            return da.localeCompare(db);\n        });\n        acc.closing_balance = running;\n        acc.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_1__.mergeTraces)(acc.days.map((d)=>d.trace));\n    }\n    const accounts = Array.from(map.values()).sort((a, b)=>a.account.account_name.localeCompare(b.account.account_name));\n    const totals = accounts.reduce((s, a)=>{\n        s.total_debit += a.total_debit;\n        s.total_credit += a.total_credit;\n        return s;\n    }, {\n        total_debit: 0,\n        total_credit: 0\n    });\n    const balanced = (0,_validations__WEBPACK_IMPORTED_MODULE_2__.isBalanced)(totals.total_debit, totals.total_credit);\n    return {\n        raw_rows: current,\n        grouped: {\n            accounts\n        },\n        totals,\n        validations: {\n            is_balanced: balanced\n        }\n    };\n}\nfunction indexRows(rows) {\n    const map = new Map();\n    for (const r of rows){\n        const key = r.account_id || \"(unknown)\";\n        if (!map.has(key)) map.set(key, []);\n        map.get(key).push(r);\n    }\n    return map;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0FBYztJQUFFO0lBR3BDLE1BQU1nRCxXQUFXbkUsd0RBQVVBLENBQUNrRSxPQUFPaEQsV0FBVyxFQUFFZ0QsT0FBTy9DLFlBQVk7SUFFbkUsT0FBTztRQUNMaUQsVUFBVTlEO1FBQ1YrRCxTQUFTO1lBQUVMO1FBQVM7UUFDcEJFO1FBQ0FJLGFBQWE7WUFBRUMsYUFBYUo7UUFBUztJQUN2QztBQUNGO0FBRUEsU0FBUzFDLFVBQVVDLElBQWtCO0lBQ25DLE1BQU1sQixNQUFNLElBQUlDO0lBQ2hCLEtBQUssTUFBTUMsS0FBS2dCLEtBQU07UUFDcEIsTUFBTWYsTUFBTUQsRUFBRUUsVUFBVSxJQUFJO1FBQzVCLElBQUksQ0FBQ0osSUFBSUssR0FBRyxDQUFDRixNQUFNSCxJQUFJTSxHQUFHLENBQUNILEtBQUssRUFBRTtRQUNsQ0gsSUFBSXFCLEdBQUcsQ0FBQ2xCLEtBQU0wQyxJQUFJLENBQUMzQztJQUNyQjtJQUNBLE9BQU9GO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L2xlZGdlci50cz81NGZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgR2VuZXJhbExlZGdlckFjY291bnQsIEdlbmVyYWxMZWRnZXJSZXBvcnQsIEpvdXJuYWxSb3csIExlZGdlckRheUdyb3VwLCBMZWRnZXJFbnRyeSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBmaWx0ZXJBc09mLCBmaWx0ZXJCeVBlcmlvZCwgc29ydEpvdXJuYWxSb3dzIH0gZnJvbSBcIi4vYWNjb3VudGluZ1wiO1xuaW1wb3J0IHsgYWNjb3VudEZyb21Sb3csIG5vcm1hbFNpZGVGb3JUeXBlLCBzaWduZWRBbW91bnQsIHRyYWNlRnJvbVJvd3MsIG1lcmdlVHJhY2VzIH0gZnJvbSBcIi4vYWNjb3VudGluZ0xvZ2ljXCI7XG5pbXBvcnQgeyBpc0JhbGFuY2VkIH0gZnJvbSBcIi4vdmFsaWRhdGlvbnNcIjtcbmltcG9ydCB7IGFkZERheXMgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsY0dlbmVyYWxMZWRnZXIoam91cm5hbHM6IEpvdXJuYWxSb3dbXSwgcGVyaW9kRnJvbTogc3RyaW5nIHwgbnVsbCwgcGVyaW9kVG86IHN0cmluZyB8IG51bGwpOiBHZW5lcmFsTGVkZ2VyUmVwb3J0IHtcbiAgY29uc3QgY3VycmVudCA9IGZpbHRlckJ5UGVyaW9kKGpvdXJuYWxzLCBwZXJpb2RGcm9tLCBwZXJpb2RUbyk7XG4gIGNvbnN0IG9wZW5pbmdSb3dzID0gcGVyaW9kRnJvbSA/IGZpbHRlckFzT2Yoam91cm5hbHMsIGFkZERheXMocGVyaW9kRnJvbSwgLTEpKSA6IFtdO1xuXG4gIGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBHZW5lcmFsTGVkZ2VyQWNjb3VudD4oKTtcblxuICBmb3IgKGNvbnN0IHIgb2Ygam91cm5hbHMpIHtcbiAgICBjb25zdCBrZXkgPSByLmFjY291bnRfaWQgfHwgXCIodW5rbm93bilcIjtcbiAgICBpZiAoIW1hcC5oYXMoa2V5KSkge1xuICAgICAgbWFwLnNldChrZXksIHtcbiAgICAgICAgYWNjb3VudDogYWNjb3VudEZyb21Sb3cociksXG4gICAgICAgIG9wZW5pbmdfYmFsYW5jZTogMCxcbiAgICAgICAgY2xvc2luZ19iYWxhbmNlOiAwLFxuICAgICAgICB0b3RhbF9kZWJpdDogMCxcbiAgICAgICAgdG90YWxfY3JlZGl0OiAwLFxuICAgICAgICBkYXlzOiBbXSxcbiAgICAgICAgdHJhY2U6IHsgcm93X2lkczogW10sIGhlYWRlcl9pZHM6IFtdIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBvcGVuaW5nQnlBY2NvdW50ID0gaW5kZXhSb3dzKG9wZW5pbmdSb3dzKTtcbiAgZm9yIChjb25zdCBba2V5LCByb3dzXSBvZiBvcGVuaW5nQnlBY2NvdW50LmVudHJpZXMoKSkge1xuICAgIGNvbnN0IGFjYyA9IG1hcC5nZXQoa2V5KTtcbiAgICBpZiAoIWFjYykgY29udGludWU7XG4gICAgYWNjLm9wZW5pbmdfYmFsYW5jZSA9IHJvd3MucmVkdWNlKChzLCByKSA9PiBzICsgc2lnbmVkQW1vdW50KHIpLCAwKTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRCeUFjY291bnQgPSBpbmRleFJvd3MoY3VycmVudCk7XG4gIGZvciAoY29uc3QgW2tleSwgcm93c10gb2YgY3VycmVudEJ5QWNjb3VudC5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCBhY2MgPSBtYXAuZ2V0KGtleSk7XG4gICAgaWYgKCFhY2MpIGNvbnRpbnVlO1xuICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbFNpZGVGb3JUeXBlKGFjYy5hY2NvdW50LmFjY291bnRfdHlwZSk7XG4gICAgbGV0IHJ1bm5pbmcgPSBhY2Mub3BlbmluZ19iYWxhbmNlO1xuICAgIGNvbnN0IHNvcnRlZCA9IHNvcnRKb3VybmFsUm93cyhyb3dzKTtcbiAgICBjb25zdCBkYXlNYXAgPSBuZXcgTWFwPHN0cmluZyB8IG51bGwsIExlZGdlckRheUdyb3VwPigpO1xuXG4gICAgZm9yIChjb25zdCByIG9mIHNvcnRlZCkge1xuICAgICAgY29uc3QgZGVsdGEgPSBzaWduZWRBbW91bnQocik7XG4gICAgICBydW5uaW5nICs9IGRlbHRhO1xuICAgICAgYWNjLnRvdGFsX2RlYml0ICs9IHIuZGViaXQ7XG4gICAgICBhY2MudG90YWxfY3JlZGl0ICs9IHIuY3JlZGl0O1xuXG4gICAgICBjb25zdCBlbnRyeTogTGVkZ2VyRW50cnkgPSB7XG4gICAgICAgIHRyYW5zYWN0aW9uX2RhdGU6IHIudHJhbnNhY3Rpb25fZGF0ZSxcbiAgICAgICAgam91cm5hbF9oZWFkZXJfaWQ6IHIuam91cm5hbF9oZWFkZXJfaWQsXG4gICAgICAgIHJvd19pZDogci5yb3dfaWQsXG4gICAgICAgIGRlc2NyaXB0aW9uOiByLmRlc2NyaXB0aW9uLFxuICAgICAgICBkZWJpdDogci5kZWJpdCxcbiAgICAgICAgY3JlZGl0OiByLmNyZWRpdCxcbiAgICAgICAgYmFsYW5jZTogcnVubmluZyxcbiAgICAgICAgdHJhY2U6IHRyYWNlRnJvbVJvd3MoW3JdKSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGRheUtleSA9IHIudHJhbnNhY3Rpb25fZGF0ZSB8fCBudWxsO1xuICAgICAgaWYgKCFkYXlNYXAuaGFzKGRheUtleSkpIHtcbiAgICAgICAgZGF5TWFwLnNldChkYXlLZXksIHtcbiAgICAgICAgICBkYXRlOiBkYXlLZXksXG4gICAgICAgICAgZW50cmllczogW10sXG4gICAgICAgICAgZGF5X2RlYml0OiAwLFxuICAgICAgICAgIGRheV9jcmVkaXQ6IDAsXG4gICAgICAgICAgZGF5X25ldDogMCxcbiAgICAgICAgICB0cmFjZTogeyByb3dfaWRzOiBbXSwgaGVhZGVyX2lkczogW10gfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zdCBkYXkgPSBkYXlNYXAuZ2V0KGRheUtleSkhO1xuICAgICAgZGF5LmVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgICBkYXkuZGF5X2RlYml0ICs9IHIuZGViaXQ7XG4gICAgICBkYXkuZGF5X2NyZWRpdCArPSByLmNyZWRpdDtcbiAgICAgIGRheS5kYXlfbmV0ICs9IG5vcm1hbCA9PT0gXCJkZWJpdFwiID8gKHIuZGViaXQgLSByLmNyZWRpdCkgOiAoci5jcmVkaXQgLSByLmRlYml0KTtcbiAgICAgIGRheS50cmFjZSA9IG1lcmdlVHJhY2VzKFtkYXkudHJhY2UsIGVudHJ5LnRyYWNlXSk7XG4gICAgfVxuXG4gICAgYWNjLmRheXMgPSBBcnJheS5mcm9tKGRheU1hcC52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgZGEgPSBhLmRhdGUgfHwgXCJcIjtcbiAgICAgIGNvbnN0IGRiID0gYi5kYXRlIHx8IFwiXCI7XG4gICAgICByZXR1cm4gZGEubG9jYWxlQ29tcGFyZShkYik7XG4gICAgfSk7XG4gICAgYWNjLmNsb3NpbmdfYmFsYW5jZSA9IHJ1bm5pbmc7XG4gICAgYWNjLnRyYWNlID0gbWVyZ2VUcmFjZXMoYWNjLmRheXMubWFwKChkKSA9PiBkLnRyYWNlKSk7XG4gIH1cblxuICBjb25zdCBhY2NvdW50cyA9IEFycmF5LmZyb20obWFwLnZhbHVlcygpKS5zb3J0KChhLCBiKSA9PiBhLmFjY291bnQuYWNjb3VudF9uYW1lLmxvY2FsZUNvbXBhcmUoYi5hY2NvdW50LmFjY291bnRfbmFtZSkpO1xuICBjb25zdCB0b3RhbHMgPSBhY2NvdW50cy5yZWR1Y2UoXG4gICAgKHMsIGEpID0+IHtcbiAgICAgIHMudG90YWxfZGViaXQgKz0gYS50b3RhbF9kZWJpdDtcbiAgICAgIHMudG90YWxfY3JlZGl0ICs9IGEudG90YWxfY3JlZGl0O1xuICAgICAgcmV0dXJuIHM7XG4gICAgfSxcbiAgICB7IHRvdGFsX2RlYml0OiAwLCB0b3RhbF9jcmVkaXQ6IDAgfVxuICApO1xuXG4gIGNvbnN0IGJhbGFuY2VkID0gaXNCYWxhbmNlZCh0b3RhbHMudG90YWxfZGViaXQsIHRvdGFscy50b3RhbF9jcmVkaXQpO1xuXG4gIHJldHVybiB7XG4gICAgcmF3X3Jvd3M6IGN1cnJlbnQsXG4gICAgZ3JvdXBlZDogeyBhY2NvdW50cyB9LFxuICAgIHRvdGFscyxcbiAgICB2YWxpZGF0aW9uczogeyBpc19iYWxhbmNlZDogYmFsYW5jZWQgfSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gaW5kZXhSb3dzKHJvd3M6IEpvdXJuYWxSb3dbXSk6IE1hcDxzdHJpbmcsIEpvdXJuYWxSb3dbXT4ge1xuICBjb25zdCBtYXAgPSBuZXcgTWFwPHN0cmluZywgSm91cm5hbFJvd1tdPigpO1xuICBmb3IgKGNvbnN0IHIgb2Ygcm93cykge1xuICAgIGNvbnN0IGtleSA9IHIuYWNjb3VudF9pZCB8fCBcIih1bmtub3duKVwiO1xuICAgIGlmICghbWFwLmhhcyhrZXkpKSBtYXAuc2V0KGtleSwgW10pO1xuICAgIG1hcC5nZXQoa2V5KSEucHVzaChyKTtcbiAgfVxuICByZXR1cm4gbWFwO1xufVxuIl0sIm5hbWVzIjpbImZpbHRlckFzT2YiLCJmaWx0ZXJCeVBlcmlvZCIsInNvcnRKb3VybmFsUm93cyIsImFjY291bnRGcm9tUm93Iiwibm9ybWFsU2lkZUZvclR5cGUiLCJzaWduZWRBbW91bnQiLCJ0cmFjZUZyb21Sb3dzIiwibWVyZ2VUcmFjZXMiLCJpc0JhbGFuY2VkIiwiYWRkRGF5cyIsImNhbGNHZW5lcmFsTGVkZ2VyIiwiam91cm5hbHMiLCJwZXJpb2RGcm9tIiwicGVyaW9kVG8iLCJjdXJyZW50Iiwib3BlbmluZ1Jvd3MiLCJtYXAiLCJNYXAiLCJyIiwia2V5IiwiYWNjb3VudF9pZCIsImhhcyIsInNldCIsImFjY291bnQiLCJvcGVuaW5nX2JhbGFuY2UiLCJjbG9zaW5nX2JhbGFuY2UiLCJ0b3RhbF9kZWJpdCIsInRvdGFsX2NyZWRpdCIsImRheXMiLCJ0cmFjZSIsInJvd19pZHMiLCJoZWFkZXJfaWRzIiwib3BlbmluZ0J5QWNjb3VudCIsImluZGV4Um93cyIsInJvd3MiLCJlbnRyaWVzIiwiYWNjIiwiZ2V0IiwicmVkdWNlIiwicyIsImN1cnJlbnRCeUFjY291bnQiLCJub3JtYWwiLCJhY2NvdW50X3R5cGUiLCJydW5uaW5nIiwic29ydGVkIiwiZGF5TWFwIiwiZGVsdGEiLCJkZWJpdCIsImNyZWRpdCIsImVudHJ5IiwidHJhbnNhY3Rpb25fZGF0ZSIsImpvdXJuYWxfaGVhZGVyX2lkIiwicm93X2lkIiwiZGVzY3JpcHRpb24iLCJiYWxhbmNlIiwiZGF5S2V5IiwiZGF0ZSIsImRheV9kZWJpdCIsImRheV9jcmVkaXQiLCJkYXlfbmV0IiwiZGF5IiwicHVzaCIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsInNvcnQiLCJhIiwiYiIsImRhIiwiZGIiLCJsb2NhbGVDb21wYXJlIiwiZCIsImFjY291bnRzIiwiYWNjb3VudF9uYW1lIiwidG90YWxzIiwiYmFsYW5jZWQiLCJyYXdfcm93cyIsImdyb3VwZWQiLCJ2YWxpZGF0aW9ucyIsImlzX2JhbGFuY2VkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/ledger.ts\n");

/***/ }),

/***/ "(api)/./lib/report/normalize.ts":
/*!*********************************!*\
  !*** ./lib/report/normalize.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizePayload: () => (/* binding */ normalizePayload)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n\nfunction normalizePayload(payload) {\n    const company = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(payload?.company).trim() || \"Optivuz Business\";\n    const logo = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(payload?.logo).trim() || \"\";\n    const address = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(payload?.address).trim() || \"\";\n    const contact = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(payload?.contact).trim() || \"\";\n    const periodFrom = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.normalizeDate)(payload?.period?.from);\n    const periodTo = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.normalizeDate)(payload?.period?.to);\n    const rows = Array.isArray(payload?.journals) ? payload.journals : [];\n    const journals = rows.map((r)=>{\n        const debit = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toNumber)(r.debit);\n        const credit = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toNumber)(r.credit);\n        return {\n            row_id: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.row_id),\n            journal_header_id: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.journal_header_id),\n            account_id: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.account_id),\n            account_name: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.account_name),\n            account_category: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.account_category),\n            account_type: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.account_type),\n            kelompok_neraca: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.normalizeKelompok)(r.kelompok_neraca),\n            is_cash_account: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toBoolLoose)(r.is_cash_account),\n            cashflow_activity: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.cashflow_activity).trim() || null,\n            debit,\n            credit,\n            amount_raw: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.toNumber)(r.amount_raw),\n            currency: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.currency || \"IDR\"),\n            description: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.description),\n            transaction_date: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.normalizeDate)(r.transaction_date),\n            status: (0,_utils__WEBPACK_IMPORTED_MODULE_0__.safeText)(r.status)\n        };\n    });\n    return {\n        company,\n        logo,\n        address,\n        contact,\n        periodFrom,\n        periodTo,\n        journals\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVwb3J0L25vcm1hbGl6ZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUM0RjtBQUVyRixTQUFTSyxpQkFBaUJDLE9BQVk7SUFDM0MsTUFBTUMsVUFBVUwsZ0RBQVFBLENBQUNJLFNBQVNDLFNBQVNDLElBQUksTUFBTTtJQUNyRCxNQUFNQyxPQUFPUCxnREFBUUEsQ0FBQ0ksU0FBU0csTUFBTUQsSUFBSSxNQUFNO0lBQy9DLE1BQU1FLFVBQVVSLGdEQUFRQSxDQUFDSSxTQUFTSSxTQUFTRixJQUFJLE1BQU07SUFDckQsTUFBTUcsVUFBVVQsZ0RBQVFBLENBQUNJLFNBQVNLLFNBQVNILElBQUksTUFBTTtJQUNyRCxNQUFNSSxhQUFhWixxREFBYUEsQ0FBQ00sU0FBU08sUUFBUUM7SUFDbEQsTUFBTUMsV0FBV2YscURBQWFBLENBQUNNLFNBQVNPLFFBQVFHO0lBRWhELE1BQU1DLE9BQU9DLE1BQU1DLE9BQU8sQ0FBQ2IsU0FBU2MsWUFBWWQsUUFBUWMsUUFBUSxHQUFHLEVBQUU7SUFFckUsTUFBTUEsV0FBeUJILEtBQUtJLEdBQUcsQ0FBQyxDQUFDQztRQUN2QyxNQUFNQyxRQUFRbkIsZ0RBQVFBLENBQUNrQixFQUFFQyxLQUFLO1FBQzlCLE1BQU1DLFNBQVNwQixnREFBUUEsQ0FBQ2tCLEVBQUVFLE1BQU07UUFFaEMsT0FBTztZQUNMQyxRQUFRdkIsZ0RBQVFBLENBQUNvQixFQUFFRyxNQUFNO1lBQ3pCQyxtQkFBbUJ4QixnREFBUUEsQ0FBQ29CLEVBQUVJLGlCQUFpQjtZQUMvQ0MsWUFBWXpCLGdEQUFRQSxDQUFDb0IsRUFBRUssVUFBVTtZQUNqQ0MsY0FBYzFCLGdEQUFRQSxDQUFDb0IsRUFBRU0sWUFBWTtZQUNyQ0Msa0JBQWtCM0IsZ0RBQVFBLENBQUNvQixFQUFFTyxnQkFBZ0I7WUFDN0NDLGNBQWM1QixnREFBUUEsQ0FBQ29CLEVBQUVRLFlBQVk7WUFDckNDLGlCQUFpQjlCLHlEQUFpQkEsQ0FBQ3FCLEVBQUVTLGVBQWU7WUFDcERDLGlCQUFpQjdCLG1EQUFXQSxDQUFDbUIsRUFBRVUsZUFBZTtZQUM5Q0MsbUJBQW1CL0IsZ0RBQVFBLENBQUNvQixFQUFFVyxpQkFBaUIsRUFBRXpCLElBQUksTUFBTTtZQUMzRGU7WUFDQUM7WUFDQVUsWUFBWTlCLGdEQUFRQSxDQUFDa0IsRUFBRVksVUFBVTtZQUNqQ0MsVUFBVWpDLGdEQUFRQSxDQUFDb0IsRUFBRWEsUUFBUSxJQUFJO1lBQ2pDQyxhQUFhbEMsZ0RBQVFBLENBQUNvQixFQUFFYyxXQUFXO1lBQ25DQyxrQkFBa0JyQyxxREFBYUEsQ0FBQ3NCLEVBQUVlLGdCQUFnQjtZQUNsREMsUUFBUXBDLGdEQUFRQSxDQUFDb0IsRUFBRWdCLE1BQU07UUFDM0I7SUFDRjtJQUVBLE9BQU87UUFBRS9CO1FBQVNFO1FBQU1DO1FBQVNDO1FBQVNDO1FBQVlHO1FBQVVLO0lBQVM7QUFDM0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L25vcm1hbGl6ZS50cz84NDAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSm91cm5hbFJvdywgTm9ybWFsaXplZFBheWxvYWQgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplRGF0ZSwgbm9ybWFsaXplS2Vsb21wb2ssIHNhZmVUZXh0LCB0b0Jvb2xMb29zZSwgdG9OdW1iZXIgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUGF5bG9hZChwYXlsb2FkOiBhbnkpOiBOb3JtYWxpemVkUGF5bG9hZCB7XG4gIGNvbnN0IGNvbXBhbnkgPSBzYWZlVGV4dChwYXlsb2FkPy5jb21wYW55KS50cmltKCkgfHwgXCJPcHRpdnV6IEJ1c2luZXNzXCI7XG4gIGNvbnN0IGxvZ28gPSBzYWZlVGV4dChwYXlsb2FkPy5sb2dvKS50cmltKCkgfHwgXCJcIjtcbiAgY29uc3QgYWRkcmVzcyA9IHNhZmVUZXh0KHBheWxvYWQ/LmFkZHJlc3MpLnRyaW0oKSB8fCBcIlwiO1xuICBjb25zdCBjb250YWN0ID0gc2FmZVRleHQocGF5bG9hZD8uY29udGFjdCkudHJpbSgpIHx8IFwiXCI7XG4gIGNvbnN0IHBlcmlvZEZyb20gPSBub3JtYWxpemVEYXRlKHBheWxvYWQ/LnBlcmlvZD8uZnJvbSk7XG4gIGNvbnN0IHBlcmlvZFRvID0gbm9ybWFsaXplRGF0ZShwYXlsb2FkPy5wZXJpb2Q/LnRvKTtcblxuICBjb25zdCByb3dzID0gQXJyYXkuaXNBcnJheShwYXlsb2FkPy5qb3VybmFscykgPyBwYXlsb2FkLmpvdXJuYWxzIDogW107XG5cbiAgY29uc3Qgam91cm5hbHM6IEpvdXJuYWxSb3dbXSA9IHJvd3MubWFwKChyOiBhbnkpID0+IHtcbiAgICBjb25zdCBkZWJpdCA9IHRvTnVtYmVyKHIuZGViaXQpO1xuICAgIGNvbnN0IGNyZWRpdCA9IHRvTnVtYmVyKHIuY3JlZGl0KTtcblxuICAgIHJldHVybiB7XG4gICAgICByb3dfaWQ6IHNhZmVUZXh0KHIucm93X2lkKSxcbiAgICAgIGpvdXJuYWxfaGVhZGVyX2lkOiBzYWZlVGV4dChyLmpvdXJuYWxfaGVhZGVyX2lkKSxcbiAgICAgIGFjY291bnRfaWQ6IHNhZmVUZXh0KHIuYWNjb3VudF9pZCksXG4gICAgICBhY2NvdW50X25hbWU6IHNhZmVUZXh0KHIuYWNjb3VudF9uYW1lKSxcbiAgICAgIGFjY291bnRfY2F0ZWdvcnk6IHNhZmVUZXh0KHIuYWNjb3VudF9jYXRlZ29yeSksXG4gICAgICBhY2NvdW50X3R5cGU6IHNhZmVUZXh0KHIuYWNjb3VudF90eXBlKSxcbiAgICAgIGtlbG9tcG9rX25lcmFjYTogbm9ybWFsaXplS2Vsb21wb2soci5rZWxvbXBva19uZXJhY2EpLFxuICAgICAgaXNfY2FzaF9hY2NvdW50OiB0b0Jvb2xMb29zZShyLmlzX2Nhc2hfYWNjb3VudCksXG4gICAgICBjYXNoZmxvd19hY3Rpdml0eTogc2FmZVRleHQoci5jYXNoZmxvd19hY3Rpdml0eSkudHJpbSgpIHx8IG51bGwsXG4gICAgICBkZWJpdCxcbiAgICAgIGNyZWRpdCxcbiAgICAgIGFtb3VudF9yYXc6IHRvTnVtYmVyKHIuYW1vdW50X3JhdyksXG4gICAgICBjdXJyZW5jeTogc2FmZVRleHQoci5jdXJyZW5jeSB8fCBcIklEUlwiKSxcbiAgICAgIGRlc2NyaXB0aW9uOiBzYWZlVGV4dChyLmRlc2NyaXB0aW9uKSxcbiAgICAgIHRyYW5zYWN0aW9uX2RhdGU6IG5vcm1hbGl6ZURhdGUoci50cmFuc2FjdGlvbl9kYXRlKSxcbiAgICAgIHN0YXR1czogc2FmZVRleHQoci5zdGF0dXMpLFxuICAgIH07XG4gIH0pO1xuXG4gIHJldHVybiB7IGNvbXBhbnksIGxvZ28sIGFkZHJlc3MsIGNvbnRhY3QsIHBlcmlvZEZyb20sIHBlcmlvZFRvLCBqb3VybmFscyB9O1xufVxuIl0sIm5hbWVzIjpbIm5vcm1hbGl6ZURhdGUiLCJub3JtYWxpemVLZWxvbXBvayIsInNhZmVUZXh0IiwidG9Cb29sTG9vc2UiLCJ0b051bWJlciIsIm5vcm1hbGl6ZVBheWxvYWQiLCJwYXlsb2FkIiwiY29tcGFueSIsInRyaW0iLCJsb2dvIiwiYWRkcmVzcyIsImNvbnRhY3QiLCJwZXJpb2RGcm9tIiwicGVyaW9kIiwiZnJvbSIsInBlcmlvZFRvIiwidG8iLCJyb3dzIiwiQXJyYXkiLCJpc0FycmF5Iiwiam91cm5hbHMiLCJtYXAiLCJyIiwiZGViaXQiLCJjcmVkaXQiLCJyb3dfaWQiLCJqb3VybmFsX2hlYWRlcl9pZCIsImFjY291bnRfaWQiLCJhY2NvdW50X25hbWUiLCJhY2NvdW50X2NhdGVnb3J5IiwiYWNjb3VudF90eXBlIiwia2Vsb21wb2tfbmVyYWNhIiwiaXNfY2FzaF9hY2NvdW50IiwiY2FzaGZsb3dfYWN0aXZpdHkiLCJhbW91bnRfcmF3IiwiY3VycmVuY3kiLCJkZXNjcmlwdGlvbiIsInRyYW5zYWN0aW9uX2RhdGUiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/report/normalize.ts\n");

/***/ }),

/***/ "(api)/./lib/report/periods.ts":
/*!*******************************!*\
  !*** ./lib/report/periods.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dayDiffInclusive: () => (/* binding */ dayDiffInclusive),\n/* harmony export */   derivePreviousPeriod: () => (/* binding */ derivePreviousPeriod)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n\nfunction derivePreviousPeriod(from, to) {\n    if (!from || !to) return null;\n    if (to < from) return null;\n    const prevTo = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.addDays)(from, -1);\n    const days = dayDiffInclusive(from, to);\n    const prevFrom = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.addDays)(prevTo, -(days - 1));\n    return {\n        from: prevFrom,\n        to: prevTo\n    };\n}\nfunction dayDiffInclusive(from, to) {\n    const [y1, m1, d1] = from.split(\"-\").map(Number);\n    const [y2, m2, d2] = to.split(\"-\").map(Number);\n    const a = Date.UTC(y1, (m1 || 1) - 1, d1 || 1);\n    const b = Date.UTC(y2, (m2 || 1) - 1, d2 || 1);\n    const diff = Math.floor((b - a) / (24 * 3600 * 1000));\n    return diff + 1;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVwb3J0L3BlcmlvZHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWtDO0FBSTNCLFNBQVNDLHFCQUFxQkMsSUFBbUIsRUFBRUMsRUFBaUI7SUFDekUsSUFBSSxDQUFDRCxRQUFRLENBQUNDLElBQUksT0FBTztJQUN6QixJQUFJQSxLQUFLRCxNQUFNLE9BQU87SUFFdEIsTUFBTUUsU0FBU0osK0NBQU9BLENBQUNFLE1BQU0sQ0FBQztJQUM5QixNQUFNRyxPQUFPQyxpQkFBaUJKLE1BQU1DO0lBQ3BDLE1BQU1JLFdBQVdQLCtDQUFPQSxDQUFDSSxRQUFRLENBQUVDLENBQUFBLE9BQU87SUFFMUMsT0FBTztRQUFFSCxNQUFNSztRQUFVSixJQUFJQztJQUFPO0FBQ3RDO0FBRU8sU0FBU0UsaUJBQWlCSixJQUFZLEVBQUVDLEVBQVU7SUFDdkQsTUFBTSxDQUFDSyxJQUFJQyxJQUFJQyxHQUFHLEdBQUdSLEtBQUtTLEtBQUssQ0FBQyxLQUFLQyxHQUFHLENBQUNDO0lBQ3pDLE1BQU0sQ0FBQ0MsSUFBSUMsSUFBSUMsR0FBRyxHQUFHYixHQUFHUSxLQUFLLENBQUMsS0FBS0MsR0FBRyxDQUFDQztJQUN2QyxNQUFNSSxJQUFJQyxLQUFLQyxHQUFHLENBQUNYLElBQUksQ0FBQ0MsTUFBTSxLQUFLLEdBQUdDLE1BQU07SUFDNUMsTUFBTVUsSUFBSUYsS0FBS0MsR0FBRyxDQUFDTCxJQUFJLENBQUNDLE1BQU0sS0FBSyxHQUFHQyxNQUFNO0lBQzVDLE1BQU1LLE9BQU9DLEtBQUtDLEtBQUssQ0FBQyxDQUFDSCxJQUFJSCxDQUFBQSxJQUFNLE1BQUssT0FBTyxJQUFHO0lBQ2xELE9BQU9JLE9BQU87QUFDaEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L3BlcmlvZHMudHM/NTNiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhZGREYXlzIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IHR5cGUgUGVyaW9kUmFuZ2UgPSB7IGZyb206IHN0cmluZyB8IG51bGw7IHRvOiBzdHJpbmcgfCBudWxsIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXJpdmVQcmV2aW91c1BlcmlvZChmcm9tOiBzdHJpbmcgfCBudWxsLCB0bzogc3RyaW5nIHwgbnVsbCk6IFBlcmlvZFJhbmdlIHwgbnVsbCB7XG4gIGlmICghZnJvbSB8fCAhdG8pIHJldHVybiBudWxsO1xuICBpZiAodG8gPCBmcm9tKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBwcmV2VG8gPSBhZGREYXlzKGZyb20sIC0xKTtcbiAgY29uc3QgZGF5cyA9IGRheURpZmZJbmNsdXNpdmUoZnJvbSwgdG8pO1xuICBjb25zdCBwcmV2RnJvbSA9IGFkZERheXMocHJldlRvLCAtKGRheXMgLSAxKSk7XG5cbiAgcmV0dXJuIHsgZnJvbTogcHJldkZyb20sIHRvOiBwcmV2VG8gfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRheURpZmZJbmNsdXNpdmUoZnJvbTogc3RyaW5nLCB0bzogc3RyaW5nKTogbnVtYmVyIHtcbiAgY29uc3QgW3kxLCBtMSwgZDFdID0gZnJvbS5zcGxpdChcIi1cIikubWFwKE51bWJlcik7XG4gIGNvbnN0IFt5MiwgbTIsIGQyXSA9IHRvLnNwbGl0KFwiLVwiKS5tYXAoTnVtYmVyKTtcbiAgY29uc3QgYSA9IERhdGUuVVRDKHkxLCAobTEgfHwgMSkgLSAxLCBkMSB8fCAxKTtcbiAgY29uc3QgYiA9IERhdGUuVVRDKHkyLCAobTIgfHwgMSkgLSAxLCBkMiB8fCAxKTtcbiAgY29uc3QgZGlmZiA9IE1hdGguZmxvb3IoKGIgLSBhKSAvICgyNCAqIDM2MDAgKiAxMDAwKSk7XG4gIHJldHVybiBkaWZmICsgMTtcbn1cbiJdLCJuYW1lcyI6WyJhZGREYXlzIiwiZGVyaXZlUHJldmlvdXNQZXJpb2QiLCJmcm9tIiwidG8iLCJwcmV2VG8iLCJkYXlzIiwiZGF5RGlmZkluY2x1c2l2ZSIsInByZXZGcm9tIiwieTEiLCJtMSIsImQxIiwic3BsaXQiLCJtYXAiLCJOdW1iZXIiLCJ5MiIsIm0yIiwiZDIiLCJhIiwiRGF0ZSIsIlVUQyIsImIiLCJkaWZmIiwiTWF0aCIsImZsb29yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/periods.ts\n");

/***/ }),

/***/ "(api)/./lib/report/profitLoss.ts":
/*!**********************************!*\
  !*** ./lib/report/profitLoss.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcProfitLoss: () => (/* binding */ calcProfitLoss)\n/* harmony export */ });\n/* harmony import */ var _accountingLogic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./accountingLogic */ \"(api)/./lib/report/accountingLogic.ts\");\n\nfunction calcProfitLoss(journals) {\n    const incomeGroup = {\n        type: \"income\",\n        total: 0,\n        categories: [],\n        trace: {\n            row_ids: [],\n            header_ids: []\n        }\n    };\n    const expenseGroup = {\n        type: \"expense\",\n        total: 0,\n        categories: [],\n        trace: {\n            row_ids: [],\n            header_ids: []\n        }\n    };\n    const categoryMap = new Map();\n    let income = 0;\n    let expense = 0;\n    for (const r of journals){\n        const t = String(r.account_type || \"\").toLowerCase();\n        if (t !== \"income\" && t !== \"expense\") continue;\n        const net = t === \"income\" ? r.credit - r.debit : r.debit - r.credit;\n        const catKey = r.account_category || \"(Uncategorized)\";\n        const mapKey = `${t}|${catKey}`;\n        if (!categoryMap.has(mapKey)) {\n            categoryMap.set(mapKey, {\n                type: t,\n                category: catKey,\n                amount: 0,\n                accounts: new Map(),\n                trace: {\n                    row_ids: [],\n                    header_ids: []\n                }\n            });\n        }\n        const cat = categoryMap.get(mapKey);\n        cat.amount += net;\n        cat.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_0__.mergeTraces)([\n            cat.trace,\n            (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_0__.traceFromRows)([\n                r\n            ])\n        ]);\n        const accKey = r.account_id || \"(unknown)\";\n        if (!cat.accounts.has(accKey)) {\n            cat.accounts.set(accKey, {\n                account: (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_0__.accountFromRow)(r),\n                amount: 0,\n                trace: {\n                    row_ids: [],\n                    header_ids: []\n                }\n            });\n        }\n        const acc = cat.accounts.get(accKey);\n        acc.amount += net;\n        acc.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_0__.mergeTraces)([\n            acc.trace,\n            (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_0__.traceFromRows)([\n                r\n            ])\n        ]);\n        if (t === \"income\") income += net;\n        if (t === \"expense\") expense += net;\n    }\n    const byType = {\n        income: [],\n        expense: []\n    };\n    for (const cat of categoryMap.values()){\n        byType[cat.type].push({\n            category: cat.category,\n            amount: cat.amount,\n            accounts: Array.from(cat.accounts.values()).sort((a, b)=>a.account.account_name.localeCompare(b.account.account_name)),\n            trace: cat.trace\n        });\n    }\n    for (const t of [\n        \"income\",\n        \"expense\"\n    ]){\n        const categories = byType[t].sort((a, b)=>a.category.localeCompare(b.category));\n        const group = t === \"income\" ? incomeGroup : expenseGroup;\n        group.categories = categories;\n        group.total = categories.reduce((s, x)=>s + x.amount, 0);\n        group.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_0__.mergeTraces)(categories.map((c)=>c.trace));\n    }\n    const netProfit = income - expense;\n    return {\n        raw_rows: journals,\n        grouped: {\n            income: incomeGroup,\n            expense: expenseGroup\n        },\n        totals: {\n            income,\n            expense,\n            net_profit: netProfit\n        },\n        validations: {\n            is_balanced: Math.abs(income - expense - netProfit) < 0.0001\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TyxDQUFDVSxZQUFZO1lBQ3RIdEMsT0FBT3dCLElBQUl4QixLQUFLO1FBQ2xCO0lBQ0Y7SUFFQSxLQUFLLE1BQU1TLEtBQUs7UUFBQztRQUFVO0tBQVUsQ0FBVztRQUM5QyxNQUFNVixhQUFhK0IsTUFBTSxDQUFDckIsRUFBRSxDQUFDMEIsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUVmLFFBQVEsQ0FBQ2tCLGFBQWEsQ0FBQ0YsRUFBRWhCLFFBQVE7UUFDL0UsTUFBTW1CLFFBQVEvQixNQUFNLFdBQVdiLGNBQWNPO1FBQzdDcUMsTUFBTXpDLFVBQVUsR0FBR0E7UUFDbkJ5QyxNQUFNMUMsS0FBSyxHQUFHQyxXQUFXMEMsTUFBTSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELElBQUlDLEVBQUVyQixNQUFNLEVBQUU7UUFDeERrQixNQUFNeEMsS0FBSyxHQUFHUiw2REFBV0EsQ0FBQ08sV0FBVzZDLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFN0MsS0FBSztJQUN6RDtJQUVBLE1BQU04QyxZQUFZeEMsU0FBU0M7SUFFM0IsT0FBTztRQUNMd0MsVUFBVXBEO1FBQ1ZxRCxTQUFTO1lBQUUxQyxRQUFRVjtZQUFhVyxTQUFTSjtRQUFhO1FBQ3REOEMsUUFBUTtZQUFFM0M7WUFBUUM7WUFBUzJDLFlBQVlKO1FBQVU7UUFDakRLLGFBQWE7WUFBRUMsYUFBYUMsS0FBS0MsR0FBRyxDQUFDLFNBQVUvQyxVQUFXdUMsYUFBYTtRQUFPO0lBQ2hGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L3Byb2ZpdExvc3MudHM/YWRhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEpvdXJuYWxSb3csIFBuTEdyb3VwLCBQcm9maXRMb3NzUmVwb3J0LCBQbkxDYXRlZ29yeUdyb3VwLCBQbkxSb3cgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgYWNjb3VudEZyb21Sb3csIG1lcmdlVHJhY2VzLCB0cmFjZUZyb21Sb3dzIH0gZnJvbSBcIi4vYWNjb3VudGluZ0xvZ2ljXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjUHJvZml0TG9zcyhqb3VybmFsczogSm91cm5hbFJvd1tdKTogUHJvZml0TG9zc1JlcG9ydCB7XG4gIGNvbnN0IGluY29tZUdyb3VwOiBQbkxHcm91cCA9IHsgdHlwZTogXCJpbmNvbWVcIiwgdG90YWw6IDAsIGNhdGVnb3JpZXM6IFtdLCB0cmFjZTogeyByb3dfaWRzOiBbXSwgaGVhZGVyX2lkczogW10gfSB9O1xuICBjb25zdCBleHBlbnNlR3JvdXA6IFBuTEdyb3VwID0geyB0eXBlOiBcImV4cGVuc2VcIiwgdG90YWw6IDAsIGNhdGVnb3JpZXM6IFtdLCB0cmFjZTogeyByb3dfaWRzOiBbXSwgaGVhZGVyX2lkczogW10gfSB9O1xuXG4gIGNvbnN0IGNhdGVnb3J5TWFwID0gbmV3IE1hcDxzdHJpbmcsIHsgdHlwZTogXCJpbmNvbWVcIiB8IFwiZXhwZW5zZVwiOyBjYXRlZ29yeTogc3RyaW5nOyBhbW91bnQ6IG51bWJlcjsgYWNjb3VudHM6IE1hcDxzdHJpbmcsIFBuTFJvdz47IHRyYWNlOiBSZXR1cm5UeXBlPHR5cGVvZiB0cmFjZUZyb21Sb3dzPiB9PigpO1xuXG4gIGxldCBpbmNvbWUgPSAwO1xuICBsZXQgZXhwZW5zZSA9IDA7XG5cbiAgZm9yIChjb25zdCByIG9mIGpvdXJuYWxzKSB7XG4gICAgY29uc3QgdCA9IFN0cmluZyhyLmFjY291bnRfdHlwZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0ICE9PSBcImluY29tZVwiICYmIHQgIT09IFwiZXhwZW5zZVwiKSBjb250aW51ZTtcblxuICAgIGNvbnN0IG5ldCA9IHQgPT09IFwiaW5jb21lXCIgPyAoci5jcmVkaXQgLSByLmRlYml0KSA6IChyLmRlYml0IC0gci5jcmVkaXQpO1xuICAgIGNvbnN0IGNhdEtleSA9IHIuYWNjb3VudF9jYXRlZ29yeSB8fCBcIihVbmNhdGVnb3JpemVkKVwiO1xuICAgIGNvbnN0IG1hcEtleSA9IGAke3R9fCR7Y2F0S2V5fWA7XG5cbiAgICBpZiAoIWNhdGVnb3J5TWFwLmhhcyhtYXBLZXkpKSB7XG4gICAgICBjYXRlZ29yeU1hcC5zZXQobWFwS2V5LCB7XG4gICAgICAgIHR5cGU6IHQsXG4gICAgICAgIGNhdGVnb3J5OiBjYXRLZXksXG4gICAgICAgIGFtb3VudDogMCxcbiAgICAgICAgYWNjb3VudHM6IG5ldyBNYXAoKSxcbiAgICAgICAgdHJhY2U6IHsgcm93X2lkczogW10sIGhlYWRlcl9pZHM6IFtdIH0sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjYXQgPSBjYXRlZ29yeU1hcC5nZXQobWFwS2V5KSE7XG4gICAgY2F0LmFtb3VudCArPSBuZXQ7XG4gICAgY2F0LnRyYWNlID0gbWVyZ2VUcmFjZXMoW2NhdC50cmFjZSwgdHJhY2VGcm9tUm93cyhbcl0pXSk7XG5cbiAgICBjb25zdCBhY2NLZXkgPSByLmFjY291bnRfaWQgfHwgXCIodW5rbm93bilcIjtcbiAgICBpZiAoIWNhdC5hY2NvdW50cy5oYXMoYWNjS2V5KSkge1xuICAgICAgY2F0LmFjY291bnRzLnNldChhY2NLZXksIHtcbiAgICAgICAgYWNjb3VudDogYWNjb3VudEZyb21Sb3cociksXG4gICAgICAgIGFtb3VudDogMCxcbiAgICAgICAgdHJhY2U6IHsgcm93X2lkczogW10sIGhlYWRlcl9pZHM6IFtdIH0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgYWNjID0gY2F0LmFjY291bnRzLmdldChhY2NLZXkpITtcbiAgICBhY2MuYW1vdW50ICs9IG5ldDtcbiAgICBhY2MudHJhY2UgPSBtZXJnZVRyYWNlcyhbYWNjLnRyYWNlLCB0cmFjZUZyb21Sb3dzKFtyXSldKTtcblxuICAgIGlmICh0ID09PSBcImluY29tZVwiKSBpbmNvbWUgKz0gbmV0O1xuICAgIGlmICh0ID09PSBcImV4cGVuc2VcIikgZXhwZW5zZSArPSBuZXQ7XG4gIH1cblxuICBjb25zdCBieVR5cGU6IFJlY29yZDxcImluY29tZVwiIHwgXCJleHBlbnNlXCIsIFBuTENhdGVnb3J5R3JvdXBbXT4gPSB7IGluY29tZTogW10sIGV4cGVuc2U6IFtdIH07XG4gIGZvciAoY29uc3QgY2F0IG9mIGNhdGVnb3J5TWFwLnZhbHVlcygpKSB7XG4gICAgYnlUeXBlW2NhdC50eXBlXS5wdXNoKHtcbiAgICAgIGNhdGVnb3J5OiBjYXQuY2F0ZWdvcnksXG4gICAgICBhbW91bnQ6IGNhdC5hbW91bnQsXG4gICAgICBhY2NvdW50czogQXJyYXkuZnJvbShjYXQuYWNjb3VudHMudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IGEuYWNjb3VudC5hY2NvdW50X25hbWUubG9jYWxlQ29tcGFyZShiLmFjY291bnQuYWNjb3VudF9uYW1lKSksXG4gICAgICB0cmFjZTogY2F0LnRyYWNlLFxuICAgIH0pO1xuICB9XG5cbiAgZm9yIChjb25zdCB0IG9mIFtcImluY29tZVwiLCBcImV4cGVuc2VcIl0gYXMgY29uc3QpIHtcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gYnlUeXBlW3RdLnNvcnQoKGEsIGIpID0+IGEuY2F0ZWdvcnkubG9jYWxlQ29tcGFyZShiLmNhdGVnb3J5KSk7XG4gICAgY29uc3QgZ3JvdXAgPSB0ID09PSBcImluY29tZVwiID8gaW5jb21lR3JvdXAgOiBleHBlbnNlR3JvdXA7XG4gICAgZ3JvdXAuY2F0ZWdvcmllcyA9IGNhdGVnb3JpZXM7XG4gICAgZ3JvdXAudG90YWwgPSBjYXRlZ29yaWVzLnJlZHVjZSgocywgeCkgPT4gcyArIHguYW1vdW50LCAwKTtcbiAgICBncm91cC50cmFjZSA9IG1lcmdlVHJhY2VzKGNhdGVnb3JpZXMubWFwKChjKSA9PiBjLnRyYWNlKSk7XG4gIH1cblxuICBjb25zdCBuZXRQcm9maXQgPSBpbmNvbWUgLSBleHBlbnNlO1xuXG4gIHJldHVybiB7XG4gICAgcmF3X3Jvd3M6IGpvdXJuYWxzLFxuICAgIGdyb3VwZWQ6IHsgaW5jb21lOiBpbmNvbWVHcm91cCwgZXhwZW5zZTogZXhwZW5zZUdyb3VwIH0sXG4gICAgdG90YWxzOiB7IGluY29tZSwgZXhwZW5zZSwgbmV0X3Byb2ZpdDogbmV0UHJvZml0IH0sXG4gICAgdmFsaWRhdGlvbnM6IHsgaXNfYmFsYW5jZWQ6IE1hdGguYWJzKChpbmNvbWUgLSBleHBlbnNlKSAtIG5ldFByb2ZpdCkgPCAwLjAwMDEgfSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJhY2NvdW50RnJvbVJvdyIsIm1lcmdlVHJhY2VzIiwidHJhY2VGcm9tUm93cyIsImNhbGNQcm9maXRMb3NzIiwiam91cm5hbHMiLCJpbmNvbWVHcm91cCIsInR5cGUiLCJ0b3RhbCIsImNhdGVnb3JpZXMiLCJ0cmFjZSIsInJvd19pZHMiLCJoZWFkZXJfaWRzIiwiZXhwZW5zZUdyb3VwIiwiY2F0ZWdvcnlNYXAiLCJNYXAiLCJpbmNvbWUiLCJleHBlbnNlIiwiciIsInQiLCJTdHJpbmciLCJhY2NvdW50X3R5cGUiLCJ0b0xvd2VyQ2FzZSIsIm5ldCIsImNyZWRpdCIsImRlYml0IiwiY2F0S2V5IiwiYWNjb3VudF9jYXRlZ29yeSIsIm1hcEtleSIsImhhcyIsInNldCIsImNhdGVnb3J5IiwiYW1vdW50IiwiYWNjb3VudHMiLCJjYXQiLCJnZXQiLCJhY2NLZXkiLCJhY2NvdW50X2lkIiwiYWNjb3VudCIsImFjYyIsImJ5VHlwZSIsInZhbHVlcyIsInB1c2giLCJBcnJheSIsImZyb20iLCJzb3J0IiwiYSIsImIiLCJhY2NvdW50X25hbWUiLCJsb2NhbGVDb21wYXJlIiwiZ3JvdXAiLCJyZWR1Y2UiLCJzIiwieCIsIm1hcCIsImMiLCJuZXRQcm9maXQiLCJyYXdfcm93cyIsImdyb3VwZWQiLCJ0b3RhbHMiLCJuZXRfcHJvZml0IiwidmFsaWRhdGlvbnMiLCJpc19iYWxhbmNlZCIsIk1hdGgiLCJhYnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/report/profitLoss.ts\n");

/***/ }),

/***/ "(api)/./lib/report/trialBalance.ts":
/*!************************************!*\
  !*** ./lib/report/trialBalance.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcTrialBalance: () => (/* binding */ calcTrialBalance)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/report/utils.ts\");\n/* harmony import */ var _accounting__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accounting */ \"(api)/./lib/report/accounting.ts\");\n/* harmony import */ var _accountingLogic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./accountingLogic */ \"(api)/./lib/report/accountingLogic.ts\");\n/* harmony import */ var _validations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validations */ \"(api)/./lib/report/validations.ts\");\n\n\n\n\nfunction calcTrialBalance(journals, periodFrom, periodTo) {\n    const current = (0,_accounting__WEBPACK_IMPORTED_MODULE_1__.filterByPeriod)(journals, periodFrom, periodTo);\n    const openingRows = periodFrom ? (0,_accounting__WEBPACK_IMPORTED_MODULE_1__.filterAsOf)(journals, (0,_utils__WEBPACK_IMPORTED_MODULE_0__.addDays)(periodFrom, -1)) : [];\n    const map = new Map();\n    for (const r of journals){\n        const key = r.account_id || \"(unknown)\";\n        if (!map.has(key)) {\n            map.set(key, {\n                account: (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.accountFromRow)(r),\n                opening_balance: 0,\n                debit: 0,\n                credit: 0,\n                closing_balance: 0,\n                closing_debit: 0,\n                closing_credit: 0,\n                journal_lines: 0,\n                trace: {\n                    row_ids: [],\n                    header_ids: []\n                }\n            });\n        }\n    }\n    const openingByAccount = indexRows(openingRows);\n    for (const [key, rows] of openingByAccount.entries()){\n        const acc = map.get(key);\n        if (!acc) continue;\n        acc.opening_balance = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.balanceFromRows)(rows, acc.account.account_type);\n    }\n    const currentByAccount = indexRows(current);\n    for (const [key, rows] of currentByAccount.entries()){\n        const acc = map.get(key);\n        if (!acc) continue;\n        for (const r of rows){\n            acc.debit += r.debit;\n            acc.credit += r.credit;\n            acc.journal_lines += 1;\n        }\n        const normal = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.normalSideForType)(acc.account.account_type);\n        const movement = normal === \"debit\" ? acc.debit - acc.credit : acc.credit - acc.debit;\n        acc.closing_balance = acc.opening_balance + movement;\n        const closingSplit = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.splitDebitCredit)(acc.closing_balance, normal);\n        acc.closing_debit = closingSplit.debit;\n        acc.closing_credit = closingSplit.credit;\n        acc.trace = (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.mergeTraces)([\n            acc.trace,\n            (0,_accountingLogic__WEBPACK_IMPORTED_MODULE_2__.traceFromRows)(rows)\n        ]);\n    }\n    const rows = Array.from(map.values()).sort((a, b)=>a.account.account_name.localeCompare(b.account.account_name));\n    const totals = rows.reduce((s, r)=>{\n        s.opening_balance += r.opening_balance;\n        s.debit += r.debit;\n        s.credit += r.credit;\n        s.closing_balance += r.closing_balance;\n        s.closing_debit += r.closing_debit;\n        s.closing_credit += r.closing_credit;\n        return s;\n    }, {\n        opening_balance: 0,\n        debit: 0,\n        credit: 0,\n        closing_balance: 0,\n        closing_debit: 0,\n        closing_credit: 0\n    });\n    const balanced = (0,_validations__WEBPACK_IMPORTED_MODULE_3__.isBalanced)(totals.closing_debit, totals.closing_credit);\n    return {\n        raw_rows: current,\n        grouped: {\n            rows\n        },\n        totals,\n        validations: {\n            is_balanced: balanced\n        }\n    };\n}\nfunction indexRows(rows) {\n    const map = new Map();\n    for (const r of rows){\n        const key = r.account_id || \"(unknown)\";\n        if (!map.has(key)) map.set(key, []);\n        map.get(key).push(r);\n    }\n    return map;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVRLE1BQU07UUFDcEI2QixFQUFFNUIsZUFBZSxJQUFJVCxFQUFFUyxlQUFlO1FBQ3RDNEIsRUFBRTNCLGFBQWEsSUFBSVYsRUFBRVUsYUFBYTtRQUNsQzJCLEVBQUUxQixjQUFjLElBQUlYLEVBQUVXLGNBQWM7UUFDcEMsT0FBTzBCO0lBQ1QsR0FDQTtRQUFFL0IsaUJBQWlCO1FBQUdDLE9BQU87UUFBR0MsUUFBUTtRQUFHQyxpQkFBaUI7UUFBR0MsZUFBZTtRQUFHQyxnQkFBZ0I7SUFBRTtJQUdyRyxNQUFNMkIsV0FBVy9DLHdEQUFVQSxDQUFDNEMsT0FBT3pCLGFBQWEsRUFBRXlCLE9BQU94QixjQUFjO0lBRXZFLE9BQU87UUFBRTRCLFVBQVUzQztRQUFTNEMsU0FBUztZQUFFdEI7UUFBSztRQUFHaUI7UUFBUU0sYUFBYTtZQUFFQyxhQUFhSjtRQUFTO0lBQUU7QUFDaEc7QUFFQSxTQUFTckIsVUFBVUMsSUFBa0I7SUFDbkMsTUFBTXBCLE1BQU0sSUFBSUM7SUFDaEIsS0FBSyxNQUFNQyxLQUFLa0IsS0FBTTtRQUNwQixNQUFNakIsTUFBTUQsRUFBRUUsVUFBVSxJQUFJO1FBQzVCLElBQUksQ0FBQ0osSUFBSUssR0FBRyxDQUFDRixNQUFNSCxJQUFJTSxHQUFHLENBQUNILEtBQUssRUFBRTtRQUNsQ0gsSUFBSXVCLEdBQUcsQ0FBQ3BCLEtBQU0wQyxJQUFJLENBQUMzQztJQUNyQjtJQUNBLE9BQU9GO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L3RyaWFsQmFsYW5jZS50cz81OWJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSm91cm5hbFJvdywgVHJpYWxCYWxhbmNlUmVwb3J0LCBUcmlhbEJhbGFuY2VSb3cgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgYWRkRGF5cyB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBmaWx0ZXJBc09mLCBmaWx0ZXJCeVBlcmlvZCB9IGZyb20gXCIuL2FjY291bnRpbmdcIjtcbmltcG9ydCB7IGFjY291bnRGcm9tUm93LCBiYWxhbmNlRnJvbVJvd3MsIG5vcm1hbFNpZGVGb3JUeXBlLCBzcGxpdERlYml0Q3JlZGl0LCB0cmFjZUZyb21Sb3dzLCBtZXJnZVRyYWNlcyB9IGZyb20gXCIuL2FjY291bnRpbmdMb2dpY1wiO1xuaW1wb3J0IHsgaXNCYWxhbmNlZCB9IGZyb20gXCIuL3ZhbGlkYXRpb25zXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjVHJpYWxCYWxhbmNlKGpvdXJuYWxzOiBKb3VybmFsUm93W10sIHBlcmlvZEZyb206IHN0cmluZyB8IG51bGwsIHBlcmlvZFRvOiBzdHJpbmcgfCBudWxsKTogVHJpYWxCYWxhbmNlUmVwb3J0IHtcbiAgY29uc3QgY3VycmVudCA9IGZpbHRlckJ5UGVyaW9kKGpvdXJuYWxzLCBwZXJpb2RGcm9tLCBwZXJpb2RUbyk7XG4gIGNvbnN0IG9wZW5pbmdSb3dzID0gcGVyaW9kRnJvbSA/IGZpbHRlckFzT2Yoam91cm5hbHMsIGFkZERheXMocGVyaW9kRnJvbSwgLTEpKSA6IFtdO1xuXG4gIGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBUcmlhbEJhbGFuY2VSb3c+KCk7XG5cbiAgZm9yIChjb25zdCByIG9mIGpvdXJuYWxzKSB7XG4gICAgY29uc3Qga2V5ID0gci5hY2NvdW50X2lkIHx8IFwiKHVua25vd24pXCI7XG4gICAgaWYgKCFtYXAuaGFzKGtleSkpIHtcbiAgICAgIG1hcC5zZXQoa2V5LCB7XG4gICAgICAgIGFjY291bnQ6IGFjY291bnRGcm9tUm93KHIpLFxuICAgICAgICBvcGVuaW5nX2JhbGFuY2U6IDAsXG4gICAgICAgIGRlYml0OiAwLFxuICAgICAgICBjcmVkaXQ6IDAsXG4gICAgICAgIGNsb3NpbmdfYmFsYW5jZTogMCxcbiAgICAgICAgY2xvc2luZ19kZWJpdDogMCxcbiAgICAgICAgY2xvc2luZ19jcmVkaXQ6IDAsXG4gICAgICAgIGpvdXJuYWxfbGluZXM6IDAsXG4gICAgICAgIHRyYWNlOiB7IHJvd19pZHM6IFtdLCBoZWFkZXJfaWRzOiBbXSB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgb3BlbmluZ0J5QWNjb3VudCA9IGluZGV4Um93cyhvcGVuaW5nUm93cyk7XG4gIGZvciAoY29uc3QgW2tleSwgcm93c10gb2Ygb3BlbmluZ0J5QWNjb3VudC5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCBhY2MgPSBtYXAuZ2V0KGtleSk7XG4gICAgaWYgKCFhY2MpIGNvbnRpbnVlO1xuICAgIGFjYy5vcGVuaW5nX2JhbGFuY2UgPSBiYWxhbmNlRnJvbVJvd3Mocm93cywgYWNjLmFjY291bnQuYWNjb3VudF90eXBlKTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRCeUFjY291bnQgPSBpbmRleFJvd3MoY3VycmVudCk7XG4gIGZvciAoY29uc3QgW2tleSwgcm93c10gb2YgY3VycmVudEJ5QWNjb3VudC5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCBhY2MgPSBtYXAuZ2V0KGtleSk7XG4gICAgaWYgKCFhY2MpIGNvbnRpbnVlO1xuICAgIGZvciAoY29uc3QgciBvZiByb3dzKSB7XG4gICAgICBhY2MuZGViaXQgKz0gci5kZWJpdDtcbiAgICAgIGFjYy5jcmVkaXQgKz0gci5jcmVkaXQ7XG4gICAgICBhY2Muam91cm5hbF9saW5lcyArPSAxO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWwgPSBub3JtYWxTaWRlRm9yVHlwZShhY2MuYWNjb3VudC5hY2NvdW50X3R5cGUpO1xuICAgIGNvbnN0IG1vdmVtZW50ID0gbm9ybWFsID09PSBcImRlYml0XCIgPyAoYWNjLmRlYml0IC0gYWNjLmNyZWRpdCkgOiAoYWNjLmNyZWRpdCAtIGFjYy5kZWJpdCk7XG4gICAgYWNjLmNsb3NpbmdfYmFsYW5jZSA9IGFjYy5vcGVuaW5nX2JhbGFuY2UgKyBtb3ZlbWVudDtcbiAgICBjb25zdCBjbG9zaW5nU3BsaXQgPSBzcGxpdERlYml0Q3JlZGl0KGFjYy5jbG9zaW5nX2JhbGFuY2UsIG5vcm1hbCk7XG4gICAgYWNjLmNsb3NpbmdfZGViaXQgPSBjbG9zaW5nU3BsaXQuZGViaXQ7XG4gICAgYWNjLmNsb3NpbmdfY3JlZGl0ID0gY2xvc2luZ1NwbGl0LmNyZWRpdDtcbiAgICBhY2MudHJhY2UgPSBtZXJnZVRyYWNlcyhbYWNjLnRyYWNlLCB0cmFjZUZyb21Sb3dzKHJvd3MpXSk7XG4gIH1cblxuICBjb25zdCByb3dzID0gQXJyYXkuZnJvbShtYXAudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IGEuYWNjb3VudC5hY2NvdW50X25hbWUubG9jYWxlQ29tcGFyZShiLmFjY291bnQuYWNjb3VudF9uYW1lKSk7XG4gIGNvbnN0IHRvdGFscyA9IHJvd3MucmVkdWNlKFxuICAgIChzLCByKSA9PiB7XG4gICAgICBzLm9wZW5pbmdfYmFsYW5jZSArPSByLm9wZW5pbmdfYmFsYW5jZTtcbiAgICAgIHMuZGViaXQgKz0gci5kZWJpdDtcbiAgICAgIHMuY3JlZGl0ICs9IHIuY3JlZGl0O1xuICAgICAgcy5jbG9zaW5nX2JhbGFuY2UgKz0gci5jbG9zaW5nX2JhbGFuY2U7XG4gICAgICBzLmNsb3NpbmdfZGViaXQgKz0gci5jbG9zaW5nX2RlYml0O1xuICAgICAgcy5jbG9zaW5nX2NyZWRpdCArPSByLmNsb3NpbmdfY3JlZGl0O1xuICAgICAgcmV0dXJuIHM7XG4gICAgfSxcbiAgICB7IG9wZW5pbmdfYmFsYW5jZTogMCwgZGViaXQ6IDAsIGNyZWRpdDogMCwgY2xvc2luZ19iYWxhbmNlOiAwLCBjbG9zaW5nX2RlYml0OiAwLCBjbG9zaW5nX2NyZWRpdDogMCB9XG4gICk7XG5cbiAgY29uc3QgYmFsYW5jZWQgPSBpc0JhbGFuY2VkKHRvdGFscy5jbG9zaW5nX2RlYml0LCB0b3RhbHMuY2xvc2luZ19jcmVkaXQpO1xuXG4gIHJldHVybiB7IHJhd19yb3dzOiBjdXJyZW50LCBncm91cGVkOiB7IHJvd3MgfSwgdG90YWxzLCB2YWxpZGF0aW9uczogeyBpc19iYWxhbmNlZDogYmFsYW5jZWQgfSB9O1xufVxuXG5mdW5jdGlvbiBpbmRleFJvd3Mocm93czogSm91cm5hbFJvd1tdKTogTWFwPHN0cmluZywgSm91cm5hbFJvd1tdPiB7XG4gIGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBKb3VybmFsUm93W10+KCk7XG4gIGZvciAoY29uc3QgciBvZiByb3dzKSB7XG4gICAgY29uc3Qga2V5ID0gci5hY2NvdW50X2lkIHx8IFwiKHVua25vd24pXCI7XG4gICAgaWYgKCFtYXAuaGFzKGtleSkpIG1hcC5zZXQoa2V5LCBbXSk7XG4gICAgbWFwLmdldChrZXkpIS5wdXNoKHIpO1xuICB9XG4gIHJldHVybiBtYXA7XG59XG4iXSwibmFtZXMiOlsiYWRkRGF5cyIsImZpbHRlckFzT2YiLCJmaWx0ZXJCeVBlcmlvZCIsImFjY291bnRGcm9tUm93IiwiYmFsYW5jZUZyb21Sb3dzIiwibm9ybWFsU2lkZUZvclR5cGUiLCJzcGxpdERlYml0Q3JlZGl0IiwidHJhY2VGcm9tUm93cyIsIm1lcmdlVHJhY2VzIiwiaXNCYWxhbmNlZCIsImNhbGNUcmlhbEJhbGFuY2UiLCJqb3VybmFscyIsInBlcmlvZEZyb20iLCJwZXJpb2RUbyIsImN1cnJlbnQiLCJvcGVuaW5nUm93cyIsIm1hcCIsIk1hcCIsInIiLCJrZXkiLCJhY2NvdW50X2lkIiwiaGFzIiwic2V0IiwiYWNjb3VudCIsIm9wZW5pbmdfYmFsYW5jZSIsImRlYml0IiwiY3JlZGl0IiwiY2xvc2luZ19iYWxhbmNlIiwiY2xvc2luZ19kZWJpdCIsImNsb3NpbmdfY3JlZGl0Iiwiam91cm5hbF9saW5lcyIsInRyYWNlIiwicm93X2lkcyIsImhlYWRlcl9pZHMiLCJvcGVuaW5nQnlBY2NvdW50IiwiaW5kZXhSb3dzIiwicm93cyIsImVudHJpZXMiLCJhY2MiLCJnZXQiLCJhY2NvdW50X3R5cGUiLCJjdXJyZW50QnlBY2NvdW50Iiwibm9ybWFsIiwibW92ZW1lbnQiLCJjbG9zaW5nU3BsaXQiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJzb3J0IiwiYSIsImIiLCJhY2NvdW50X25hbWUiLCJsb2NhbGVDb21wYXJlIiwidG90YWxzIiwicmVkdWNlIiwicyIsImJhbGFuY2VkIiwicmF3X3Jvd3MiLCJncm91cGVkIiwidmFsaWRhdGlvbnMiLCJpc19iYWxhbmNlZCIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/report/trialBalance.ts\n");

/***/ }),

/***/ "(api)/./lib/report/utils.ts":
/*!*****************************!*\
  !*** ./lib/report/utils.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addDays: () => (/* binding */ addDays),\n/* harmony export */   asOf: () => (/* binding */ asOf),\n/* harmony export */   compareDate: () => (/* binding */ compareDate),\n/* harmony export */   formatIDR: () => (/* binding */ formatIDR),\n/* harmony export */   inRange: () => (/* binding */ inRange),\n/* harmony export */   normalizeDate: () => (/* binding */ normalizeDate),\n/* harmony export */   normalizeKelompok: () => (/* binding */ normalizeKelompok),\n/* harmony export */   safeText: () => (/* binding */ safeText),\n/* harmony export */   sum: () => (/* binding */ sum),\n/* harmony export */   toBoolLoose: () => (/* binding */ toBoolLoose),\n/* harmony export */   toNumber: () => (/* binding */ toNumber),\n/* harmony export */   variancePct: () => (/* binding */ variancePct)\n/* harmony export */ });\nfunction toNumber(v) {\n    if (v === null || v === undefined || v === \"\") return 0;\n    const n = Number(v);\n    return Number.isFinite(n) ? n : 0;\n}\nfunction toBoolLoose(v) {\n    if (v === true) return true;\n    if (v === false) return false;\n    if (typeof v === \"string\") return v.trim().toLowerCase() === \"true\";\n    return Boolean(v);\n}\nfunction normalizeKelompok(v) {\n    const s = (v ?? \"\").toString().trim();\n    return s ? s : null;\n}\nfunction normalizeDate(s) {\n    if (!s) return null;\n    const str = String(s).trim();\n    if (str.length >= 10 && /\\d{4}-\\d{2}-\\d{2}/.test(str.slice(0, 10))) return str.slice(0, 10);\n    const t = Date.parse(str);\n    if (!Number.isNaN(t)) {\n        const d = new Date(t);\n        const yyyy = d.getUTCFullYear();\n        const mm = String(d.getUTCMonth() + 1).padStart(2, \"0\");\n        const dd = String(d.getUTCDate()).padStart(2, \"0\");\n        return `${yyyy}-${mm}-${dd}`;\n    }\n    return null;\n}\nfunction formatIDR(n) {\n    const x = Math.round(n || 0);\n    return x.toLocaleString(\"id-ID\");\n}\nfunction compareDate(a, b) {\n    const da = a || \"\";\n    const db = b || \"\";\n    if (da === db) return 0;\n    return da.localeCompare(db);\n}\nfunction addDays(date, days) {\n    const [y, m, d] = date.split(\"-\").map(Number);\n    const dt = new Date(Date.UTC(y, (m || 1) - 1, d || 1));\n    dt.setUTCDate(dt.getUTCDate() + days);\n    const yyyy = dt.getUTCFullYear();\n    const mm = String(dt.getUTCMonth() + 1).padStart(2, \"0\");\n    const dd = String(dt.getUTCDate()).padStart(2, \"0\");\n    return `${yyyy}-${mm}-${dd}`;\n}\nfunction inRange(date, from, to) {\n    if (!date) return false;\n    if (from && date < from) return false;\n    if (to && date > to) return false;\n    return true;\n}\nfunction asOf(date, cutoff) {\n    if (!date || !cutoff) return false;\n    return date <= cutoff;\n}\nfunction safeText(v) {\n    return String(v ?? \"\");\n}\nfunction sum(arr) {\n    return arr.reduce((s, x)=>s + (x || 0), 0);\n}\nfunction variancePct(current, previous) {\n    if (!previous) return null;\n    return (current - previous) / Math.abs(previous);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVFWLE9BQU9VLE1BQU0sT0FBTztJQUNoQyxJQUFJQyxNQUFNWCxPQUFPVyxJQUFJLE9BQU87SUFDNUIsT0FBTztBQUNUO0FBRU8sU0FBU0MsS0FBS1osSUFBbUIsRUFBRWEsTUFBcUI7SUFDN0QsSUFBSSxDQUFDYixRQUFRLENBQUNhLFFBQVEsT0FBTztJQUM3QixPQUFPYixRQUFRYTtBQUNqQjtBQUVPLFNBQVNDLFNBQVN4RCxDQUFVO0lBQ2pDLE9BQU9jLE9BQU9kLEtBQUs7QUFDckI7QUFFTyxTQUFTeUQsSUFBSUMsR0FBYTtJQUMvQixPQUFPQSxJQUFJQyxNQUFNLENBQUMsQ0FBQ2pELEdBQUdxQixJQUFNckIsSUFBS3FCLENBQUFBLEtBQUssSUFBSTtBQUM1QztBQUVPLFNBQVM2QixZQUFZQyxPQUFlLEVBQUVDLFFBQWdCO0lBQzNELElBQUksQ0FBQ0EsVUFBVSxPQUFPO0lBQ3RCLE9BQU8sQ0FBQ0QsVUFBVUMsUUFBTyxJQUFLOUIsS0FBSytCLEdBQUcsQ0FBQ0Q7QUFDekMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L3V0aWxzLnRzPzhhYWMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHRvTnVtYmVyKHY6IHVua25vd24pOiBudW1iZXIge1xuICBpZiAodiA9PT0gbnVsbCB8fCB2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gXCJcIikgcmV0dXJuIDA7XG4gIGNvbnN0IG4gPSBOdW1iZXIodik7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobikgPyBuIDogMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvQm9vbExvb3NlKHY6IHVua25vd24pOiBib29sZWFuIHtcbiAgaWYgKHYgPT09IHRydWUpIHJldHVybiB0cnVlO1xuICBpZiAodiA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSByZXR1cm4gdi50cmltKCkudG9Mb3dlckNhc2UoKSA9PT0gXCJ0cnVlXCI7XG4gIHJldHVybiBCb29sZWFuKHYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplS2Vsb21wb2sodjogdW5rbm93bik6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCBzID0gKHYgPz8gXCJcIikudG9TdHJpbmcoKS50cmltKCk7XG4gIHJldHVybiBzID8gcyA6IG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVEYXRlKHM6IHVua25vd24pOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKCFzKSByZXR1cm4gbnVsbDtcbiAgY29uc3Qgc3RyID0gU3RyaW5nKHMpLnRyaW0oKTtcbiAgaWYgKHN0ci5sZW5ndGggPj0gMTAgJiYgL1xcZHs0fS1cXGR7Mn0tXFxkezJ9Ly50ZXN0KHN0ci5zbGljZSgwLCAxMCkpKSByZXR1cm4gc3RyLnNsaWNlKDAsIDEwKTtcbiAgY29uc3QgdCA9IERhdGUucGFyc2Uoc3RyKTtcbiAgaWYgKCFOdW1iZXIuaXNOYU4odCkpIHtcbiAgICBjb25zdCBkID0gbmV3IERhdGUodCk7XG4gICAgY29uc3QgeXl5eSA9IGQuZ2V0VVRDRnVsbFllYXIoKTtcbiAgICBjb25zdCBtbSA9IFN0cmluZyhkLmdldFVUQ01vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCBcIjBcIik7XG4gICAgY29uc3QgZGQgPSBTdHJpbmcoZC5nZXRVVENEYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICByZXR1cm4gYCR7eXl5eX0tJHttbX0tJHtkZH1gO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0SURSKG46IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHggPSBNYXRoLnJvdW5kKG4gfHwgMCk7XG4gIHJldHVybiB4LnRvTG9jYWxlU3RyaW5nKFwiaWQtSURcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlRGF0ZShhOiBzdHJpbmcgfCBudWxsLCBiOiBzdHJpbmcgfCBudWxsKTogbnVtYmVyIHtcbiAgY29uc3QgZGEgPSBhIHx8IFwiXCI7XG4gIGNvbnN0IGRiID0gYiB8fCBcIlwiO1xuICBpZiAoZGEgPT09IGRiKSByZXR1cm4gMDtcbiAgcmV0dXJuIGRhLmxvY2FsZUNvbXBhcmUoZGIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRGF5cyhkYXRlOiBzdHJpbmcsIGRheXM6IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IFt5LCBtLCBkXSA9IGRhdGUuc3BsaXQoXCItXCIpLm1hcChOdW1iZXIpO1xuICBjb25zdCBkdCA9IG5ldyBEYXRlKERhdGUuVVRDKHksIChtIHx8IDEpIC0gMSwgZCB8fCAxKSk7XG4gIGR0LnNldFVUQ0RhdGUoZHQuZ2V0VVRDRGF0ZSgpICsgZGF5cyk7XG4gIGNvbnN0IHl5eXkgPSBkdC5nZXRVVENGdWxsWWVhcigpO1xuICBjb25zdCBtbSA9IFN0cmluZyhkdC5nZXRVVENNb250aCgpICsgMSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICBjb25zdCBkZCA9IFN0cmluZyhkdC5nZXRVVENEYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgcmV0dXJuIGAke3l5eXl9LSR7bW19LSR7ZGR9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluUmFuZ2UoZGF0ZTogc3RyaW5nIHwgbnVsbCwgZnJvbTogc3RyaW5nIHwgbnVsbCwgdG86IHN0cmluZyB8IG51bGwpOiBib29sZWFuIHtcbiAgaWYgKCFkYXRlKSByZXR1cm4gZmFsc2U7XG4gIGlmIChmcm9tICYmIGRhdGUgPCBmcm9tKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0byAmJiBkYXRlID4gdG8pIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc09mKGRhdGU6IHN0cmluZyB8IG51bGwsIGN1dG9mZjogc3RyaW5nIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIWRhdGUgfHwgIWN1dG9mZikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gZGF0ZSA8PSBjdXRvZmY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYWZlVGV4dCh2OiB1bmtub3duKTogc3RyaW5nIHtcbiAgcmV0dXJuIFN0cmluZyh2ID8/IFwiXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3VtKGFycjogbnVtYmVyW10pOiBudW1iZXIge1xuICByZXR1cm4gYXJyLnJlZHVjZSgocywgeCkgPT4gcyArICh4IHx8IDApLCAwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhcmlhbmNlUGN0KGN1cnJlbnQ6IG51bWJlciwgcHJldmlvdXM6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xuICBpZiAoIXByZXZpb3VzKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIChjdXJyZW50IC0gcHJldmlvdXMpIC8gTWF0aC5hYnMocHJldmlvdXMpO1xufVxuIl0sIm5hbWVzIjpbInRvTnVtYmVyIiwidiIsInVuZGVmaW5lZCIsIm4iLCJOdW1iZXIiLCJpc0Zpbml0ZSIsInRvQm9vbExvb3NlIiwidHJpbSIsInRvTG93ZXJDYXNlIiwiQm9vbGVhbiIsIm5vcm1hbGl6ZUtlbG9tcG9rIiwicyIsInRvU3RyaW5nIiwibm9ybWFsaXplRGF0ZSIsInN0ciIsIlN0cmluZyIsImxlbmd0aCIsInRlc3QiLCJzbGljZSIsInQiLCJEYXRlIiwicGFyc2UiLCJpc05hTiIsImQiLCJ5eXl5IiwiZ2V0VVRDRnVsbFllYXIiLCJtbSIsImdldFVUQ01vbnRoIiwicGFkU3RhcnQiLCJkZCIsImdldFVUQ0RhdGUiLCJmb3JtYXRJRFIiLCJ4IiwiTWF0aCIsInJvdW5kIiwidG9Mb2NhbGVTdHJpbmciLCJjb21wYXJlRGF0ZSIsImEiLCJiIiwiZGEiLCJkYiIsImxvY2FsZUNvbXBhcmUiLCJhZGREYXlzIiwiZGF0ZSIsImRheXMiLCJ5IiwibSIsInNwbGl0IiwibWFwIiwiZHQiLCJVVEMiLCJzZXRVVENEYXRlIiwiaW5SYW5nZSIsImZyb20iLCJ0byIsImFzT2YiLCJjdXRvZmYiLCJzYWZlVGV4dCIsInN1bSIsImFyciIsInJlZHVjZSIsInZhcmlhbmNlUGN0IiwiY3VycmVudCIsInByZXZpb3VzIiwiYWJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/report/utils.ts\n");

/***/ }),

/***/ "(api)/./lib/report/validations.ts":
/*!***********************************!*\
  !*** ./lib/report/validations.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isBalanced: () => (/* binding */ isBalanced),\n/* harmony export */   isCloseToZero: () => (/* binding */ isCloseToZero),\n/* harmony export */   validateBalanceSheet: () => (/* binding */ validateBalanceSheet),\n/* harmony export */   validateCashflow: () => (/* binding */ validateCashflow)\n/* harmony export */ });\nfunction isCloseToZero(value, tolerance = 0.0001) {\n    return Math.abs(value) < tolerance;\n}\nfunction isBalanced(totalDebit, totalCredit, tolerance = 0.0001) {\n    return Math.abs(totalDebit - totalCredit) < tolerance;\n}\nfunction validateBalanceSheet(assets, liabilities, equity, tolerance = 0.0001) {\n    const diff = assets - (liabilities + equity);\n    return {\n        is_balanced: Math.abs(diff) < tolerance,\n        diff\n    };\n}\nfunction validateCashflow(netChange, sumActivities, tolerance = 0.0001) {\n    const diff = sumActivities - netChange;\n    return {\n        net_matches: Math.abs(diff) < tolerance,\n        diff\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVwb3J0L3ZhbGlkYXRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTyxTQUFTQSxjQUFjQyxLQUFhLEVBQUVDLFlBQVksTUFBTTtJQUM3RCxPQUFPQyxLQUFLQyxHQUFHLENBQUNILFNBQVNDO0FBQzNCO0FBRU8sU0FBU0csV0FBV0MsVUFBa0IsRUFBRUMsV0FBbUIsRUFBRUwsWUFBWSxNQUFNO0lBQ3BGLE9BQU9DLEtBQUtDLEdBQUcsQ0FBQ0UsYUFBYUMsZUFBZUw7QUFDOUM7QUFFTyxTQUFTTSxxQkFBcUJDLE1BQWMsRUFBRUMsV0FBbUIsRUFBRUMsTUFBYyxFQUFFVCxZQUFZLE1BQU07SUFDMUcsTUFBTVUsT0FBT0gsU0FBVUMsQ0FBQUEsY0FBY0MsTUFBSztJQUMxQyxPQUFPO1FBQUVFLGFBQWFWLEtBQUtDLEdBQUcsQ0FBQ1EsUUFBUVY7UUFBV1U7SUFBSztBQUN6RDtBQUVPLFNBQVNFLGlCQUFpQkMsU0FBaUIsRUFBRUMsYUFBcUIsRUFBRWQsWUFBWSxNQUFNO0lBQzNGLE1BQU1VLE9BQU9JLGdCQUFnQkQ7SUFDN0IsT0FBTztRQUFFRSxhQUFhZCxLQUFLQyxHQUFHLENBQUNRLFFBQVFWO1FBQVdVO0lBQUs7QUFDekQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHRpdnV6LXJlcG9ydC1lbmdpbmUvLi9saWIvcmVwb3J0L3ZhbGlkYXRpb25zLnRzPzAzM2QiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGlzQ2xvc2VUb1plcm8odmFsdWU6IG51bWJlciwgdG9sZXJhbmNlID0gMC4wMDAxKTogYm9vbGVhbiB7XG4gIHJldHVybiBNYXRoLmFicyh2YWx1ZSkgPCB0b2xlcmFuY2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0JhbGFuY2VkKHRvdGFsRGViaXQ6IG51bWJlciwgdG90YWxDcmVkaXQ6IG51bWJlciwgdG9sZXJhbmNlID0gMC4wMDAxKTogYm9vbGVhbiB7XG4gIHJldHVybiBNYXRoLmFicyh0b3RhbERlYml0IC0gdG90YWxDcmVkaXQpIDwgdG9sZXJhbmNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVCYWxhbmNlU2hlZXQoYXNzZXRzOiBudW1iZXIsIGxpYWJpbGl0aWVzOiBudW1iZXIsIGVxdWl0eTogbnVtYmVyLCB0b2xlcmFuY2UgPSAwLjAwMDEpOiB7IGlzX2JhbGFuY2VkOiBib29sZWFuOyBkaWZmOiBudW1iZXIgfSB7XG4gIGNvbnN0IGRpZmYgPSBhc3NldHMgLSAobGlhYmlsaXRpZXMgKyBlcXVpdHkpO1xuICByZXR1cm4geyBpc19iYWxhbmNlZDogTWF0aC5hYnMoZGlmZikgPCB0b2xlcmFuY2UsIGRpZmYgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQ2FzaGZsb3cobmV0Q2hhbmdlOiBudW1iZXIsIHN1bUFjdGl2aXRpZXM6IG51bWJlciwgdG9sZXJhbmNlID0gMC4wMDAxKTogeyBuZXRfbWF0Y2hlczogYm9vbGVhbjsgZGlmZjogbnVtYmVyIH0ge1xuICBjb25zdCBkaWZmID0gc3VtQWN0aXZpdGllcyAtIG5ldENoYW5nZTtcbiAgcmV0dXJuIHsgbmV0X21hdGNoZXM6IE1hdGguYWJzKGRpZmYpIDwgdG9sZXJhbmNlLCBkaWZmIH07XG59XG4iXSwibmFtZXMiOlsiaXNDbG9zZVRvWmVybyIsInZhbHVlIiwidG9sZXJhbmNlIiwiTWF0aCIsImFicyIsImlzQmFsYW5jZWQiLCJ0b3RhbERlYml0IiwidG90YWxDcmVkaXQiLCJ2YWxpZGF0ZUJhbGFuY2VTaGVldCIsImFzc2V0cyIsImxpYWJpbGl0aWVzIiwiZXF1aXR5IiwiZGlmZiIsImlzX2JhbGFuY2VkIiwidmFsaWRhdGVDYXNoZmxvdyIsIm5ldENoYW5nZSIsInN1bUFjdGl2aXRpZXMiLCJuZXRfbWF0Y2hlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/report/validations.ts\n");

/***/ }),

/***/ "(api)/./lib/supabaseServer.ts":
/*!*******************************!*\
  !*** ./lib/supabaseServer.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSupabaseServerClient: () => (/* binding */ getSupabaseServerClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__]);\n_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nlet cachedClient = null;\nfunction getSupabaseServerClient() {\n    if (cachedClient) return cachedClient;\n    const url = process.env.SUPABASE_URL;\n    const key = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    if (!url || !key) {\n        throw new Error(\"Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY\");\n    }\n    cachedClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(url, key, {\n        auth: {\n            persistSession: false,\n            autoRefreshToken: false\n        }\n    });\n    return cachedClient;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2VTZXJ2ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMEU7QUFFMUUsSUFBSUMsZUFBc0M7QUFFbkMsU0FBU0M7SUFDZCxJQUFJRCxjQUFjLE9BQU9BO0lBQ3pCLE1BQU1FLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWTtJQUNwQyxNQUFNQyxNQUFNSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtJQUNqRCxJQUFJLENBQUNMLE9BQU8sQ0FBQ0ksS0FBSztRQUNoQixNQUFNLElBQUlFLE1BQU07SUFDbEI7SUFDQVIsZUFBZUQsbUVBQVlBLENBQUNHLEtBQUtJLEtBQUs7UUFDcENHLE1BQU07WUFBRUMsZ0JBQWdCO1lBQU9DLGtCQUFrQjtRQUFNO0lBQ3pEO0lBQ0EsT0FBT1g7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL29wdGl2dXotcmVwb3J0LWVuZ2luZS8uL2xpYi9zdXBhYmFzZVNlcnZlci50cz9jNzhjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCwgdHlwZSBTdXBhYmFzZUNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3VwYWJhc2UtanNcIjtcblxubGV0IGNhY2hlZENsaWVudDogU3VwYWJhc2VDbGllbnQgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cGFiYXNlU2VydmVyQ2xpZW50KCk6IFN1cGFiYXNlQ2xpZW50IHtcbiAgaWYgKGNhY2hlZENsaWVudCkgcmV0dXJuIGNhY2hlZENsaWVudDtcbiAgY29uc3QgdXJsID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMO1xuICBjb25zdCBrZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuICBpZiAoIXVybCB8fCAha2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBTVVBBQkFTRV9VUkwgb3IgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWVwiKTtcbiAgfVxuICBjYWNoZWRDbGllbnQgPSBjcmVhdGVDbGllbnQodXJsLCBrZXksIHtcbiAgICBhdXRoOiB7IHBlcnNpc3RTZXNzaW9uOiBmYWxzZSwgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UgfSxcbiAgfSk7XG4gIHJldHVybiBjYWNoZWRDbGllbnQ7XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiY2FjaGVkQ2xpZW50IiwiZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQiLCJ1cmwiLCJwcm9jZXNzIiwiZW52IiwiU1VQQUJBU0VfVVJMIiwia2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIiwiYXV0b1JlZnJlc2hUb2tlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/supabaseServer.ts\n");

/***/ }),

/***/ "(api)/./pages/api/report/[report_key].ts":
/*!******************************************!*\
  !*** ./pages/api/report/[report_key].ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseServer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/supabaseServer */ \"(api)/./lib/supabaseServer.ts\");\n/* harmony import */ var _lib_report__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/report */ \"(api)/./lib/report/index.ts\");\n/* harmony import */ var _lib_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/html */ \"(api)/./lib/html.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_supabaseServer__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_supabaseServer__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") return res.status(405).send(\"Method not allowed\");\n    const reportKey = String(req.query.report_key || \"\").trim();\n    if (!reportKey) return res.status(400).send(\"report_key required\");\n    try {\n        const supabase = (0,_lib_supabaseServer__WEBPACK_IMPORTED_MODULE_0__.getSupabaseServerClient)();\n        const { data, error } = await supabase.from(\"reports\").select(\"payload, company_name, period_from, period_to\").eq(\"report_key\", reportKey).single();\n        if (error || !data) {\n            res.setHeader(\"Content-Type\", \"text/html; charset=utf-8\");\n            return res.status(404).send(`<!doctype html>\n<html><head><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n<title>Report not found</title>\n<style>body{font-family:Source Sans 3,system-ui,Segoe UI,Arial,sans-serif;margin:24px;color:#0f172a} .muted{color:#64748b}</style>\n</head>\n<body>\n  <h2>Report belum tersedia</h2>\n  <p class=\"muted\">Generate report dulu dari aplikasi, lalu buka ulang URL ini.</p>\n</body></html>`);\n        }\n        const payload = data.payload || {};\n        const report = (0,_lib_report__WEBPACK_IMPORTED_MODULE_1__.buildAllReportModels)(payload);\n        const html = (0,_lib_html__WEBPACK_IMPORTED_MODULE_2__.renderTabbedHTML)(report);\n        res.setHeader(\"Content-Type\", \"text/html; charset=utf-8\");\n        return res.status(200).send(html);\n    } catch (err) {\n        return res.status(400).send(String(err?.message || err));\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcmVwb3J0L1tyZXBvcnRfa2V5XS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ3NFO0FBQ1g7QUFDTjtBQUV0QyxlQUFlRyxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM3RSxJQUFJRCxJQUFJRSxNQUFNLEtBQUssT0FBTyxPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO0lBRXRELE1BQU1DLFlBQVlDLE9BQU9OLElBQUlPLEtBQUssQ0FBQ0MsVUFBVSxJQUFJLElBQUlDLElBQUk7SUFDekQsSUFBSSxDQUFDSixXQUFXLE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7SUFFNUMsSUFBSTtRQUNGLE1BQU1NLFdBQVdkLDRFQUF1QkE7UUFDeEMsTUFBTSxFQUFFZSxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1GLFNBQzNCRyxJQUFJLENBQUMsV0FDTEMsTUFBTSxDQUFDLGlEQUNQQyxFQUFFLENBQUMsY0FBY1YsV0FDakJXLE1BQU07UUFFVCxJQUFJSixTQUFTLENBQUNELE1BQU07WUFDbEJWLElBQUlnQixTQUFTLENBQUMsZ0JBQWdCO1lBQzlCLE9BQU9oQixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDLENBQUM7Ozs7Ozs7O2NBUXJCLENBQUM7UUFDWDtRQUVBLE1BQU1jLFVBQVVQLEtBQUtPLE9BQU8sSUFBSSxDQUFDO1FBQ2pDLE1BQU1DLFNBQVN0QixpRUFBb0JBLENBQUNxQjtRQUNwQyxNQUFNRSxPQUFPdEIsMkRBQWdCQSxDQUFDcUI7UUFFOUJsQixJQUFJZ0IsU0FBUyxDQUFDLGdCQUFnQjtRQUM5QixPQUFPaEIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ2dCO0lBQzlCLEVBQUUsT0FBT0MsS0FBVTtRQUNqQixPQUFPcEIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ0UsT0FBT2UsS0FBS0MsV0FBV0Q7SUFDckQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL29wdGl2dXotcmVwb3J0LWVuZ2luZS8uL3BhZ2VzL2FwaS9yZXBvcnQvW3JlcG9ydF9rZXldLnRzPzZjNTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IGdldFN1cGFiYXNlU2VydmVyQ2xpZW50IH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9zdXBhYmFzZVNlcnZlclwiO1xuaW1wb3J0IHsgYnVpbGRBbGxSZXBvcnRNb2RlbHMgfSBmcm9tIFwiLi4vLi4vLi4vbGliL3JlcG9ydFwiO1xuaW1wb3J0IHsgcmVuZGVyVGFiYmVkSFRNTCB9IGZyb20gXCIuLi8uLi8uLi9saWIvaHRtbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSBcIkdFVFwiKSByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLnNlbmQoXCJNZXRob2Qgbm90IGFsbG93ZWRcIik7XG5cbiAgY29uc3QgcmVwb3J0S2V5ID0gU3RyaW5nKHJlcS5xdWVyeS5yZXBvcnRfa2V5IHx8IFwiXCIpLnRyaW0oKTtcbiAgaWYgKCFyZXBvcnRLZXkpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChcInJlcG9ydF9rZXkgcmVxdWlyZWRcIik7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlU2VydmVyQ2xpZW50KCk7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicmVwb3J0c1wiKVxuICAgICAgLnNlbGVjdChcInBheWxvYWQsIGNvbXBhbnlfbmFtZSwgcGVyaW9kX2Zyb20sIHBlcmlvZF90b1wiKVxuICAgICAgLmVxKFwicmVwb3J0X2tleVwiLCByZXBvcnRLZXkpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IgfHwgIWRhdGEpIHtcbiAgICAgIHJlcy5zZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLThcIik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoYDwhZG9jdHlwZSBodG1sPlxuPGh0bWw+PGhlYWQ+PG1ldGEgY2hhcnNldD1cInV0Zi04XCI+PG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTFcIj5cbjx0aXRsZT5SZXBvcnQgbm90IGZvdW5kPC90aXRsZT5cbjxzdHlsZT5ib2R5e2ZvbnQtZmFtaWx5OlNvdXJjZSBTYW5zIDMsc3lzdGVtLXVpLFNlZ29lIFVJLEFyaWFsLHNhbnMtc2VyaWY7bWFyZ2luOjI0cHg7Y29sb3I6IzBmMTcyYX0gLm11dGVke2NvbG9yOiM2NDc0OGJ9PC9zdHlsZT5cbjwvaGVhZD5cbjxib2R5PlxuICA8aDI+UmVwb3J0IGJlbHVtIHRlcnNlZGlhPC9oMj5cbiAgPHAgY2xhc3M9XCJtdXRlZFwiPkdlbmVyYXRlIHJlcG9ydCBkdWx1IGRhcmkgYXBsaWthc2ksIGxhbHUgYnVrYSB1bGFuZyBVUkwgaW5pLjwvcD5cbjwvYm9keT48L2h0bWw+YCk7XG4gICAgfVxuXG4gICAgY29uc3QgcGF5bG9hZCA9IGRhdGEucGF5bG9hZCB8fCB7fTtcbiAgICBjb25zdCByZXBvcnQgPSBidWlsZEFsbFJlcG9ydE1vZGVscyhwYXlsb2FkKTtcbiAgICBjb25zdCBodG1sID0gcmVuZGVyVGFiYmVkSFRNTChyZXBvcnQpO1xuXG4gICAgcmVzLnNldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcInRleHQvaHRtbDsgY2hhcnNldD11dGYtOFwiKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoaHRtbCk7XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKFN0cmluZyhlcnI/Lm1lc3NhZ2UgfHwgZXJyKSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRTdXBhYmFzZVNlcnZlckNsaWVudCIsImJ1aWxkQWxsUmVwb3J0TW9kZWxzIiwicmVuZGVyVGFiYmVkSFRNTCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJzZW5kIiwicmVwb3J0S2V5IiwiU3RyaW5nIiwicXVlcnkiLCJyZXBvcnRfa2V5IiwidHJpbSIsInN1cGFiYXNlIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwic2V0SGVhZGVyIiwicGF5bG9hZCIsInJlcG9ydCIsImh0bWwiLCJlcnIiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/report/[report_key].ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Freport%2F%5Breport_key%5D&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Freport%2F%5Breport_key%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();